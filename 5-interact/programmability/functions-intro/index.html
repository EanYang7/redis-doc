
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Scripting with Redis 7 and beyond
">
      
      
        <meta name="author" content="Ean Yang">
      
      
        <link rel="canonical" href="https://eanyang7.github.io/redis-doc/5-interact/programmability/functions-intro/">
      
      
        <link rel="prev" href="../eval-intro/">
      
      
        <link rel="next" href="../lua-api/">
      
      
      <link rel="icon" href="../../../assets/favicon.jpg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.12">
    
    
      
        <title>Redis functions - redis 文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prologue-or-whats-wrong-with-eval-scripts" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="redis 文档" class="md-header__button md-logo" aria-label="redis 文档" data-md-component="logo">
      
  <img src="../../../assets/logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            redis 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Redis functions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple"  aria-label="切换为暗黑模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换为暗黑模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="red"  aria-label="切换为浅色模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换为浅色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EanYang7/redis-doc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    github仓库
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="redis 文档" class="md-nav__button md-logo" aria-label="redis 文档" data-md-component="logo">
      
  <img src="../../../assets/logo.jpg" alt="logo">

    </a>
    redis 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EanYang7/redis-doc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    github仓库
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../0-about/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    0 about
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../1-get-started/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    1 get started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../2-install/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    2 install
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../3-connect/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    3 connect
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../4-data-types/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    4 data types
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    5 interact
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            5 interact
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
     index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../pubsub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis Pub/Sub
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../transactions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transactions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" checked>
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programmability
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            Programmability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis programmability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../eval-intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripting with Lua
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Redis functions
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Redis functions
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prologue-or-whats-wrong-with-eval-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Prologue (or, what's wrong with Eval Scripts?)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-redis-functions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Redis Functions?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-libraries-and-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Loading libraries and functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-keys-and-regular-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Input keys and regular arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expanding-the-library" class="md-nav__link">
    <span class="md-ellipsis">
      Expanding the library
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusing-code-in-the-library" class="md-nav__link">
    <span class="md-ellipsis">
      Reusing code in the library
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-in-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Functions in cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-and-ephemeral-redis-instances" class="md-nav__link">
    <span class="md-ellipsis">
      Functions and ephemeral Redis instances
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Function flags
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../lua-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis Lua API reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../lua-debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging Lua scripts in Redis
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../6-manual/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    6 manual
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../7-management/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    7 management
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../8-reference/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    8 reference
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prologue-or-whats-wrong-with-eval-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Prologue (or, what's wrong with Eval Scripts?)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-are-redis-functions" class="md-nav__link">
    <span class="md-ellipsis">
      What are Redis Functions?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-libraries-and-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Loading libraries and functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input-keys-and-regular-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Input keys and regular arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expanding-the-library" class="md-nav__link">
    <span class="md-ellipsis">
      Expanding the library
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reusing-code-in-the-library" class="md-nav__link">
    <span class="md-ellipsis">
      Reusing code in the library
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-in-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Functions in cluster
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions-and-ephemeral-redis-instances" class="md-nav__link">
    <span class="md-ellipsis">
      Functions and ephemeral Redis instances
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-flags" class="md-nav__link">
    <span class="md-ellipsis">
      Function flags
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/EanYang7/redis-doc/tree/main/docs/5-interact/programmability/functions-intro.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/EanYang7/redis-doc/tree/main/docs/5-interact/programmability/functions-intro.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


  <h1>Redis functions</h1>

<p>Redis Functions is an API for managing code to be executed on the server. This feature, which became available in Redis 7, supersedes the use of <a href="/docs/manual/programmability/eval-intro">EVAL</a> in prior versions of Redis.</p>
<h2 id="prologue-or-whats-wrong-with-eval-scripts">Prologue (or, what's wrong with Eval Scripts?)<a class="headerlink" href="#prologue-or-whats-wrong-with-eval-scripts" title="Permanent link">⚓︎</a></h2>
<p>Prior versions of Redis made scripting available only via the <code>EVAL</code> command, which allows a Lua script to be sent for execution by the server.
The core use cases for <a href="/topics/eval-intro">Eval Scripts</a> is executing part of your application logic inside Redis, efficiently and atomically.
Such script can perform conditional updates across multiple keys, possibly combining several different data types.</p>
<p>Using <code>EVAL</code> requires that the application sends the entire script for execution every time.
Because this results in network and script compilation overheads, Redis provides an optimization in the form of the <code>EVALSHA</code> command. By first calling <code>SCRIPT LOAD</code> to obtain the script's SHA1, the application can invoke it repeatedly afterward with its digest alone.</p>
<p>By design, Redis only caches the loaded scripts.
That means that the script cache can become lost at any time, such as after calling <code>SCRIPT FLUSH</code>, after restarting the server, or when failing over to a replica.
The application is responsible for reloading scripts during runtime if any are missing.
The underlying assumption is that scripts are a part of the application and not maintained by the Redis server.</p>
<p>This approach suits many light-weight scripting use cases, but introduces several difficulties once an application becomes complex and relies more heavily on scripting, namely:</p>
<ol>
<li>All client application instances must maintain a copy of all scripts. That means having some mechanism that applies script updates to all of the application's instances.</li>
<li>Calling cached scripts within the context of a <a href="/topics/transactions">transaction</a> increases the probability of the transaction failing because of a missing script. Being more likely to fail makes using cached scripts as building blocks of workflows less attractive.</li>
<li>SHA1 digests are meaningless, making debugging the system extremely hard (e.g., in a <code>MONITOR</code> session).</li>
<li>When used naively, <code>EVAL</code> promotes an anti-pattern in which scripts the client application renders verbatim scripts instead of responsibly using the <a href="/topics/lua-api#runtime-globals"><code>!KEYS</code> and <code>ARGV</code> Lua APIs</a>.</li>
<li>Because they are ephemeral, a script can't call another script. This makes sharing and reusing code between scripts nearly impossible, short of client-side preprocessing (see the first point).</li>
</ol>
<p>To address these needs while avoiding breaking changes to already-established and well-liked ephemeral scripts, Redis v7.0 introduces Redis Functions.</p>
<h2 id="what-are-redis-functions">What are Redis Functions?<a class="headerlink" href="#what-are-redis-functions" title="Permanent link">⚓︎</a></h2>
<p>Redis functions are an evolutionary step from ephemeral scripting.</p>
<p>Functions provide the same core functionality as scripts but are first-class software artifacts of the database.
Redis manages functions as an integral part of the database and ensures their availability via data persistence and replication.
Because functions are part of the database and therefore declared before use, applications aren't required to load them during runtime nor risk aborted transactions.
An application that uses functions depends only on their APIs rather than on the embedded script logic in the database.</p>
<p>Whereas ephemeral scripts are considered a part of the application's domain, functions extend the database server itself with user-provided logic.
They can be used to expose a richer API composed of core Redis commands, similar to modules, developed once, loaded at startup, and used repeatedly by various applications / clients.
Every function has a unique user-defined name, making it much easier to call and trace its execution.</p>
<p>The design of Redis Functions also attempts to demarcate between the programming language used for writing functions and their management by the server.
Lua, the only language interpreter that Redis presently support as an embedded execution engine, is meant to be simple and easy to learn.
However, the choice of Lua as a language still presents many Redis users with a challenge.</p>
<p>The Redis Functions feature makes no assumptions about the implementation's language.
An execution engine that is part of the definition of the function handles running it.
An engine can theoretically execute functions in any language as long as it respects several rules (such as the ability to terminate an executing function).</p>
<p>Presently, as noted above, Redis ships with a single embedded <a href="/topics/lua-api">Lua 5.1</a> engine.
There are plans to support additional engines in the future.
Redis functions can use all of Lua's available capabilities to ephemeral scripts,
with the only exception being the <a href="/topics/ldb">Redis Lua scripts debugger</a>.</p>
<p>Functions also simplify development by enabling code sharing.
Every function belongs to a single library, and any given library can consist of multiple functions.
The library's contents are immutable, and selective updates of its functions aren't allowed.
Instead, libraries are updated as a whole with all of their functions together in one operation.
This allows calling functions from other functions within the same library, or sharing code between functions by using a common code in library-internal methods, that can also take language native arguments.</p>
<p>Functions are intended to better support the use case of maintaining a consistent view for data entities through a logical schema, as mentioned above.
As such, functions are stored alongside the data itself.
Functions are also persisted to the AOF file and replicated from master to replicas, so they are as durable as the data itself.
When Redis is used as an ephemeral cache, additional mechanisms (described below) are required to make functions more durable.</p>
<p>Like all other operations in Redis, the execution of a function is atomic.
A function's execution blocks all server activities during its entire time, similarly to the semantics of <a href="/topics/transactions">transactions</a>.
These semantics mean that all of the script's effects either have yet to happen or had already happened.
The blocking semantics of an executed function apply to all connected clients at all times.
Because running a function blocks the Redis server, functions are meant to finish executing quickly, so you should avoid using long-running functions.</p>
<h2 id="loading-libraries-and-functions">Loading libraries and functions<a class="headerlink" href="#loading-libraries-and-functions" title="Permanent link">⚓︎</a></h2>
<p>Let's explore Redis Functions via some tangible examples and Lua snippets.</p>
<p>At this point, if you're unfamiliar with Lua in general and specifically in Redis, you may benefit from reviewing some of the examples in <a href="/topics/eval-intro">Introduction to Eval Scripts</a> and <a href="/topics/lua-api">Lua API</a> pages for a better grasp of the language.</p>
<p>Every Redis function belongs to a single library that's loaded to Redis.
Loading a library to the database is done with the <code>FUNCTION LOAD</code> command.
The command gets the library payload as input,
the library payload must start with Shebang statement that provides a metadata about the library (like the engine to use and the library name).
The Shebang format is:
<div class="highlight"><pre><span></span><code>#!&lt;engine name&gt; name=&lt;library name&gt;
</code></pre></div></p>
<p>Let's try loading an empty library:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FUNCTION LOAD &quot;#!lua name=mylib\n&quot;
(error) ERR No functions registered
</code></pre></div>
<p>The error is expected, as there are no functions in the loaded library. Every library needs to include at least one registered function to load successfully.
A registered function is named and acts as an entry point to the library.
When the target execution engine handles the <code>FUNCTION LOAD</code> command, it registers the library's functions.</p>
<p>The Lua engine compiles and evaluates the library source code when loaded, and expects functions to be registered by calling the <code>redis.register_function()</code> API.</p>
<p>The following snippet demonstrates a simple library registering a single function named <em>knockknock</em>, returning a string reply:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#!lua name=mylib</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span>
  <span class="s1">&#39;knockknock&#39;</span><span class="p">,</span>
  <span class="kr">function</span><span class="p">()</span> <span class="kr">return</span> <span class="s1">&#39;Who</span><span class="se">\&#39;</span><span class="s1">s there?&#39;</span> <span class="kr">end</span>
<span class="p">)</span>
</code></pre></div>
<p>In the example above, we provide two arguments about the function to Lua's <code>redis.register_function()</code> API: its registered name and a callback.</p>
<p>We can load our library and use <code>FCALL</code> to call the registered function:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FUNCTION LOAD &quot;#!lua name=mylib\nredis.register_function(&#39;knockknock&#39;, function() return &#39;Who\\&#39;s there?&#39; end)&quot;
mylib
redis&gt; FCALL knockknock 0
&quot;Who&#39;s there?&quot;
</code></pre></div>
<p>Notice that the <code>FUNCTION LOAD</code> command returns the name of the loaded library, this name can later be used <code>FUNCTION LIST</code> and <code>FUNCTION DELETE</code>.</p>
<p>We've provided <code>FCALL</code> with two arguments: the function's registered name and the numeric value <code>0</code>. This numeric value indicates the number of key names that follow it (the same way <code>EVAL</code> and <code>EVALSHA</code> work).</p>
<p>We'll explain immediately how key names and additional arguments are available to the function. As this simple example doesn't involve keys, we simply use 0 for now.</p>
<h2 id="input-keys-and-regular-arguments">Input keys and regular arguments<a class="headerlink" href="#input-keys-and-regular-arguments" title="Permanent link">⚓︎</a></h2>
<p>Before we move to the following example, it is vital to understand the distinction Redis makes between arguments that are names of keys and those that aren't.</p>
<p>While key names in Redis are just strings, unlike any other string values, these represent keys in the database.
The name of a key is a fundamental concept in Redis and is the basis for operating the Redis Cluster.</p>
<p><strong>Important:</strong>
To ensure the correct execution of Redis Functions, both in standalone and clustered deployments, all names of keys that a function accesses must be explicitly provided as input key arguments.</p>
<p>Any input to the function that isn't the name of a key is a regular input argument.</p>
<p>Now, let's pretend that our application stores some of its data in Redis Hashes.
We want an <code>HSET</code>-like way to set and update fields in said Hashes and store the last modification time in a new field named <code>_last_modified_</code>.
We can implement a function to do all that.</p>
<p>Our function will call <code>TIME</code> to get the server's clock reading and update the target Hash with the new fields' values and the modification's timestamp.
The function we'll implement accepts the following input arguments: the Hash's key name and the field-value pairs to update.</p>
<p>The Lua API for Redis Functions makes these inputs accessible as the first and second arguments to the function's callback.
The callback's first argument is a Lua table populated with all key names inputs to the function.
Similarly, the callback's second argument consists of all regular arguments.</p>
<p>The following is a possible implementation for our function and its library registration:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#!lua name=mylib</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hset</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">time</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;TIME&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HSET&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">,</span> <span class="s1">&#39;_last_modified_&#39;</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">unpack</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
<span class="kr">end</span>

<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hset&#39;</span><span class="p">,</span> <span class="n">my_hset</span><span class="p">)</span>
</code></pre></div>
<p>If we create a new file named <em>mylib.lua</em> that consists of the library's definition, we can load it like so (without stripping the source code of helpful whitespaces):</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>mylib.lua<span class="w"> </span><span class="p">|</span><span class="w"> </span>redis-cli<span class="w"> </span>-x<span class="w"> </span>FUNCTION<span class="w"> </span>LOAD<span class="w"> </span>REPLACE
</code></pre></div>
<p>We've added the <code>REPLACE</code> modifier to the call to <code>FUNCTION LOAD</code> to tell Redis that we want to overwrite the existing library definition.
Otherwise, we would have gotten an error from Redis complaining that the library already exists.</p>
<p>Now that the library's updated code is loaded to Redis, we can proceed and call our function:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FCALL my_hset 1 myhash myfield &quot;some value&quot; another_field &quot;another value&quot;
(integer) 3
redis&gt; HGETALL myhash
1) &quot;_last_modified_&quot;
2) &quot;1640772721&quot;
3) &quot;myfield&quot;
4) &quot;some value&quot;
5) &quot;another_field&quot;
6) &quot;another value&quot;
</code></pre></div>
<p>In this case, we had invoked <code>FCALL</code> with <em>1</em> as the number of key name arguments.
That means that the function's first input argument is a name of a key (and is therefore included in the callback's <code>keys</code> table).
After that first argument, all following input arguments are considered regular arguments and constitute the <code>args</code> table passed to the callback as its second argument.</p>
<h2 id="expanding-the-library">Expanding the library<a class="headerlink" href="#expanding-the-library" title="Permanent link">⚓︎</a></h2>
<p>We can add more functions to our library to benefit our application.
The additional metadata field we've added to the Hash shouldn't be included in responses when accessing the Hash's data.
On the other hand, we do want to provide the means to obtain the modification timestamp for a given Hash key.</p>
<p>We'll add two new functions to our library to accomplish these objectives:</p>
<ol>
<li>The <code>my_hgetall</code> Redis Function will return all fields and their respective values from a given Hash key name, excluding the metadata (i.e., the <code>_last_modified_</code> field).</li>
<li>The <code>my_hlastmodified</code> Redis Function will return the modification timestamp for a given Hash key name.</li>
</ol>
<p>The library's source code could look something like the following:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#!lua name=mylib</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hset</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">time</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;TIME&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HSET&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">,</span> <span class="s1">&#39;_last_modified_&#39;</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">unpack</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hgetall</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="n">redis</span><span class="p">.</span><span class="n">setresp</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">res</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HGETALL&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">)</span>
  <span class="n">res</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">][</span><span class="s1">&#39;_last_modified_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kr">return</span> <span class="n">res</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hlastmodified</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HGET&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">,</span> <span class="s1">&#39;_last_modified_&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hset&#39;</span><span class="p">,</span> <span class="n">my_hset</span><span class="p">)</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hgetall&#39;</span><span class="p">,</span> <span class="n">my_hgetall</span><span class="p">)</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hlastmodified&#39;</span><span class="p">,</span> <span class="n">my_hlastmodified</span><span class="p">)</span>
</code></pre></div>
<p>While all of the above should be straightforward, note that the <code>my_hgetall</code> also calls <a href="/topics/lua-api#redis.setresp"><code>redis.setresp(3)</code></a>.
That means that the function expects <a href="https://github.com/redis/redis-specifications/blob/master/protocol/RESP3.md">RESP3</a> replies after calling <code>redis.call()</code>, which, unlike the default RESP2 protocol, provides dictionary (associative arrays) replies.
Doing so allows the function to delete (or set to <code>nil</code> as is the case with Lua tables) specific fields from the reply, and in our case, the <code>_last_modified_</code> field.</p>
<p>Assuming you've saved the library's implementation in the <em>mylib.lua</em> file, you can replace it with:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>mylib.lua<span class="w"> </span><span class="p">|</span><span class="w"> </span>redis-cli<span class="w"> </span>-x<span class="w"> </span>FUNCTION<span class="w"> </span>LOAD<span class="w"> </span>REPLACE
</code></pre></div>
<p>Once loaded, you can call the library's functions with <code>FCALL</code>:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FCALL my_hgetall 1 myhash
1) &quot;myfield&quot;
2) &quot;some value&quot;
3) &quot;another_field&quot;
4) &quot;another value&quot;
redis&gt; FCALL my_hlastmodified 1 myhash
&quot;1640772721&quot;
</code></pre></div>
<p>You can also get the library's details with the <code>FUNCTION LIST</code> command:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FUNCTION LIST
1) 1) &quot;library_name&quot;
   2) &quot;mylib&quot;
   3) &quot;engine&quot;
   4) &quot;LUA&quot;
   5) &quot;functions&quot;
   6) 1) 1) &quot;name&quot;
         2) &quot;my_hset&quot;
         3) &quot;description&quot;
         4) (nil)
      2) 1) &quot;name&quot;
         2) &quot;my_hgetall&quot;
         3) &quot;description&quot;
         4) (nil)
      3) 1) &quot;name&quot;
         2) &quot;my_hlastmodified&quot;
         3) &quot;description&quot;
         4) (nil)
</code></pre></div>
<p>You can see that it is easy to update our library with new capabilities.</p>
<h2 id="reusing-code-in-the-library">Reusing code in the library<a class="headerlink" href="#reusing-code-in-the-library" title="Permanent link">⚓︎</a></h2>
<p>On top of bundling functions together into database-managed software artifacts, libraries also facilitate code sharing.
We can add to our library an error handling helper function called from other functions.
The helper function <code>check_keys()</code> verifies that the input <em>keys</em> table has a single key.
Upon success it returns <code>nil</code>, otherwise it returns an <a href="/topics/lua-api#redis.error_reply">error reply</a>.</p>
<p>The updated library's source code would be:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#!lua name=mylib</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">check_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="kd">local</span> <span class="nb">error</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kd">local</span> <span class="n">nkeys</span> <span class="o">=</span> <span class="n">table</span><span class="p">.</span><span class="n">getn</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="kr">if</span> <span class="n">nkeys</span> <span class="o">==</span> <span class="mi">0</span> <span class="kr">then</span>
    <span class="nb">error</span> <span class="o">=</span> <span class="s1">&#39;Hash key name not provided&#39;</span>
  <span class="kr">elseif</span> <span class="n">nkeys</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="kr">then</span>
    <span class="nb">error</span> <span class="o">=</span> <span class="s1">&#39;Only one key name is allowed&#39;</span>
  <span class="kr">end</span>

  <span class="kr">if</span> <span class="nb">error</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="n">redis</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="n">redis</span><span class="p">.</span><span class="n">LOG_WARNING</span><span class="p">,</span> <span class="nb">error</span><span class="p">);</span>
    <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">error_reply</span><span class="p">(</span><span class="nb">error</span><span class="p">)</span>
  <span class="kr">end</span>
  <span class="kr">return</span> <span class="kc">nil</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hset</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="nb">error</span> <span class="o">=</span> <span class="n">check_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="kr">if</span> <span class="nb">error</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="nb">error</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">time</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;TIME&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HSET&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">,</span> <span class="s1">&#39;_last_modified_&#39;</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">unpack</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hgetall</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="nb">error</span> <span class="o">=</span> <span class="n">check_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="kr">if</span> <span class="nb">error</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="nb">error</span>
  <span class="kr">end</span>

  <span class="n">redis</span><span class="p">.</span><span class="n">setresp</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kd">local</span> <span class="n">res</span> <span class="o">=</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HGETALL&#39;</span><span class="p">,</span> <span class="n">hash</span><span class="p">)</span>
  <span class="n">res</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">][</span><span class="s1">&#39;_last_modified_&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">nil</span>
  <span class="kr">return</span> <span class="n">res</span>
<span class="kr">end</span>

<span class="kd">local</span> <span class="kr">function</span> <span class="nf">my_hlastmodified</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
  <span class="kd">local</span> <span class="nb">error</span> <span class="o">=</span> <span class="n">check_keys</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
  <span class="kr">if</span> <span class="nb">error</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="kr">then</span>
    <span class="kr">return</span> <span class="nb">error</span>
  <span class="kr">end</span>

  <span class="kd">local</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
  <span class="kr">return</span> <span class="n">redis</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="s1">&#39;HGET&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;_last_modified_&#39;</span><span class="p">)</span>
<span class="kr">end</span>

<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hset&#39;</span><span class="p">,</span> <span class="n">my_hset</span><span class="p">)</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hgetall&#39;</span><span class="p">,</span> <span class="n">my_hgetall</span><span class="p">)</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hlastmodified&#39;</span><span class="p">,</span> <span class="n">my_hlastmodified</span><span class="p">)</span>
</code></pre></div>
<p>After you've replaced the library in Redis with the above, you can immediately try out the new error handling mechanism:</p>
<div class="highlight"><pre><span></span><code>127.0.0.1:6379&gt; FCALL my_hset 0 myhash nope nope
(error) Hash key name not provided
127.0.0.1:6379&gt; FCALL my_hgetall 2 myhash anotherone
(error) Only one key name is allowed
</code></pre></div>
<p>And your Redis log file should have lines in it that are similar to:</p>
<div class="highlight"><pre><span></span><code>...
20075:M 1 Jan 2022 16:53:57.688 # Hash key name not provided
20075:M 1 Jan 2022 16:54:01.309 # Only one key name is allowed
</code></pre></div>
<h2 id="functions-in-cluster">Functions in cluster<a class="headerlink" href="#functions-in-cluster" title="Permanent link">⚓︎</a></h2>
<p>As noted above, Redis automatically handles propagation of loaded functions to replicas.
In a Redis Cluster, it is also necessary to load functions to all cluster nodes. This is not handled automatically by Redis Cluster, and needs to be handled by the cluster administrator (like module loading, configuration setting, etc.).</p>
<p>As one of the goals of functions is to live separately from the client application, this should not be part of the Redis client library responsibilities. Instead, <code>redis-cli --cluster-only-masters --cluster call host:port FUNCTION LOAD ...</code> can be used to execute the load command on all master nodes.</p>
<p>Also, note that <code>redis-cli --cluster add-node</code> automatically takes care to propagate the loaded functions from one of the existing nodes to the new node.</p>
<h2 id="functions-and-ephemeral-redis-instances">Functions and ephemeral Redis instances<a class="headerlink" href="#functions-and-ephemeral-redis-instances" title="Permanent link">⚓︎</a></h2>
<p>In some cases there may be a need to start a fresh Redis server with a set of functions pre-loaded. Common reasons for that could be:</p>
<ul>
<li>Starting Redis in a new environment</li>
<li>Re-starting an ephemeral (cache-only) Redis, that uses functions</li>
</ul>
<p>In such cases, we need to make sure that the pre-loaded functions are available before Redis accepts inbound user connections and commands.</p>
<p>To do that, it is possible to use <code>redis-cli --functions-rdb</code> to extract the functions from an existing server. This generates an RDB file that can be loaded by Redis at startup.</p>
<h2 id="function-flags">Function flags<a class="headerlink" href="#function-flags" title="Permanent link">⚓︎</a></h2>
<p>Redis needs to have some information about how a function is going to behave when executed, in order to properly enforce resource usage policies and maintain data consistency.</p>
<p>For example, Redis needs to know that a certain function is read-only before permitting it to execute using <code>FCALL_RO</code> on a read-only replica.</p>
<p>By default, Redis assumes that all functions may perform arbitrary read or write operations. Function Flags make it possible to declare more specific function behavior at the time of registration. Let's see how this works.</p>
<p>In our previous example, we defined two functions that only read data. We can try executing them using <code>FCALL_RO</code> against a read-only replica.</p>
<div class="highlight"><pre><span></span><code>redis &gt; FCALL_RO my_hgetall 1 myhash
(error) ERR Can not execute a function with write flag using fcall_ro.
</code></pre></div>
<p>Redis returns this error because a function can, in theory, perform both read and write operations on the database.
As a safeguard and by default, Redis assumes that the function does both, so it blocks its execution.
The server will reply with this error in the following cases:</p>
<ol>
<li>Executing a function with <code>FCALL</code> against a read-only replica.</li>
<li>Using <code>FCALL_RO</code> to execute a function.</li>
<li>A disk error was detected (Redis is unable to persist so it rejects writes).</li>
</ol>
<p>In these cases, you can add the <code>no-writes</code> flag to the function's registration, disable the safeguard and allow them to run.
To register a function with flags use the <a href="/topics/lua-api#redis.register_function_named_args">named arguments</a> variant of <code>redis.register_function</code>.</p>
<p>The updated registration code snippet from the library looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">(</span><span class="s1">&#39;my_hset&#39;</span><span class="p">,</span> <span class="n">my_hset</span><span class="p">)</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">{</span>
  <span class="n">function_name</span><span class="o">=</span><span class="s1">&#39;my_hgetall&#39;</span><span class="p">,</span>
  <span class="n">callback</span><span class="o">=</span><span class="n">my_hgetall</span><span class="p">,</span>
  <span class="n">flags</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;no-writes&#39;</span> <span class="p">}</span>
<span class="p">}</span>
<span class="n">redis</span><span class="p">.</span><span class="n">register_function</span><span class="p">{</span>
  <span class="n">function_name</span><span class="o">=</span><span class="s1">&#39;my_hlastmodified&#39;</span><span class="p">,</span>
  <span class="n">callback</span><span class="o">=</span><span class="n">my_hlastmodified</span><span class="p">,</span>
  <span class="n">flags</span><span class="o">=</span><span class="p">{</span> <span class="s1">&#39;no-writes&#39;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Once we've replaced the library, Redis allows running both <code>my_hgetall</code> and <code>my_hlastmodified</code> with <code>FCALL_RO</code> against a read-only replica:</p>
<div class="highlight"><pre><span></span><code>redis&gt; FCALL_RO my_hgetall 1 myhash
1) &quot;myfield&quot;
2) &quot;some value&quot;
3) &quot;another_field&quot;
4) &quot;another value&quot;
redis&gt; FCALL_RO my_hlastmodified 1 myhash
&quot;1640772721&quot;
</code></pre></div>
<p>For the complete documentation flags, please refer to <a href="/topics/lua-api#script_flags">Script flags</a>.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 25, 2023</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 25, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../eval-intro/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Scripting with Lua">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Scripting with Lua
              </div>
            </div>
          </a>
        
        
          
          <a href="../lua-api/" class="md-footer__link md-footer__link--next" aria-label="下一页: Redis Lua API reference">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Redis Lua API reference
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Ean Yang
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/YQisme" target="_blank" rel="noopener" title="github主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://space.bilibili.com/244185393?spm_id_from=333.788.0.0" target="_blank" rel="noopener" title="b站主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://eanyang7.com" target="_blank" rel="noopener" title="个人主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M112 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm40 304v128c0 17.7-14.3 32-32 32s-32-14.3-32-32V256.9l-28.6 47.6c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6h29.7c33.7 0 64.9 17.7 82.3 46.6l58.3 97c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9L232 256.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V352h-16z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.prune", "navigation.top", "toc.follow", "header.autohide", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.action.edit", "content.action.view", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>