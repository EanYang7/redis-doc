
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Reference for the Redis Modules API
">
      
      
        <meta name="author" content="Ean Yang">
      
      
        <link rel="canonical" href="https://eanyang7.github.io/redis-doc/8-reference/modules/modules-api-ref/">
      
      
        <link rel="prev" href="../_index/">
      
      
        <link rel="next" href="../modules-blocking-ops/">
      
      
      <link rel="icon" href="../../../assets/favicon.jpg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.12">
    
    
      
        <title>Modules API reference - redis 文档</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sections" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="redis 文档" class="md-header__button md-logo" aria-label="redis 文档" data-md-component="logo">
      
  <img src="../../../assets/logo.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            redis 文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Modules API reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="deep-purple"  aria-label="切换为暗黑模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换为暗黑模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="red"  aria-label="切换为浅色模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换为浅色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EanYang7/redis-doc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    github仓库
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="redis 文档" class="md-nav__button md-logo" aria-label="redis 文档" data-md-component="logo">
      
  <img src="../../../assets/logo.jpg" alt="logo">

    </a>
    redis 文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EanYang7/redis-doc" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    github仓库
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../0-about/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    0 about
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../1-get-started/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    1 get started
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../2-install/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    2 install
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../3-connect/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    3 connect
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../4-data-types/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    4 data types
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../5-interact/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    5 interact
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../6-manual/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    6 manual
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../7-management/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    7 management
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" checked>
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    8 reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            8 reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../arm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARM support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../clients/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis client handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cluster-spec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis cluster specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../command-arguments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis command arguments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../command-tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis command tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gopher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis and the Gopher protocol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../key-specs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Command key specifications
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../protocol-spec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis serialization protocol specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../sentinel-clients/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sentinel client spec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../signals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis signal handling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../eviction/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Eviction
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../internals/_index/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Internals
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_14" checked>
        
          
          <label class="md-nav__link" for="__nav_10_14" id="__nav_10_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_14_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_10_14">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis modules API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Modules API reference
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Modules API reference
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sections" class="md-nav__link">
    <span class="md-ellipsis">
      Sections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#heap-allocation-raw-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Heap allocation raw functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heap allocation raw functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_alloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Alloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_tryalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_TryAlloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_calloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Calloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_realloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Realloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_free" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_strdup" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Strdup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_poolalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PoolAlloc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands-api" class="md-nav__link">
    <span class="md-ellipsis">
      Commands API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Commands API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_iskeyspositionrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsKeysPositionRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyatposwithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyAtPosWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyatpos" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyAtPos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_ischannelspositionrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsChannelsPositionRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_channelatposwithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ChannelAtPosWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateCommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createsubcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateSubcommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcommandaclcategories" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetCommandACLCategories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcommandinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetCommandInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-information-and-time-measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Module information and time measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module information and time measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_ismodulenamebusy" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsModuleNameBusy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_milliseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Milliseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_monotonicmicroseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MonotonicMicroseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_microseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Microseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_cachedmicroseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CachedMicroseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientmeasuretimestart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientMeasureTimeStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientmeasuretimeend" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientMeasureTimeEnd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_yield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Yield
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleoptions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_signalmodifiedkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SignalModifiedKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-memory-management-for-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic memory management for modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatic memory management for modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_automemory" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AutoMemory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#string-objects-apis" class="md-nav__link">
    <span class="md-ellipsis">
      String objects APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="String objects APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringprintf" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringPrintf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromstreamid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromStreamID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_retainstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RetainString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_holdstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HoldString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringptrlen" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringPtrLen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtolonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtoulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtodouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtolongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtostreamid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToStreamID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringcompare" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringCompare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringappendbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringAppendBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_trimstringallocation" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_TrimStringAllocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reply-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Reply APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reply APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reply-with-collection-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reply with collection functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_wrongarity" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_WrongArity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitherror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitherrorformat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithErrorFormat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithsimplestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithSimpleString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitharray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithmap" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithattribute" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithAttribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithnullarray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithNullArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithemptyarray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithEmptyArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetarraylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetArrayLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetmaplength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetMapLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetsetlength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetSetLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetattributelength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetAttributeLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithcstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithCString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithemptystring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithEmptyString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithverbatimstringtype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithVerbatimStringType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithverbatimstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithVerbatimString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithnull" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithNull
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithbool" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithBool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithcallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithbignumber" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithBigNumber
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithLongDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands-replication-api" class="md-nav__link">
    <span class="md-ellipsis">
      Commands replication API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Commands replication API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_replicate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Replicate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RedisModule_Replicate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-about-calling-this-function-from-a-thread-safe-context" class="md-nav__link">
    <span class="md-ellipsis">
      Note about calling this function from a thread safe context:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-value" class="md-nav__link">
    <span class="md-ellipsis">
      Return value
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replicateverbatim" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplicateVerbatim
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db-and-key-apis-generic-api" class="md-nav__link">
    <span class="md-ellipsis">
      DB and Key APIs – Generic API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DB and Key APIs – Generic API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientusernamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientUserNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientinfobyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientInfoById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientnamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setclientnamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetClientNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_publishmessage" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PublishMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_publishmessageshard" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PublishMessageShard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getselecteddb" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetSelectedDb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcontextflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetContextFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_avoidreplicatraffic" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AvoidReplicaTraffic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_selectdb" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SelectDb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyexists" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_openkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_OpenKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getopenkeymodesall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetOpenKeyModesAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_closekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CloseKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keytype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_valuelength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ValueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_deletekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DeleteKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unlinkkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnlinkKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getabsexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetAbsExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setabsexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetAbsExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_resetdataset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ResetDataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dbsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DbSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_randomkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RandomKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettokeynamefromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetToKeyNameFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettodbidfromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetToDbIdFromOptCtx
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-string-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for String type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for String type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_stringset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringdma" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringDMA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtruncate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringTruncate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-list-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for List type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for List type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_listpush" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListPush
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listpop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListPop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listinsert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListInsert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListDelete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-sorted-set-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Sorted Set type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Sorted Set type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetincrby" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetIncrby
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrem" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetscore" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetScore
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-sorted-set-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Sorted Set iterator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Sorted Set iterator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangestop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangeendreached" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeEndReached
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetfirstinscorerange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetFirstInScoreRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetlastinscorerange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetLastInScoreRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetfirstinlexrange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetFirstInLexRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetlastinlexrange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetLastInLexRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangecurrentelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeCurrentElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangenext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeNext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangeprev" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangePrev
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-hash-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Hash type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Hash type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_hashset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HashSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_hashget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HashGet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-stream-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Stream type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Stream type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_streamadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratorstart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratorstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratornextid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorNextID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratornextfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorNextField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratordelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamtrimbylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamTrimByLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamtrimbyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamTrimByID
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-redis-commands-from-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Calling Redis commands from modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calling Redis commands from modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_freecallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplytype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyarrayelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyArrayElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyinteger" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyInteger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplydouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplybignumber" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyBigNumber
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyverbatim" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyVerbatim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplybool" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyBool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplysetelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplySetElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplymapelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyMapElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyattribute" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyAttribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyattributeelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyAttributeElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplypromisesetunblockhandler" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyPromiseSetUnblockHandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplypromiseabort" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyPromiseAbort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplystringptr" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyStringPtr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromcallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcontextuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetContextUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_call" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyproto" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyProto
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Modules data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createdatatype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateDataType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypesetvalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeSetValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypegettype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeGetType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypegetvalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeGetValue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rdb-loading-and-saving-functions" class="md-nav__link">
    <span class="md-ellipsis">
      RDB loading and saving functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDB loading and saving functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_isioerror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsIOError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_saveunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savesigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savestringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savedouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savefloat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveFloat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadfloat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadFloat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savelongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadLongDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-digest-api-debug-digest-interface-for-modules-types" class="md-nav__link">
    <span class="md-ellipsis">
      Key digest API (DEBUG DIGEST interface for modules types)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key digest API (DEBUG DIGEST interface for modules types)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_digestaddstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestAddStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_digestaddlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestAddLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_digestendsequence" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestEndSequence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddatatypefromstringencver" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDataTypeFromStringEncver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddatatypefromstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDataTypeFromString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savedatatypetostring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveDataTypeToString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromdigest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromDigest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromdigest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromDigest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aof-api-for-modules-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      AOF API for modules data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AOF API for modules data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_emitaof" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EmitAOF
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-context-handling" class="md-nav__link">
    <span class="md-ellipsis">
      IO context handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO context handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromIO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefrommodulekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromModuleKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfrommodulekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromModuleKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_log" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_logioerror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LogIOError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule__assert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule__Assert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_latencyaddsample" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LatencyAddSample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-clients-from-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Blocking clients from modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blocking clients from modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerauthcallback" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterAuthCallback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonauth" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnAuth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientgetprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientGetPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientsetprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientSetPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonkeys" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnKeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonkeyswithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnKeysWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_signalkeyasready" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SignalKeyAsReady
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unblockclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnblockClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_abortblock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AbortBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setdisconnectcallback" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetDisconnectCallback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_isblockedreplyrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsBlockedReplyRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_isblockedtimeoutrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsBlockedTimeoutRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclientprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclientreadykey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientReadyKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclienthandle" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientHandle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientdisconnected" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientDisconnected
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-safe-contexts" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safe Contexts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thread Safe Contexts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getthreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdetachedthreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDetachedThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freethreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontextlock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextLock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontexttrylock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextTryLock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontextunlock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextUnlock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-keyspace-notifications-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Keyspace Notifications API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Keyspace Notifications API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_subscribetokeyspaceevents" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SubscribeToKeyspaceEvents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_addpostnotificationjob" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AddPostNotificationJob
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getnotifykeyspaceevents" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetNotifyKeyspaceEvents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_notifykeyspaceevent" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_NotifyKeyspaceEvent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-cluster-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Cluster API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Cluster API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerclustermessagereceiver" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterClusterMessageReceiver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_sendclustermessage" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SendClusterMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclusternodeslist" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterNodesList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freeclusternodeslist" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeClusterNodesList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmyclusterid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetMyClusterID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclustersize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclusternodeinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterNodeInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setclusterflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetClusterFlags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-timers-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Timers API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Timers API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createtimer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateTimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stoptimer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StopTimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettimerinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetTimerInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-eventloop-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules EventLoop API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules EventLoop API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopdel" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopDel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopaddoneshot" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopAddOneShot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-acl-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules ACL API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules ACL API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createmoduleuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateModuleUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freemoduleuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeModuleUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleuseracl" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleUserACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleuseraclstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleUserACLString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleuseraclstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleUserACLString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcurrentusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCurrentUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleuserfromusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleUserFromUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckcommandpermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckCommandPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckkeypermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckKeyPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckchannelpermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckChannelPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_acladdlogentry" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLAddLogEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_acladdlogentrybyusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLAddLogEntryByUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_authenticateclientwithuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AuthenticateClientWithUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_authenticateclientwithacluser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AuthenticateClientWithACLUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_deauthenticateandcloseclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DeauthenticateAndCloseClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_redactclientcommandargument" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RedactClientCommandArgument
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientcertificate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientCertificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-dictionary-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Dictionary API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Dictionary API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createdict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freedict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictsetc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSetC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictreplacec" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictReplaceC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictreplace" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictReplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictgetc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictGetC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictdelc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictDelC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictdel" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictDel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstartc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStartC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorreseekc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorReseekC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorreseek" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorReseek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictnextc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictNextC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictprevc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictPrevC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictnext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictNext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictprev" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictPrev
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictcomparec" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictCompareC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictcompare" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictCompare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-info-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Info fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Info fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddsection" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddSection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infobegindictfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoBeginDictField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoenddictfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoEndDictField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldcstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldCString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfielddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerinfofunc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterInfoFunc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getserverinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetServerInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freeserverinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeServerInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfielddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-utility-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Modules utility APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules utility APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getrandombytes" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetRandomBytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getrandomhexchars" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetRandomHexChars
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-api-exporting-importing" class="md-nav__link">
    <span class="md-ellipsis">
      Modules API exporting / importing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules API exporting / importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_exportsharedapi" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ExportSharedAPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getsharedapi" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetSharedAPI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-command-filter-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Command Filter API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Command Filter API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registercommandfilter" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterCommandFilter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unregistercommandfilter" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnregisterCommandFilter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargscount" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgsCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterarginsert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgInsert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargreplace" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgReplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfiltergetclientid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterGetClientId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocusablesize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocUsableSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsizestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSizeString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsizedict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSizeDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getusedmemoryratio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetUsedMemoryRatio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scanning-keyspace-and-hashes" class="md-nav__link">
    <span class="md-ellipsis">
      Scanning keyspace and hashes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scanning keyspace and hashes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursorcreate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorCreate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursorrestart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorRestart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursordestroy" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorDestroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scan" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scankey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-fork-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module fork API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module fork API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_fork" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Fork
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_sendchildheartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SendChildHeartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_exitfromchild" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ExitFromChild
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_killforkchild" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KillForkChild
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-hooks-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Server hooks implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Server hooks implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_subscribetoserverevent" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SubscribeToServerEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_issubeventsupported" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsSubEventSupported
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-configurations-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Configurations API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Configurations API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerstringconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterStringConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerboolconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterBoolConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerenumconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterEnumConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registernumericconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterNumericConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadconfigs" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadConfigs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rdb-loadsave-api" class="md-nav__link">
    <span class="md-ellipsis">
      RDB load/save API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDB load/save API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbstreamcreatefromfile" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbStreamCreateFromFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbstreamfree" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbStreamFree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbload" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbLoad
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbsave" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbSave
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-eviction-api" class="md-nav__link">
    <span class="md-ellipsis">
      Key eviction API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key eviction API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_setlru" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetLRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getlru" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetLRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setlfu" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetLFU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getlfu" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetLFU
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleoptionsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleOptionsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcontextflagsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetContextFlagsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeyspacenotificationflagsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyspaceNotificationFlagsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getserverversion" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetServerVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettypemethodversion" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetTypeMethodVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypereplacevalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeReplaceValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommandkeyswithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommandKeysWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommandkeys" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommandKeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcurrentcommandname" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCurrentCommandName
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defrag-api" class="md-nav__link">
    <span class="md-ellipsis">
      Defrag API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Defrag API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerdefragfunc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterDefragFunc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragshouldstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragShouldStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragcursorset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragCursorSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragcursorget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragCursorGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragAlloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragredismodulestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragRedisModuleString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromdefragctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromDefragCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromdefragctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromDefragCtx
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-index" class="md-nav__link">
    <span class="md-ellipsis">
      Function index
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../modules-blocking-ops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis modules and blocking commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../modules-native-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules API for native types
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sections" class="md-nav__link">
    <span class="md-ellipsis">
      Sections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#heap-allocation-raw-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Heap allocation raw functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Heap allocation raw functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_alloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Alloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_tryalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_TryAlloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_calloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Calloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_realloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Realloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_free" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Free
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_strdup" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Strdup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_poolalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PoolAlloc
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands-api" class="md-nav__link">
    <span class="md-ellipsis">
      Commands API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Commands API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_iskeyspositionrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsKeysPositionRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyatposwithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyAtPosWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyatpos" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyAtPos
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_ischannelspositionrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsChannelsPositionRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_channelatposwithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ChannelAtPosWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateCommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createsubcommand" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateSubcommand
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcommandaclcategories" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetCommandACLCategories
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcommandinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetCommandInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-information-and-time-measurement" class="md-nav__link">
    <span class="md-ellipsis">
      Module information and time measurement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module information and time measurement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_ismodulenamebusy" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsModuleNameBusy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_milliseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Milliseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_monotonicmicroseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MonotonicMicroseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_microseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Microseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_cachedmicroseconds" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CachedMicroseconds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientmeasuretimestart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientMeasureTimeStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientmeasuretimeend" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientMeasureTimeEnd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_yield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Yield
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleoptions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleOptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_signalmodifiedkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SignalModifiedKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-memory-management-for-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic memory management for modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automatic memory management for modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_automemory" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AutoMemory
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#string-objects-apis" class="md-nav__link">
    <span class="md-ellipsis">
      String objects APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="String objects APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringprintf" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringPrintf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromstreamid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromStreamID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_retainstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RetainString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_holdstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HoldString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringptrlen" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringPtrLen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtolonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtoulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtodouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtolongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtostreamid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringToStreamID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringcompare" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringCompare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringappendbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringAppendBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_trimstringallocation" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_TrimStringAllocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reply-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Reply APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reply APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reply-with-collection-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Reply with collection functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_wrongarity" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_WrongArity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitherror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitherrorformat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithErrorFormat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithsimplestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithSimpleString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywitharray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithmap" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithMap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithattribute" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithAttribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithnullarray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithNullArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithemptyarray" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithEmptyArray
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetarraylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetArrayLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetmaplength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetMapLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetsetlength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetSetLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replysetattributelength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplySetAttributeLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithcstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithCString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithemptystring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithEmptyString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithverbatimstringtype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithVerbatimStringType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithverbatimstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithVerbatimString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithnull" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithNull
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithbool" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithBool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithcallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithbignumber" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithBigNumber
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replywithlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplyWithLongDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands-replication-api" class="md-nav__link">
    <span class="md-ellipsis">
      Commands replication API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Commands replication API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_replicate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Replicate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RedisModule_Replicate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-about-calling-this-function-from-a-thread-safe-context" class="md-nav__link">
    <span class="md-ellipsis">
      Note about calling this function from a thread safe context:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-value" class="md-nav__link">
    <span class="md-ellipsis">
      Return value
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_replicateverbatim" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ReplicateVerbatim
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#db-and-key-apis-generic-api" class="md-nav__link">
    <span class="md-ellipsis">
      DB and Key APIs – Generic API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DB and Key APIs – Generic API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientusernamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientUserNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientinfobyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientInfoById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientnamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setclientnamebyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetClientNameById
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_publishmessage" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PublishMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_publishmessageshard" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_PublishMessageShard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getselecteddb" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetSelectedDb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcontextflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetContextFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_avoidreplicatraffic" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AvoidReplicaTraffic
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_selectdb" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SelectDb
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keyexists" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_openkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_OpenKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getopenkeymodesall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetOpenKeyModesAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_closekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CloseKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_keytype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KeyType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_valuelength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ValueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_deletekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DeleteKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unlinkkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnlinkKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getabsexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetAbsExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setabsexpire" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetAbsExpire
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_resetdataset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ResetDataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dbsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DbSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_randomkey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RandomKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettokeynamefromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetToKeyNameFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromOptCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettodbidfromoptctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetToDbIdFromOptCtx
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-string-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for String type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for String type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_stringset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringdma" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringDMA
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stringtruncate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StringTruncate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-list-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for List type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for List type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_listpush" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListPush
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listpop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListPop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listinsert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListInsert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_listdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ListDelete
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-sorted-set-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Sorted Set type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Sorted Set type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetincrby" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetIncrby
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrem" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetscore" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetScore
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-sorted-set-iterator" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Sorted Set iterator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Sorted Set iterator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangestop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangeendreached" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeEndReached
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetfirstinscorerange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetFirstInScoreRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetlastinscorerange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetLastInScoreRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetfirstinlexrange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetFirstInLexRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetlastinlexrange" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetLastInLexRange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangecurrentelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeCurrentElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangenext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangeNext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_zsetrangeprev" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ZsetRangePrev
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-hash-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Hash type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Hash type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_hashset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HashSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_hashget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_HashGet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-api-for-stream-type" class="md-nav__link">
    <span class="md-ellipsis">
      Key API for Stream type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key API for Stream type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_streamadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratorstart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratorstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratornextid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorNextID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratornextfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorNextField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamiteratordelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamIteratorDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamtrimbylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamTrimByLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_streamtrimbyid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StreamTrimByID
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-redis-commands-from-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Calling Redis commands from modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calling Redis commands from modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_freecallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplytype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplylength" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyarrayelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyArrayElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyinteger" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyInteger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplydouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplybignumber" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyBigNumber
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyverbatim" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyVerbatim
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplybool" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyBool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplysetelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplySetElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplymapelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyMapElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyattribute" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyAttribute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyattributeelement" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyAttributeElement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplypromisesetunblockhandler" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyPromiseSetUnblockHandler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplypromiseabort" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyPromiseAbort
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplystringptr" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyStringPtr
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_createstringfromcallreply" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateStringFromCallReply
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setcontextuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetContextUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_call" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_callreplyproto" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CallReplyProto
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      Modules data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createdatatype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateDataType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypesetvalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeSetValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypegettype" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeGetType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypegetvalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeGetValue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rdb-loading-and-saving-functions" class="md-nav__link">
    <span class="md-ellipsis">
      RDB loading and saving functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDB loading and saving functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_isioerror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsIOError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_saveunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savesigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savestringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savedouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savefloat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveFloat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadfloat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadFloat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savelongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveLongDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadlongdouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadLongDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-digest-api-debug-digest-interface-for-modules-types" class="md-nav__link">
    <span class="md-ellipsis">
      Key digest API (DEBUG DIGEST interface for modules types)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key digest API (DEBUG DIGEST interface for modules types)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_digestaddstringbuffer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestAddStringBuffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_digestaddlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestAddLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_digestendsequence" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DigestEndSequence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddatatypefromstringencver" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDataTypeFromStringEncver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loaddatatypefromstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadDataTypeFromString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_savedatatypetostring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SaveDataTypeToString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromdigest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromDigest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromdigest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromDigest
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aof-api-for-modules-data-types" class="md-nav__link">
    <span class="md-ellipsis">
      AOF API for modules data types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AOF API for modules data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_emitaof" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EmitAOF
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-context-handling" class="md-nav__link">
    <span class="md-ellipsis">
      IO context handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO context handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromIO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefrommodulekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromModuleKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfrommodulekey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromModuleKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromIO
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_log" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_logioerror" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LogIOError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule__assert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule__Assert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_latencyaddsample" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LatencyAddSample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocking-clients-from-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Blocking clients from modules
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Blocking clients from modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerauthcallback" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterAuthCallback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonauth" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnAuth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientgetprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientGetPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientsetprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientSetPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonkeys" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnKeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockclientonkeyswithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockClientOnKeysWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_signalkeyasready" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SignalKeyAsReady
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unblockclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnblockClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_abortblock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AbortBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setdisconnectcallback" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetDisconnectCallback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_isblockedreplyrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsBlockedReplyRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_isblockedtimeoutrequest" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsBlockedTimeoutRequest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclientprivatedata" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientPrivateData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclientreadykey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientReadyKey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getblockedclienthandle" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetBlockedClientHandle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_blockedclientdisconnected" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_BlockedClientDisconnected
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-safe-contexts" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Safe Contexts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Thread Safe Contexts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getthreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdetachedthreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDetachedThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freethreadsafecontext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeThreadSafeContext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontextlock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextLock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontexttrylock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextTryLock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_threadsafecontextunlock" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ThreadSafeContextUnlock
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-keyspace-notifications-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Keyspace Notifications API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Keyspace Notifications API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_subscribetokeyspaceevents" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SubscribeToKeyspaceEvents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_addpostnotificationjob" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AddPostNotificationJob
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getnotifykeyspaceevents" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetNotifyKeyspaceEvents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_notifykeyspaceevent" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_NotifyKeyspaceEvent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-cluster-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Cluster API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Cluster API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerclustermessagereceiver" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterClusterMessageReceiver
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_sendclustermessage" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SendClusterMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclusternodeslist" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterNodesList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freeclusternodeslist" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeClusterNodesList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmyclusterid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetMyClusterID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclustersize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclusternodeinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClusterNodeInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setclusterflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetClusterFlags
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-timers-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Timers API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Timers API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createtimer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateTimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_stoptimer" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_StopTimer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettimerinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetTimerInfo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-eventloop-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules EventLoop API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules EventLoop API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopadd" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopAdd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopdel" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopDel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_eventloopaddoneshot" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_EventLoopAddOneShot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-acl-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules ACL API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules ACL API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createmoduleuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateModuleUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freemoduleuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeModuleUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleuseracl" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleUserACL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setmoduleuseraclstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetModuleUserACLString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleuseraclstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleUserACLString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcurrentusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCurrentUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleuserfromusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleUserFromUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckcommandpermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckCommandPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckkeypermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckKeyPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_aclcheckchannelpermissions" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLCheckChannelPermissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_acladdlogentry" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLAddLogEntry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_acladdlogentrybyusername" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ACLAddLogEntryByUserName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_authenticateclientwithuser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AuthenticateClientWithUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_authenticateclientwithacluser" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_AuthenticateClientWithACLUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_deauthenticateandcloseclient" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DeauthenticateAndCloseClient
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_redactclientcommandargument" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RedactClientCommandArgument
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getclientcertificate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetClientCertificate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-dictionary-api" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Dictionary API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Dictionary API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_createdict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CreateDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freedict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictsetc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSetC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictreplacec" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictReplaceC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictreplace" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictReplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictgetc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictGetC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictdelc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictDelC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictdel" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictDel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstartc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStartC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorreseekc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorReseekC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictiteratorreseek" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictIteratorReseek
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictnextc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictNextC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictprevc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictPrevC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictnext" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictNext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictprev" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictPrev
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictcomparec" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictCompareC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_dictcompare" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DictCompare
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-info-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Modules Info fields
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules Info fields">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddsection" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddSection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infobegindictfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoBeginDictField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoenddictfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoEndDictField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldcstring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldCString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfielddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldDouble
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldlonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldLongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_infoaddfieldulonglong" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_InfoAddFieldULongLong
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerinfofunc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterInfoFunc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getserverinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetServerInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_freeserverinfo" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_FreeServerInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfield" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetField
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldSigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfieldunsigned" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldUnsigned
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_serverinfogetfielddouble" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ServerInfoGetFieldDouble
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-utility-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Modules utility APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules utility APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getrandombytes" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetRandomBytes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getrandomhexchars" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetRandomHexChars
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-api-exporting-importing" class="md-nav__link">
    <span class="md-ellipsis">
      Modules API exporting / importing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modules API exporting / importing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_exportsharedapi" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ExportSharedAPI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getsharedapi" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetSharedAPI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-command-filter-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Command Filter API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Command Filter API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registercommandfilter" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterCommandFilter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_unregistercommandfilter" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_UnregisterCommandFilter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargscount" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgsCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterarginsert" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgInsert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargreplace" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgReplace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfilterargdelete" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterArgDelete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_commandfiltergetclientid" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_CommandFilterGetClientId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocusablesize" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocUsableSize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsizestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSizeString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_mallocsizedict" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_MallocSizeDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getusedmemoryratio" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetUsedMemoryRatio
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scanning-keyspace-and-hashes" class="md-nav__link">
    <span class="md-ellipsis">
      Scanning keyspace and hashes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scanning keyspace and hashes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursorcreate" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorCreate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursorrestart" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorRestart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scancursordestroy" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanCursorDestroy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scan" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Scan
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_scankey" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ScanKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-fork-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module fork API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module fork API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_fork" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_Fork
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_sendchildheartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SendChildHeartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_exitfromchild" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ExitFromChild
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_killforkchild" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_KillForkChild
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-hooks-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Server hooks implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Server hooks implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_subscribetoserverevent" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SubscribeToServerEvent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_issubeventsupported" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_IsSubEventSupported
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-configurations-api" class="md-nav__link">
    <span class="md-ellipsis">
      Module Configurations API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Module Configurations API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerstringconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterStringConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerboolconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterBoolConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registerenumconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterEnumConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_registernumericconfig" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterNumericConfig
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_loadconfigs" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_LoadConfigs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rdb-loadsave-api" class="md-nav__link">
    <span class="md-ellipsis">
      RDB load/save API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDB load/save API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbstreamcreatefromfile" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbStreamCreateFromFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbstreamfree" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbStreamFree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbload" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbLoad
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_rdbsave" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RdbSave
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-eviction-api" class="md-nav__link">
    <span class="md-ellipsis">
      Key eviction API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key eviction API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_setlru" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetLRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getlru" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetLRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_setlfu" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_SetLFU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getlfu" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetLFU
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Miscellaneous APIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous APIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_getmoduleoptionsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetModuleOptionsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcontextflagsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetContextFlagsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeyspacenotificationflagsall" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyspaceNotificationFlagsAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getserverversion" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetServerVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_gettypemethodversion" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetTypeMethodVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_moduletypereplacevalue" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_ModuleTypeReplaceValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommandkeyswithflags" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommandKeysWithFlags
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcommandkeys" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCommandKeys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getcurrentcommandname" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetCurrentCommandName
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defrag-api" class="md-nav__link">
    <span class="md-ellipsis">
      Defrag API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Defrag API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redismodule_registerdefragfunc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_RegisterDefragFunc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragshouldstop" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragShouldStop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragcursorset" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragCursorSet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragcursorget" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragCursorGet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragalloc" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragAlloc
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_defragredismodulestring" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_DefragRedisModuleString
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getkeynamefromdefragctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetKeyNameFromDefragCtx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redismodule_getdbidfromdefragctx" class="md-nav__link">
    <span class="md-ellipsis">
      RedisModule_GetDbIdFromDefragCtx
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-index" class="md-nav__link">
    <span class="md-ellipsis">
      Function index
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/EanYang7/redis-doc/tree/main/docs/8-reference/modules/modules-api-ref.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/EanYang7/redis-doc/tree/main/docs/8-reference/modules/modules-api-ref.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


  <h1>Modules API reference</h1>

<!-- This file is generated from module.c using
     utils/generate-module-api-doc.rb -->

<h2 id="sections">Sections<a class="headerlink" href="#sections" title="Permanent link">⚓︎</a></h2>
<ul>
<li><a href="#section-heap-allocation-raw-functions">Heap allocation raw functions</a></li>
<li><a href="#section-commands-api">Commands API</a></li>
<li><a href="#section-module-information-and-time-measurement">Module information and time measurement</a></li>
<li><a href="#section-automatic-memory-management-for-modules">Automatic memory management for modules</a></li>
<li><a href="#section-string-objects-apis">String objects APIs</a></li>
<li><a href="#section-reply-apis">Reply APIs</a></li>
<li><a href="#section-commands-replication-api">Commands replication API</a></li>
<li><a href="#section-db-and-key-apis-generic-api">DB and Key APIs – Generic API</a></li>
<li><a href="#section-key-api-for-string-type">Key API for String type</a></li>
<li><a href="#section-key-api-for-list-type">Key API for List type</a></li>
<li><a href="#section-key-api-for-sorted-set-type">Key API for Sorted Set type</a></li>
<li><a href="#section-key-api-for-sorted-set-iterator">Key API for Sorted Set iterator</a></li>
<li><a href="#section-key-api-for-hash-type">Key API for Hash type</a></li>
<li><a href="#section-key-api-for-stream-type">Key API for Stream type</a></li>
<li><a href="#section-calling-redis-commands-from-modules">Calling Redis commands from modules</a></li>
<li><a href="#section-modules-data-types">Modules data types</a></li>
<li><a href="#section-rdb-loading-and-saving-functions">RDB loading and saving functions</a></li>
<li><a href="#section-key-digest-api-debug-digest-interface-for-modules-types">Key digest API (DEBUG DIGEST interface for modules types)</a></li>
<li><a href="#section-aof-api-for-modules-data-types">AOF API for modules data types</a></li>
<li><a href="#section-io-context-handling">IO context handling</a></li>
<li><a href="#section-logging">Logging</a></li>
<li><a href="#section-blocking-clients-from-modules">Blocking clients from modules</a></li>
<li><a href="#section-thread-safe-contexts">Thread Safe Contexts</a></li>
<li><a href="#section-module-keyspace-notifications-api">Module Keyspace Notifications API</a></li>
<li><a href="#section-modules-cluster-api">Modules Cluster API</a></li>
<li><a href="#section-modules-timers-api">Modules Timers API</a></li>
<li><a href="#section-modules-eventloop-api">Modules EventLoop API</a></li>
<li><a href="#section-modules-acl-api">Modules ACL API</a></li>
<li><a href="#section-modules-dictionary-api">Modules Dictionary API</a></li>
<li><a href="#section-modules-info-fields">Modules Info fields</a></li>
<li><a href="#section-modules-utility-apis">Modules utility APIs</a></li>
<li><a href="#section-modules-api-exporting-importing">Modules API exporting / importing</a></li>
<li><a href="#section-module-command-filter-api">Module Command Filter API</a></li>
<li><a href="#section-scanning-keyspace-and-hashes">Scanning keyspace and hashes</a></li>
<li><a href="#section-module-fork-api">Module fork API</a></li>
<li><a href="#section-server-hooks-implementation">Server hooks implementation</a></li>
<li><a href="#section-module-configurations-api">Module Configurations API</a></li>
<li><a href="#section-rdb-load-save-api">RDB load/save API</a></li>
<li><a href="#section-key-eviction-api">Key eviction API</a></li>
<li><a href="#section-miscellaneous-apis">Miscellaneous APIs</a></li>
<li><a href="#section-defrag-api">Defrag API</a></li>
<li><a href="#section-function-index">Function index</a></li>
</ul>
<p><span id="section-heap-allocation-raw-functions"></span></p>
<h2 id="heap-allocation-raw-functions">Heap allocation raw functions<a class="headerlink" href="#heap-allocation-raw-functions" title="Permanent link">⚓︎</a></h2>
<p>Memory allocated with these functions are taken into account by Redis key
eviction algorithms and are reported in Redis memory usage information.</p>
<p><span id="RedisModule_Alloc"></span></p>
<h3 id="redismodule_alloc"><code>RedisModule_Alloc</code><a class="headerlink" href="#redismodule_alloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_Alloc(size_t bytes);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Use like <code>malloc()</code>. Memory allocated with this function is reported in
Redis INFO memory, used for keys eviction according to maxmemory settings
and in general is taken into account as memory allocated by Redis.
You should avoid using <code>malloc()</code>.
This function panics if unable to allocate enough memory.</p>
<p><span id="RedisModule_TryAlloc"></span></p>
<h3 id="redismodule_tryalloc"><code>RedisModule_TryAlloc</code><a class="headerlink" href="#redismodule_tryalloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_TryAlloc(size_t bytes);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Similar to <a href="#RedisModule_Alloc"><code>RedisModule_Alloc</code></a>, but returns NULL in case of allocation failure, instead
of panicking.</p>
<p><span id="RedisModule_Calloc"></span></p>
<h3 id="redismodule_calloc"><code>RedisModule_Calloc</code><a class="headerlink" href="#redismodule_calloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_Calloc(size_t nmemb, size_t size);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Use like <code>calloc()</code>. Memory allocated with this function is reported in
Redis INFO memory, used for keys eviction according to maxmemory settings
and in general is taken into account as memory allocated by Redis.
You should avoid using <code>calloc()</code> directly.</p>
<p><span id="RedisModule_Realloc"></span></p>
<h3 id="redismodule_realloc"><code>RedisModule_Realloc</code><a class="headerlink" href="#redismodule_realloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void* RedisModule_Realloc(void *ptr, size_t bytes);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Use like <code>realloc()</code> for memory obtained with <a href="#RedisModule_Alloc"><code>RedisModule_Alloc()</code></a>.</p>
<p><span id="RedisModule_Free"></span></p>
<h3 id="redismodule_free"><code>RedisModule_Free</code><a class="headerlink" href="#redismodule_free" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_Free(void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Use like <code>free()</code> for memory obtained by <a href="#RedisModule_Alloc"><code>RedisModule_Alloc()</code></a> and
<a href="#RedisModule_Realloc"><code>RedisModule_Realloc()</code></a>. However you should never try to free with
<a href="#RedisModule_Free"><code>RedisModule_Free()</code></a> memory allocated with <code>malloc()</code> inside your module.</p>
<p><span id="RedisModule_Strdup"></span></p>
<h3 id="redismodule_strdup"><code>RedisModule_Strdup</code><a class="headerlink" href="#redismodule_strdup" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>char *RedisModule_Strdup(const char *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <code>strdup()</code> but returns memory allocated with <a href="#RedisModule_Alloc"><code>RedisModule_Alloc()</code></a>.</p>
<p><span id="RedisModule_PoolAlloc"></span></p>
<h3 id="redismodule_poolalloc"><code>RedisModule_PoolAlloc</code><a class="headerlink" href="#redismodule_poolalloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_PoolAlloc(RedisModuleCtx *ctx, size_t bytes);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return heap allocated memory that will be freed automatically when the
module callback function returns. Mostly suitable for small allocations
that are short living and must be released when the callback returns
anyway. The returned memory is aligned to the architecture word size
if at least word size bytes are requested, otherwise it is just
aligned to the next power of two, so for example a 3 bytes request is
4 bytes aligned while a 2 bytes request is 2 bytes aligned.</p>
<p>There is no realloc style function since when this is needed to use the
pool allocator is not a good idea.</p>
<p>The function returns NULL if <code>bytes</code> is 0.</p>
<p><span id="section-commands-api"></span></p>
<h2 id="commands-api">Commands API<a class="headerlink" href="#commands-api" title="Permanent link">⚓︎</a></h2>
<p>These functions are used to implement custom Redis commands.</p>
<p>For examples, see <a href="https://redis.io/topics/modules-intro">https://redis.io/topics/modules-intro</a>.</p>
<p><span id="RedisModule_IsKeysPositionRequest"></span></p>
<h3 id="redismodule_iskeyspositionrequest"><code>RedisModule_IsKeysPositionRequest</code><a class="headerlink" href="#redismodule_iskeyspositionrequest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsKeysPositionRequest(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return non-zero if a module command, that was declared with the
flag "getkeys-api", is called in a special way to get the keys positions
and not to get executed. Otherwise zero is returned.</p>
<p><span id="RedisModule_KeyAtPosWithFlags"></span></p>
<h3 id="redismodule_keyatposwithflags"><code>RedisModule_KeyAtPosWithFlags</code><a class="headerlink" href="#redismodule_keyatposwithflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_KeyAtPosWithFlags(RedisModuleCtx *ctx, int pos, int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>When a module command is called in order to obtain the position of
keys, since it was flagged as "getkeys-api" during the registration,
the command implementation checks for this special call using the
<a href="#RedisModule_IsKeysPositionRequest"><code>RedisModule_IsKeysPositionRequest()</code></a> API and uses this function in
order to report keys.</p>
<p>The supported flags are the ones used by <a href="#RedisModule_SetCommandInfo"><code>RedisModule_SetCommandInfo</code></a>, see <code>REDISMODULE_CMD_KEY_</code>*.</p>
<p>The following is an example of how it could be used:</p>
<div class="highlight"><pre><span></span><code>if (RedisModule_IsKeysPositionRequest(ctx)) {
    RedisModule_KeyAtPosWithFlags(ctx, 2, REDISMODULE_CMD_KEY_RO | REDISMODULE_CMD_KEY_ACCESS);
    RedisModule_KeyAtPosWithFlags(ctx, 1, REDISMODULE_CMD_KEY_RW | REDISMODULE_CMD_KEY_UPDATE | REDISMODULE_CMD_KEY_ACCESS);
}
</code></pre></div>
<p>Note: in the example above the get keys API could have been handled by key-specs (preferred).
 Implementing the getkeys-api is required only when is it not possible to declare key-specs that cover all keys.</p>
<p><span id="RedisModule_KeyAtPos"></span></p>
<h3 id="redismodule_keyatpos"><code>RedisModule_KeyAtPos</code><a class="headerlink" href="#redismodule_keyatpos" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_KeyAtPos(RedisModuleCtx *ctx, int pos);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>This API existed before <a href="#RedisModule_KeyAtPosWithFlags"><code>RedisModule_KeyAtPosWithFlags</code></a> was added, now deprecated and
can be used for compatibility with older versions, before key-specs and flags
were introduced.</p>
<p><span id="RedisModule_IsChannelsPositionRequest"></span></p>
<h3 id="redismodule_ischannelspositionrequest"><code>RedisModule_IsChannelsPositionRequest</code><a class="headerlink" href="#redismodule_ischannelspositionrequest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsChannelsPositionRequest(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return non-zero if a module command, that was declared with the
flag "getchannels-api", is called in a special way to get the channel positions
and not to get executed. Otherwise zero is returned.</p>
<p><span id="RedisModule_ChannelAtPosWithFlags"></span></p>
<h3 id="redismodule_channelatposwithflags"><code>RedisModule_ChannelAtPosWithFlags</code><a class="headerlink" href="#redismodule_channelatposwithflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ChannelAtPosWithFlags(RedisModuleCtx *ctx,
                                       int pos,
                                       int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>When a module command is called in order to obtain the position of
channels, since it was flagged as "getchannels-api" during the
registration, the command implementation checks for this special call
using the <a href="#RedisModule_IsChannelsPositionRequest"><code>RedisModule_IsChannelsPositionRequest()</code></a> API and uses this
function in order to report the channels.</p>
<p>The supported flags are:
* <code>REDISMODULE_CMD_CHANNEL_SUBSCRIBE</code>: This command will subscribe to the channel.
* <code>REDISMODULE_CMD_CHANNEL_UNSUBSCRIBE</code>: This command will unsubscribe from this channel.
* <code>REDISMODULE_CMD_CHANNEL_PUBLISH</code>: This command will publish to this channel.
* <code>REDISMODULE_CMD_CHANNEL_PATTERN</code>: Instead of acting on a specific channel, will act on any 
                                   channel specified by the pattern. This is the same access
                                   used by the PSUBSCRIBE and PUNSUBSCRIBE commands available 
                                   in Redis. Not intended to be used with PUBLISH permissions.</p>
<p>The following is an example of how it could be used:</p>
<div class="highlight"><pre><span></span><code>if (RedisModule_IsChannelsPositionRequest(ctx)) {
    RedisModule_ChannelAtPosWithFlags(ctx, 1, REDISMODULE_CMD_CHANNEL_SUBSCRIBE | REDISMODULE_CMD_CHANNEL_PATTERN);
    RedisModule_ChannelAtPosWithFlags(ctx, 1, REDISMODULE_CMD_CHANNEL_PUBLISH);
}
</code></pre></div>
<p>Note: One usage of declaring channels is for evaluating ACL permissions. In this context,
unsubscribing is always allowed, so commands will only be checked against subscribe and
publish permissions. This is preferred over using <a href="#RedisModule_ACLCheckChannelPermissions"><code>RedisModule_ACLCheckChannelPermissions</code></a>, since
it allows the ACLs to be checked before the command is executed.</p>
<p><span id="RedisModule_CreateCommand"></span></p>
<h3 id="redismodule_createcommand"><code>RedisModule_CreateCommand</code><a class="headerlink" href="#redismodule_createcommand" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CreateCommand(RedisModuleCtx *ctx,
                              const char *name,
                              RedisModuleCmdFunc cmdfunc,
                              const char *strflags,
                              int firstkey,
                              int lastkey,
                              int keystep);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Register a new command in the Redis server, that will be handled by
calling the function pointer 'cmdfunc' using the RedisModule calling
convention.</p>
<p>The function returns <code>REDISMODULE_ERR</code> in these cases:
- If creation of module command is called outside the <code>RedisModule_OnLoad</code>.
- The specified command is already busy.
- The command name contains some chars that are not allowed.
- A set of invalid flags were passed.</p>
<p>Otherwise <code>REDISMODULE_OK</code> is returned and the new command is registered.</p>
<p>This function must be called during the initialization of the module
inside the <code>RedisModule_OnLoad()</code> function. Calling this function outside
of the initialization function is not defined.</p>
<p>The command function type is the following:</p>
<div class="highlight"><pre><span></span><code> int MyCommand_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, int argc);
</code></pre></div>
<p>And is supposed to always return <code>REDISMODULE_OK</code>.</p>
<p>The set of flags 'strflags' specify the behavior of the command, and should
be passed as a C string composed of space separated words, like for
example "write deny-oom". The set of flags are:</p>
<ul>
<li><strong>"write"</strong>:     The command may modify the data set (it may also read
                   from it).</li>
<li><strong>"readonly"</strong>:  The command returns data from keys but never writes.</li>
<li><strong>"admin"</strong>:     The command is an administrative command (may change
                   replication or perform similar tasks).</li>
<li><strong>"deny-oom"</strong>:  The command may use additional memory and should be
                   denied during out of memory conditions.</li>
<li><strong>"deny-script"</strong>:   Don't allow this command in Lua scripts.</li>
<li><strong>"allow-loading"</strong>: Allow this command while the server is loading data.
                       Only commands not interacting with the data set
                       should be allowed to run in this mode. If not sure
                       don't use this flag.</li>
<li><strong>"pubsub"</strong>:    The command publishes things on Pub/Sub channels.</li>
<li><strong>"random"</strong>:    The command may have different outputs even starting
                   from the same input arguments and key values.
                   Starting from Redis 7.0 this flag has been deprecated.
                   Declaring a command as "random" can be done using
                   command tips, see https://redis.io/topics/command-tips.</li>
<li><strong>"allow-stale"</strong>: The command is allowed to run on slaves that don't
                     serve stale data. Don't use if you don't know what
                     this means.</li>
<li><strong>"no-monitor"</strong>: Don't propagate the command on monitor. Use this if
                    the command has sensitive data among the arguments.</li>
<li><strong>"no-slowlog"</strong>: Don't log this command in the slowlog. Use this if
                    the command has sensitive data among the arguments.</li>
<li><strong>"fast"</strong>:      The command time complexity is not greater
                   than O(log(N)) where N is the size of the collection or
                   anything else representing the normal scalability
                   issue with the command.</li>
<li><strong>"getkeys-api"</strong>: The command implements the interface to return
                     the arguments that are keys. Used when start/stop/step
                     is not enough because of the command syntax.</li>
<li><strong>"no-cluster"</strong>: The command should not register in Redis Cluster
                    since is not designed to work with it because, for
                    example, is unable to report the position of the
                    keys, programmatically creates key names, or any
                    other reason.</li>
<li><strong>"no-auth"</strong>:    This command can be run by an un-authenticated client.
                    Normally this is used by a command that is used
                    to authenticate a client.</li>
<li><strong>"may-replicate"</strong>: This command may generate replication traffic, even
                       though it's not a write command.</li>
<li><strong>"no-mandatory-keys"</strong>: All the keys this command may take are optional</li>
<li><strong>"blocking"</strong>: The command has the potential to block the client.</li>
<li><strong>"allow-busy"</strong>: Permit the command while the server is blocked either by
                    a script or by a slow module command, see
                    RedisModule_Yield.</li>
<li><strong>"getchannels-api"</strong>: The command implements the interface to return
                         the arguments that are channels.</li>
</ul>
<p>The last three parameters specify which arguments of the new command are
Redis keys. See <a href="https://redis.io/commands/command">https://redis.io/commands/command</a> for more information.</p>
<ul>
<li><code>firstkey</code>: One-based index of the first argument that's a key.
              Position 0 is always the command name itself.
              0 for commands with no keys.</li>
<li><code>lastkey</code>:  One-based index of the last argument that's a key.
              Negative numbers refer to counting backwards from the last
              argument (-1 means the last argument provided)
              0 for commands with no keys.</li>
<li><code>keystep</code>:  Step between first and last key indexes.
              0 for commands with no keys.</li>
</ul>
<p>This information is used by ACL, Cluster and the <code>COMMAND</code> command.</p>
<p>NOTE: The scheme described above serves a limited purpose and can
only be used to find keys that exist at constant indices.
For non-trivial key arguments, you may pass 0,0,0 and use
<a href="#RedisModule_SetCommandInfo"><code>RedisModule_SetCommandInfo</code></a> to set key specs using a more advanced scheme and use
<a href="#RedisModule_SetCommandACLCategories"><code>RedisModule_SetCommandACLCategories</code></a> to set Redis ACL categories of the commands.</p>
<p><span id="RedisModule_GetCommand"></span></p>
<h3 id="redismodule_getcommand"><code>RedisModule_GetCommand</code><a class="headerlink" href="#redismodule_getcommand" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCommand *RedisModule_GetCommand(RedisModuleCtx *ctx,
                                           const char *name);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Get an opaque structure, representing a module command, by command name.
This structure is used in some of the command-related APIs.</p>
<p>NULL is returned in case of the following errors:</p>
<ul>
<li>Command not found</li>
<li>The command is not a module command</li>
<li>The command doesn't belong to the calling module</li>
</ul>
<p><span id="RedisModule_CreateSubcommand"></span></p>
<h3 id="redismodule_createsubcommand"><code>RedisModule_CreateSubcommand</code><a class="headerlink" href="#redismodule_createsubcommand" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CreateSubcommand(RedisModuleCommand *parent,
                                 const char *name,
                                 RedisModuleCmdFunc cmdfunc,
                                 const char *strflags,
                                 int firstkey,
                                 int lastkey,
                                 int keystep);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Very similar to <a href="#RedisModule_CreateCommand"><code>RedisModule_CreateCommand</code></a> except that it is used to create
a subcommand, associated with another, container, command.</p>
<p>Example: If a module has a configuration command, MODULE.CONFIG, then
GET and SET should be individual subcommands, while MODULE.CONFIG is
a command, but should not be registered with a valid <code>funcptr</code>:</p>
<div class="highlight"><pre><span></span><code> if (RedisModule_CreateCommand(ctx,&quot;module.config&quot;,NULL,&quot;&quot;,0,0,0) == REDISMODULE_ERR)
     return REDISMODULE_ERR;

 RedisModuleCommand *parent = RedisModule_GetCommand(ctx,,&quot;module.config&quot;);

 if (RedisModule_CreateSubcommand(parent,&quot;set&quot;,cmd_config_set,&quot;&quot;,0,0,0) == REDISMODULE_ERR)
    return REDISMODULE_ERR;

 if (RedisModule_CreateSubcommand(parent,&quot;get&quot;,cmd_config_get,&quot;&quot;,0,0,0) == REDISMODULE_ERR)
    return REDISMODULE_ERR;
</code></pre></div>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> in case of the following errors:</p>
<ul>
<li>Error while parsing <code>strflags</code></li>
<li>Command is marked as <code>no-cluster</code> but cluster mode is enabled</li>
<li><code>parent</code> is already a subcommand (we do not allow more than one level of command nesting)</li>
<li><code>parent</code> is a command with an implementation (<code>RedisModuleCmdFunc</code>) (A parent command should be a pure container of subcommands)</li>
<li><code>parent</code> already has a subcommand called <code>name</code></li>
<li>Creating a subcommand is called outside of <code>RedisModule_OnLoad</code>.</li>
</ul>
<p><span id="RedisModule_SetCommandACLCategories"></span></p>
<h3 id="redismodule_setcommandaclcategories"><code>RedisModule_SetCommandACLCategories</code><a class="headerlink" href="#redismodule_setcommandaclcategories" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetCommandACLCategories(RedisModuleCommand *command,
                                        const char *aclflags);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p><a href="#RedisModule_SetCommandACLCategories"><code>RedisModule_SetCommandACLCategories</code></a> can be used to set ACL categories to module
commands and subcommands. The set of ACL categories should be passed as
a space separated C string 'aclflags'.</p>
<p>Example, the acl flags 'write slow' marks the command as part of the write and 
slow ACL categories.</p>
<p>On success <code>REDISMODULE_OK</code> is returned. On error <code>REDISMODULE_ERR</code> is returned.</p>
<p>This function can only be called during the <code>RedisModule_OnLoad</code> function. If called
outside of this function, an error is returned.</p>
<p><span id="RedisModule_SetCommandInfo"></span></p>
<h3 id="redismodule_setcommandinfo"><code>RedisModule_SetCommandInfo</code><a class="headerlink" href="#redismodule_setcommandinfo" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetCommandInfo(RedisModuleCommand *command,
                               const RedisModuleCommandInfo *info);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Set additional command information.</p>
<p>Affects the output of <code>COMMAND</code>, <code>COMMAND INFO</code> and <code>COMMAND DOCS</code>, Cluster,
ACL and is used to filter commands with the wrong number of arguments before
the call reaches the module code.</p>
<p>This function can be called after creating a command using <a href="#RedisModule_CreateCommand"><code>RedisModule_CreateCommand</code></a>
and fetching the command pointer using <a href="#RedisModule_GetCommand"><code>RedisModule_GetCommand</code></a>. The information can
only be set once for each command and has the following structure:</p>
<div class="highlight"><pre><span></span><code>typedef struct RedisModuleCommandInfo {
    const RedisModuleCommandInfoVersion *version;
    const char *summary;
    const char *complexity;
    const char *since;
    RedisModuleCommandHistoryEntry *history;
    const char *tips;
    int arity;
    RedisModuleCommandKeySpec *key_specs;
    RedisModuleCommandArg *args;
} RedisModuleCommandInfo;
</code></pre></div>
<p>All fields except <code>version</code> are optional. Explanation of the fields:</p>
<ul>
<li>
<p><code>version</code>: This field enables compatibility with different Redis versions.
  Always set this field to <code>REDISMODULE_COMMAND_INFO_VERSION</code>.</p>
</li>
<li>
<p><code>summary</code>: A short description of the command (optional).</p>
</li>
<li>
<p><code>complexity</code>: Complexity description (optional).</p>
</li>
<li>
<p><code>since</code>: The version where the command was introduced (optional).
  Note: The version specified should be the module's, not Redis version.</p>
</li>
<li>
<p><code>history</code>: An array of <code>RedisModuleCommandHistoryEntry</code> (optional), which is
  a struct with the following fields:</p>
<div class="highlight"><pre><span></span><code>const char *since;
const char *changes;
</code></pre></div>
<p><code>since</code> is a version string and <code>changes</code> is a string describing the
changes. The array is terminated by a zeroed entry, i.e. an entry with
both strings set to NULL.</p>
</li>
<li>
<p><code>tips</code>: A string of space-separated tips regarding this command, meant for
  clients and proxies. See <a href="https://redis.io/topics/command-tips">https://redis.io/topics/command-tips</a>.</p>
</li>
<li>
<p><code>arity</code>: Number of arguments, including the command name itself. A positive
  number specifies an exact number of arguments and a negative number
  specifies a minimum number of arguments, so use -N to say &gt;= N. Redis
  validates a call before passing it to a module, so this can replace an
  arity check inside the module command implementation. A value of 0 (or an
  omitted arity field) is equivalent to -2 if the command has sub commands
  and -1 otherwise.</p>
</li>
<li>
<p><code>key_specs</code>: An array of <code>RedisModuleCommandKeySpec</code>, terminated by an
  element memset to zero. This is a scheme that tries to describe the
  positions of key arguments better than the old <a href="#RedisModule_CreateCommand"><code>RedisModule_CreateCommand</code></a> arguments
  <code>firstkey</code>, <code>lastkey</code>, <code>keystep</code> and is needed if those three are not
  enough to describe the key positions. There are two steps to retrieve key
  positions: <em>begin search</em> (BS) in which index should find the first key and
  <em>find keys</em> (FK) which, relative to the output of BS, describes how can we
  will which arguments are keys. Additionally, there are key specific flags.</p>
<p>Key-specs cause the triplet (firstkey, lastkey, keystep) given in
RedisModule_CreateCommand to be recomputed, but it is still useful to provide
these three parameters in RedisModule_CreateCommand, to better support old Redis
versions where RedisModule_SetCommandInfo is not available.</p>
<p>Note that key-specs don't fully replace the "getkeys-api" (see
RedisModule_CreateCommand, RedisModule_IsKeysPositionRequest and RedisModule_KeyAtPosWithFlags) so
it may be a good idea to supply both key-specs and implement the
getkeys-api.</p>
<p>A key-spec has the following structure:</p>
<div class="highlight"><pre><span></span><code>typedef struct RedisModuleCommandKeySpec {
    const char *notes;
    uint64_t flags;
    RedisModuleKeySpecBeginSearchType begin_search_type;
    union {
        struct {
            int pos;
        } index;
        struct {
            const char *keyword;
            int startfrom;
        } keyword;
    } bs;
    RedisModuleKeySpecFindKeysType find_keys_type;
    union {
        struct {
            int lastkey;
            int keystep;
            int limit;
        } range;
        struct {
            int keynumidx;
            int firstkey;
            int keystep;
        } keynum;
    } fk;
} RedisModuleCommandKeySpec;
</code></pre></div>
<p>Explanation of the fields of RedisModuleCommandKeySpec:</p>
<ul>
<li>
<p><code>notes</code>: Optional notes or clarifications about this key spec.</p>
</li>
<li>
<p><code>flags</code>: A bitwise or of key-spec flags described below.</p>
</li>
<li>
<p><code>begin_search_type</code>: This describes how the first key is discovered.
  There are two ways to determine the first key:</p>
<ul>
<li><code>REDISMODULE_KSPEC_BS_UNKNOWN</code>: There is no way to tell where the
  key args start.</li>
<li><code>REDISMODULE_KSPEC_BS_INDEX</code>: Key args start at a constant index.</li>
<li><code>REDISMODULE_KSPEC_BS_KEYWORD</code>: Key args start just after a
  specific keyword.</li>
</ul>
</li>
<li>
<p><code>bs</code>: This is a union in which the <code>index</code> or <code>keyword</code> branch is used
  depending on the value of the <code>begin_search_type</code> field.</p>
<ul>
<li>
<p><code>bs.index.pos</code>: The index from which we start the search for keys.
  (<code>REDISMODULE_KSPEC_BS_INDEX</code> only.)</p>
</li>
<li>
<p><code>bs.keyword.keyword</code>: The keyword (string) that indicates the
  beginning of key arguments. (<code>REDISMODULE_KSPEC_BS_KEYWORD</code> only.)</p>
</li>
<li>
<p><code>bs.keyword.startfrom</code>: An index in argv from which to start
  searching. Can be negative, which means start search from the end,
  in reverse. Example: -2 means to start in reverse from the
  penultimate argument. (<code>REDISMODULE_KSPEC_BS_KEYWORD</code> only.)</p>
</li>
</ul>
</li>
<li>
<p><code>find_keys_type</code>: After the "begin search", this describes which
  arguments are keys. The strategies are:</p>
<ul>
<li><code>REDISMODULE_KSPEC_BS_UNKNOWN</code>: There is no way to tell where the
  key args are located.</li>
<li><code>REDISMODULE_KSPEC_FK_RANGE</code>: Keys end at a specific index (or
  relative to the last argument).</li>
<li><code>REDISMODULE_KSPEC_FK_KEYNUM</code>: There's an argument that contains
  the number of key args somewhere before the keys themselves.</li>
</ul>
</li>
</ul>
<p><code>find_keys_type</code> and <code>fk</code> can be omitted if this keyspec describes
  exactly one key.</p>
<ul>
<li>
<p><code>fk</code>: This is a union in which the <code>range</code> or <code>keynum</code> branch is used
  depending on the value of the <code>find_keys_type</code> field.</p>
<ul>
<li>
<p><code>fk.range</code> (for <code>REDISMODULE_KSPEC_FK_RANGE</code>): A struct with the
  following fields:</p>
<ul>
<li>
<p><code>lastkey</code>: Index of the last key relative to the result of the
  begin search step. Can be negative, in which case it's not
  relative. -1 indicates the last argument, -2 one before the
  last and so on.</p>
</li>
<li>
<p><code>keystep</code>: How many arguments should we skip after finding a
  key, in order to find the next one?</p>
</li>
<li>
<p><code>limit</code>: If <code>lastkey</code> is -1, we use <code>limit</code> to stop the search
  by a factor. 0 and 1 mean no limit. 2 means 1/2 of the
  remaining args, 3 means 1/3, and so on.</p>
</li>
</ul>
</li>
<li>
<p><code>fk.keynum</code> (for <code>REDISMODULE_KSPEC_FK_KEYNUM</code>): A struct with the
  following fields:</p>
<ul>
<li>
<p><code>keynumidx</code>: Index of the argument containing the number of
  keys to come, relative to the result of the begin search step.</p>
</li>
<li>
<p><code>firstkey</code>: Index of the fist key relative to the result of the
  begin search step. (Usually it's just after <code>keynumidx</code>, in
  which case it should be set to <code>keynumidx + 1</code>.)</p>
</li>
<li>
<p><code>keystep</code>: How many arguments should we skip after finding a
  key, in order to find the next one?</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Key-spec flags:</p>
<p>The first four refer to what the command actually does with the <em>value or
metadata of the key</em>, and not necessarily the user data or how it affects
it. Each key-spec may must have exactly one of these. Any operation
that's not distinctly deletion, overwrite or read-only would be marked as
RW.</p>
<ul>
<li>
<p><code>REDISMODULE_CMD_KEY_RO</code>: Read-Only. Reads the value of the key, but
  doesn't necessarily return it.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_RW</code>: Read-Write. Modifies the data stored in the
  value of the key or its metadata.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_OW</code>: Overwrite. Overwrites the data stored in the
  value of the key.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_RM</code>: Deletes the key.</p>
</li>
</ul>
<p>The next four refer to <em>user data inside the value of the key</em>, not the
metadata like LRU, type, cardinality. It refers to the logical operation
on the user's data (actual input strings or TTL), being
used/returned/copied/changed. It doesn't refer to modification or
returning of metadata (like type, count, presence of data). ACCESS can be
combined with one of the write operations INSERT, DELETE or UPDATE. Any
write that's not an INSERT or a DELETE would be UPDATE.</p>
<ul>
<li>
<p><code>REDISMODULE_CMD_KEY_ACCESS</code>: Returns, copies or uses the user data
  from the value of the key.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_UPDATE</code>: Updates data to the value, new value may
  depend on the old value.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_INSERT</code>: Adds data to the value with no chance of
  modification or deletion of existing data.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_DELETE</code>: Explicitly deletes some content from the
  value of the key.</p>
</li>
</ul>
<p>Other flags:</p>
<ul>
<li>
<p><code>REDISMODULE_CMD_KEY_NOT_KEY</code>: The key is not actually a key, but 
  should be routed in cluster mode as if it was a key.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_INCOMPLETE</code>: The keyspec might not point out all
  the keys it should cover.</p>
</li>
<li>
<p><code>REDISMODULE_CMD_KEY_VARIABLE_FLAGS</code>: Some keys might have different
  flags depending on arguments.</p>
</li>
</ul>
</li>
<li>
<p><code>args</code>: An array of <code>RedisModuleCommandArg</code>, terminated by an element memset
  to zero. <code>RedisModuleCommandArg</code> is a structure with at the fields described
  below.</p>
<div class="highlight"><pre><span></span><code>typedef struct RedisModuleCommandArg {
    const char *name;
    RedisModuleCommandArgType type;
    int key_spec_index;
    const char *token;
    const char *summary;
    const char *since;
    int flags;
    struct RedisModuleCommandArg *subargs;
} RedisModuleCommandArg;
</code></pre></div>
<p>Explanation of the fields:</p>
<ul>
<li>
<p><code>name</code>: Name of the argument.</p>
</li>
<li>
<p><code>type</code>: The type of the argument. See below for details. The types
  <code>REDISMODULE_ARG_TYPE_ONEOF</code> and <code>REDISMODULE_ARG_TYPE_BLOCK</code> require
  an argument to have sub-arguments, i.e. <code>subargs</code>.</p>
</li>
<li>
<p><code>key_spec_index</code>: If the <code>type</code> is <code>REDISMODULE_ARG_TYPE_KEY</code> you must
  provide the index of the key-spec associated with this argument. See
  <code>key_specs</code> above. If the argument is not a key, you may specify -1.</p>
</li>
<li>
<p><code>token</code>: The token preceding the argument (optional). Example: the
  argument <code>seconds</code> in <code>SET</code> has a token <code>EX</code>. If the argument consists
  of only a token (for example <code>NX</code> in <code>SET</code>) the type should be
  <code>REDISMODULE_ARG_TYPE_PURE_TOKEN</code> and <code>value</code> should be NULL.</p>
</li>
<li>
<p><code>summary</code>: A short description of the argument (optional).</p>
</li>
<li>
<p><code>since</code>: The first version which included this argument (optional).</p>
</li>
<li>
<p><code>flags</code>: A bitwise or of the macros <code>REDISMODULE_CMD_ARG_*</code>. See below.</p>
</li>
<li>
<p><code>value</code>: The display-value of the argument. This string is what should
  be displayed when creating the command syntax from the output of
  <code>COMMAND</code>. If <code>token</code> is not NULL, it should also be displayed.</p>
</li>
</ul>
<p>Explanation of <code>RedisModuleCommandArgType</code>:</p>
<ul>
<li><code>REDISMODULE_ARG_TYPE_STRING</code>: String argument.</li>
<li><code>REDISMODULE_ARG_TYPE_INTEGER</code>: Integer argument.</li>
<li><code>REDISMODULE_ARG_TYPE_DOUBLE</code>: Double-precision float argument.</li>
<li><code>REDISMODULE_ARG_TYPE_KEY</code>: String argument representing a keyname.</li>
<li><code>REDISMODULE_ARG_TYPE_PATTERN</code>: String, but regex pattern.</li>
<li><code>REDISMODULE_ARG_TYPE_UNIX_TIME</code>: Integer, but Unix timestamp.</li>
<li><code>REDISMODULE_ARG_TYPE_PURE_TOKEN</code>: Argument doesn't have a placeholder.
  It's just a token without a value. Example: the <code>KEEPTTL</code> option of the
  <code>SET</code> command.</li>
<li><code>REDISMODULE_ARG_TYPE_ONEOF</code>: Used when the user can choose only one of
  a few sub-arguments. Requires <code>subargs</code>. Example: the <code>NX</code> and <code>XX</code>
  options of <code>SET</code>.</li>
<li><code>REDISMODULE_ARG_TYPE_BLOCK</code>: Used when one wants to group together
  several sub-arguments, usually to apply something on all of them, like
  making the entire group "optional". Requires <code>subargs</code>. Example: the
  <code>LIMIT offset count</code> parameters in <code>ZRANGE</code>.</li>
</ul>
<p>Explanation of the command argument flags:</p>
<ul>
<li><code>REDISMODULE_CMD_ARG_OPTIONAL</code>: The argument is optional (like GET in
  the SET command).</li>
<li><code>REDISMODULE_CMD_ARG_MULTIPLE</code>: The argument may repeat itself (like
  key in DEL).</li>
<li><code>REDISMODULE_CMD_ARG_MULTIPLE_TOKEN</code>: The argument may repeat itself,
  and so does its token (like <code>GET pattern</code> in SORT).</li>
</ul>
</li>
</ul>
<p>On success <code>REDISMODULE_OK</code> is returned. On error <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set to EINVAL if invalid info was provided or EEXIST if info
has already been set. If the info is invalid, a warning is logged explaining
which part of the info is invalid and why.</p>
<p><span id="section-module-information-and-time-measurement"></span></p>
<h2 id="module-information-and-time-measurement">Module information and time measurement<a class="headerlink" href="#module-information-and-time-measurement" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_IsModuleNameBusy"></span></p>
<h3 id="redismodule_ismodulenamebusy"><code>RedisModule_IsModuleNameBusy</code><a class="headerlink" href="#redismodule_ismodulenamebusy" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsModuleNameBusy(const char *name);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.3</p>
<p>Return non-zero if the module name is busy.
Otherwise zero is returned.</p>
<p><span id="RedisModule_Milliseconds"></span></p>
<h3 id="redismodule_milliseconds"><code>RedisModule_Milliseconds</code><a class="headerlink" href="#redismodule_milliseconds" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>mstime_t RedisModule_Milliseconds(void);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the current UNIX time in milliseconds.</p>
<p><span id="RedisModule_MonotonicMicroseconds"></span></p>
<h3 id="redismodule_monotonicmicroseconds"><code>RedisModule_MonotonicMicroseconds</code><a class="headerlink" href="#redismodule_monotonicmicroseconds" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>uint64_t RedisModule_MonotonicMicroseconds(void);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return counter of micro-seconds relative to an arbitrary point in time.</p>
<p><span id="RedisModule_Microseconds"></span></p>
<h3 id="redismodule_microseconds"><code>RedisModule_Microseconds</code><a class="headerlink" href="#redismodule_microseconds" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>ustime_t RedisModule_Microseconds(void);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Return the current UNIX time in microseconds</p>
<p><span id="RedisModule_CachedMicroseconds"></span></p>
<h3 id="redismodule_cachedmicroseconds"><code>RedisModule_CachedMicroseconds</code><a class="headerlink" href="#redismodule_cachedmicroseconds" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>ustime_t RedisModule_CachedMicroseconds(void);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Return the cached UNIX time in microseconds.
It is updated in the server cron job and before executing a command.
It is useful for complex call stacks, such as a command causing a
key space notification, causing a module to execute a <a href="#RedisModule_Call"><code>RedisModule_Call</code></a>,
causing another notification, etc.
It makes sense that all this callbacks would use the same clock.</p>
<p><span id="RedisModule_BlockedClientMeasureTimeStart"></span></p>
<h3 id="redismodule_blockedclientmeasuretimestart"><code>RedisModule_BlockedClientMeasureTimeStart</code><a class="headerlink" href="#redismodule_blockedclientmeasuretimestart" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_BlockedClientMeasureTimeStart(RedisModuleBlockedClient *bc);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Mark a point in time that will be used as the start time to calculate
the elapsed execution time when <a href="#RedisModule_BlockedClientMeasureTimeEnd"><code>RedisModule_BlockedClientMeasureTimeEnd()</code></a> is called.
Within the same command, you can call multiple times
<a href="#RedisModule_BlockedClientMeasureTimeStart"><code>RedisModule_BlockedClientMeasureTimeStart()</code></a> and <a href="#RedisModule_BlockedClientMeasureTimeEnd"><code>RedisModule_BlockedClientMeasureTimeEnd()</code></a>
to accumulate independent time intervals to the background duration.
This method always return <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_BlockedClientMeasureTimeEnd"></span></p>
<h3 id="redismodule_blockedclientmeasuretimeend"><code>RedisModule_BlockedClientMeasureTimeEnd</code><a class="headerlink" href="#redismodule_blockedclientmeasuretimeend" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_BlockedClientMeasureTimeEnd(RedisModuleBlockedClient *bc);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Mark a point in time that will be used as the end time
to calculate the elapsed execution time.
On success <code>REDISMODULE_OK</code> is returned.
This method only returns <code>REDISMODULE_ERR</code> if no start time was
previously defined ( meaning <a href="#RedisModule_BlockedClientMeasureTimeStart"><code>RedisModule_BlockedClientMeasureTimeStart</code></a> was not called ).</p>
<p><span id="RedisModule_Yield"></span></p>
<h3 id="redismodule_yield"><code>RedisModule_Yield</code><a class="headerlink" href="#redismodule_yield" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_Yield(RedisModuleCtx *ctx, int flags, const char *busy_reply);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>This API allows modules to let Redis process background tasks, and some
commands during long blocking execution of a module command.
The module can call this API periodically.
The flags is a bit mask of these:</p>
<ul>
<li><code>REDISMODULE_YIELD_FLAG_NONE</code>: No special flags, can perform some background
                                 operations, but not process client commands.</li>
<li><code>REDISMODULE_YIELD_FLAG_CLIENTS</code>: Redis can also process client commands.</li>
</ul>
<p>The <code>busy_reply</code> argument is optional, and can be used to control the verbose
error string after the <code>-BUSY</code> error code.</p>
<p>When the <code>REDISMODULE_YIELD_FLAG_CLIENTS</code> is used, Redis will only start
processing client commands after the time defined by the
<code>busy-reply-threshold</code> config, in which case Redis will start rejecting most
commands with <code>-BUSY</code> error, but allow the ones marked with the <code>allow-busy</code>
flag to be executed.
This API can also be used in thread safe context (while locked), and during
loading (in the <code>rdb_load</code> callback, in which case it'll reject commands with
the -LOADING error)</p>
<p><span id="RedisModule_SetModuleOptions"></span></p>
<h3 id="redismodule_setmoduleoptions"><code>RedisModule_SetModuleOptions</code><a class="headerlink" href="#redismodule_setmoduleoptions" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SetModuleOptions(RedisModuleCtx *ctx, int options);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Set flags defining capabilities or behavior bit flags.</p>
<p><code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code>:
Generally, modules don't need to bother with this, as the process will just
terminate if a read error happens, however, setting this flag would allow
repl-diskless-load to work if enabled.
The module should use <a href="#RedisModule_IsIOError"><code>RedisModule_IsIOError</code></a> after reads, before using the
data that was read, and in case of error, propagate it upwards, and also be
able to release the partially populated value and all it's allocations.</p>
<p><code>REDISMODULE_OPTION_NO_IMPLICIT_SIGNAL_MODIFIED</code>:
See <a href="#RedisModule_SignalModifiedKey"><code>RedisModule_SignalModifiedKey()</code></a>.</p>
<p><code>REDISMODULE_OPTIONS_HANDLE_REPL_ASYNC_LOAD</code>:
Setting this flag indicates module awareness of diskless async replication (repl-diskless-load=swapdb)
and that redis could be serving reads during replication instead of blocking with LOADING status.</p>
<p><code>REDISMODULE_OPTIONS_ALLOW_NESTED_KEYSPACE_NOTIFICATIONS</code>:
Declare that the module wants to get nested key-space notifications.
By default, Redis will not fire key-space notifications that happened inside
a key-space notification callback. This flag allows to change this behavior
and fire nested key-space notifications. Notice: if enabled, the module
should protected itself from infinite recursion.</p>
<p><span id="RedisModule_SignalModifiedKey"></span></p>
<h3 id="redismodule_signalmodifiedkey"><code>RedisModule_SignalModifiedKey</code><a class="headerlink" href="#redismodule_signalmodifiedkey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SignalModifiedKey(RedisModuleCtx *ctx,
                                  RedisModuleString *keyname);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Signals that the key is modified from user's perspective (i.e. invalidate WATCH
and client side caching).</p>
<p>This is done automatically when a key opened for writing is closed, unless
the option <code>REDISMODULE_OPTION_NO_IMPLICIT_SIGNAL_MODIFIED</code> has been set using
<a href="#RedisModule_SetModuleOptions"><code>RedisModule_SetModuleOptions()</code></a>.</p>
<p><span id="section-automatic-memory-management-for-modules"></span></p>
<h2 id="automatic-memory-management-for-modules">Automatic memory management for modules<a class="headerlink" href="#automatic-memory-management-for-modules" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_AutoMemory"></span></p>
<h3 id="redismodule_automemory"><code>RedisModule_AutoMemory</code><a class="headerlink" href="#redismodule_automemory" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_AutoMemory(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Enable automatic memory management.</p>
<p>The function must be called as the first function of a command implementation
that wants to use automatic memory.</p>
<p>When enabled, automatic memory management tracks and automatically frees
keys, call replies and Redis string objects once the command returns. In most
cases this eliminates the need of calling the following functions:</p>
<ol>
<li><a href="#RedisModule_CloseKey"><code>RedisModule_CloseKey()</code></a></li>
<li><a href="#RedisModule_FreeCallReply"><code>RedisModule_FreeCallReply()</code></a></li>
<li><a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a></li>
</ol>
<p>These functions can still be used with automatic memory management enabled,
to optimize loops that make numerous allocations for example.</p>
<p><span id="section-string-objects-apis"></span></p>
<h2 id="string-objects-apis">String objects APIs<a class="headerlink" href="#string-objects-apis" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_CreateString"></span></p>
<h3 id="redismodule_createstring"><code>RedisModule_CreateString</code><a class="headerlink" href="#redismodule_createstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateString(RedisModuleCtx *ctx,
                                            const char *ptr,
                                            size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Create a new module string object. The returned string must be freed
with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a>, unless automatic memory is enabled.</p>
<p>The string is created by copying the <code>len</code> bytes starting
at <code>ptr</code>. No reference is retained to the passed buffer.</p>
<p>The module context 'ctx' is optional and may be NULL if you want to create
a string out of the context scope. However in that case, the automatic
memory management will not be available, and the string memory must be
managed manually.</p>
<p><span id="RedisModule_CreateStringPrintf"></span></p>
<h3 id="redismodule_createstringprintf"><code>RedisModule_CreateStringPrintf</code><a class="headerlink" href="#redismodule_createstringprintf" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringPrintf(RedisModuleCtx *ctx,
                                                  const char *fmt,
                                                  ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Create a new module string object from a printf format and arguments.
The returned string must be freed with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a>, unless
automatic memory is enabled.</p>
<p>The string is created using the sds formatter function <code>sdscatvprintf()</code>.</p>
<p>The passed context 'ctx' may be NULL if necessary, see the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_CreateStringFromLongLong"></span></p>
<h3 id="redismodule_createstringfromlonglong"><code>RedisModule_CreateStringFromLongLong</code><a class="headerlink" href="#redismodule_createstringfromlonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromLongLong(RedisModuleCtx *ctx,
                                                        long long ll);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a>, but creates a string starting from a <code>long long</code>
integer instead of taking a buffer and its length.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p>The passed context 'ctx' may be NULL if necessary, see the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_CreateStringFromULongLong"></span></p>
<h3 id="redismodule_createstringfromulonglong"><code>RedisModule_CreateStringFromULongLong</code><a class="headerlink" href="#redismodule_createstringfromulonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromULongLong(RedisModuleCtx *ctx,
                                                         unsigned long long ull);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.3</p>
<p>Like <a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a>, but creates a string starting from a <code>unsigned long long</code>
integer instead of taking a buffer and its length.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p>The passed context 'ctx' may be NULL if necessary, see the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_CreateStringFromDouble"></span></p>
<h3 id="redismodule_createstringfromdouble"><code>RedisModule_CreateStringFromDouble</code><a class="headerlink" href="#redismodule_createstringfromdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromDouble(RedisModuleCtx *ctx,
                                                      double d);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Like <a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a>, but creates a string starting from a double
instead of taking a buffer and its length.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p><span id="RedisModule_CreateStringFromLongDouble"></span></p>
<h3 id="redismodule_createstringfromlongdouble"><code>RedisModule_CreateStringFromLongDouble</code><a class="headerlink" href="#redismodule_createstringfromlongdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromLongDouble(RedisModuleCtx *ctx,
                                                          long double ld,
                                                          int humanfriendly);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Like <a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a>, but creates a string starting from a long
double.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p>The passed context 'ctx' may be NULL if necessary, see the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_CreateStringFromString"></span></p>
<h3 id="redismodule_createstringfromstring"><code>RedisModule_CreateStringFromString</code><a class="headerlink" href="#redismodule_createstringfromstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromString(RedisModuleCtx *ctx,
                                                      const RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a>, but creates a string starting from another
<code>RedisModuleString</code>.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p>The passed context 'ctx' may be NULL if necessary, see the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_CreateStringFromStreamID"></span></p>
<h3 id="redismodule_createstringfromstreamid"><code>RedisModule_CreateStringFromStreamID</code><a class="headerlink" href="#redismodule_createstringfromstreamid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromStreamID(RedisModuleCtx *ctx,
                                                        const RedisModuleStreamID *id);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Creates a string from a stream ID. The returned string must be released with
<a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a>, unless automatic memory is enabled.</p>
<p>The passed context <code>ctx</code> may be NULL if necessary. See the
<a href="#RedisModule_CreateString"><code>RedisModule_CreateString()</code></a> documentation for more info.</p>
<p><span id="RedisModule_FreeString"></span></p>
<h3 id="redismodule_freestring"><code>RedisModule_FreeString</code><a class="headerlink" href="#redismodule_freestring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Free a module string object obtained with one of the Redis modules API calls
that return new string objects.</p>
<p>It is possible to call this function even when automatic memory management
is enabled. In that case the string will be released ASAP and removed
from the pool of string to release at the end.</p>
<p>If the string was created with a NULL context 'ctx', it is also possible to
pass ctx as NULL when releasing the string (but passing a context will not
create any issue). Strings created with a context should be freed also passing
the context, so if you want to free a string out of context later, make sure
to create it using a NULL context.</p>
<p><span id="RedisModule_RetainString"></span></p>
<h3 id="redismodule_retainstring"><code>RedisModule_RetainString</code><a class="headerlink" href="#redismodule_retainstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_RetainString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Every call to this function, will make the string 'str' requiring
an additional call to <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> in order to really
free the string. Note that the automatic freeing of the string obtained
enabling modules automatic memory management counts for one
<a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> call (it is just executed automatically).</p>
<p>Normally you want to call this function when, at the same time
the following conditions are true:</p>
<ol>
<li>You have automatic memory management enabled.</li>
<li>You want to create string objects.</li>
<li>Those string objects you create need to live <em>after</em> the callback
   function(for example a command implementation) creating them returns.</li>
</ol>
<p>Usually you want this in order to store the created string object
into your own data structure, for example when implementing a new data
type.</p>
<p>Note that when memory management is turned off, you don't need
any call to RetainString() since creating a string will always result
into a string that lives after the callback function returns, if
no FreeString() call is performed.</p>
<p>It is possible to call this function with a NULL context.</p>
<p>When strings are going to be retained for an extended duration, it is good
practice to also call <a href="#RedisModule_TrimStringAllocation"><code>RedisModule_TrimStringAllocation()</code></a> in order to
optimize memory usage.</p>
<p>Threaded modules that reference retained strings from other threads <em>must</em>
explicitly trim the allocation as soon as the string is retained. Not doing
so may result with automatic trimming which is not thread safe.</p>
<p><span id="RedisModule_HoldString"></span></p>
<h3 id="redismodule_holdstring"><code>RedisModule_HoldString</code><a class="headerlink" href="#redismodule_holdstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString* RedisModule_HoldString(RedisModuleCtx *ctx,
                                          RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.7</p>
<p>This function can be used instead of <a href="#RedisModule_RetainString"><code>RedisModule_RetainString()</code></a>.
The main difference between the two is that this function will always
succeed, whereas <a href="#RedisModule_RetainString"><code>RedisModule_RetainString()</code></a> may fail because of an
assertion.</p>
<p>The function returns a pointer to <code>RedisModuleString</code>, which is owned
by the caller. It requires a call to <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> to free
the string when automatic memory management is disabled for the context.
When automatic memory management is enabled, you can either call
<a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or let the automation free it.</p>
<p>This function is more efficient than <a href="#RedisModule_CreateStringFromString"><code>RedisModule_CreateStringFromString()</code></a>
because whenever possible, it avoids copying the underlying
<code>RedisModuleString</code>. The disadvantage of using this function is that it
might not be possible to use <a href="#RedisModule_StringAppendBuffer"><code>RedisModule_StringAppendBuffer()</code></a> on the
returned <code>RedisModuleString</code>.</p>
<p>It is possible to call this function with a NULL context.</p>
<p>When strings are going to be held for an extended duration, it is good
practice to also call <a href="#RedisModule_TrimStringAllocation"><code>RedisModule_TrimStringAllocation()</code></a> in order to
optimize memory usage.</p>
<p>Threaded modules that reference held strings from other threads <em>must</em>
explicitly trim the allocation as soon as the string is held. Not doing
so may result with automatic trimming which is not thread safe.</p>
<p><span id="RedisModule_StringPtrLen"></span></p>
<h3 id="redismodule_stringptrlen"><code>RedisModule_StringPtrLen</code><a class="headerlink" href="#redismodule_stringptrlen" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_StringPtrLen(const RedisModuleString *str,
                                     size_t *len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Given a string module object, this function returns the string pointer
and length of the string. The returned pointer and length should only
be used for read only accesses and never modified.</p>
<p><span id="RedisModule_StringToLongLong"></span></p>
<h3 id="redismodule_stringtolonglong"><code>RedisModule_StringToLongLong</code><a class="headerlink" href="#redismodule_stringtolonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringToLongLong(const RedisModuleString *str, long long *ll);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Convert the string into a <code>long long</code> integer, storing it at <code>*ll</code>.
Returns <code>REDISMODULE_OK</code> on success. If the string can't be parsed
as a valid, strict <code>long long</code> (no spaces before/after), <code>REDISMODULE_ERR</code>
is returned.</p>
<p><span id="RedisModule_StringToULongLong"></span></p>
<h3 id="redismodule_stringtoulonglong"><code>RedisModule_StringToULongLong</code><a class="headerlink" href="#redismodule_stringtoulonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringToULongLong(const RedisModuleString *str,
                                  unsigned long long *ull);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.3</p>
<p>Convert the string into a <code>unsigned long long</code> integer, storing it at <code>*ull</code>.
Returns <code>REDISMODULE_OK</code> on success. If the string can't be parsed
as a valid, strict <code>unsigned long long</code> (no spaces before/after), <code>REDISMODULE_ERR</code>
is returned.</p>
<p><span id="RedisModule_StringToDouble"></span></p>
<h3 id="redismodule_stringtodouble"><code>RedisModule_StringToDouble</code><a class="headerlink" href="#redismodule_stringtodouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringToDouble(const RedisModuleString *str, double *d);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Convert the string into a double, storing it at <code>*d</code>.
Returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if the string is
not a valid string representation of a double value.</p>
<p><span id="RedisModule_StringToLongDouble"></span></p>
<h3 id="redismodule_stringtolongdouble"><code>RedisModule_StringToLongDouble</code><a class="headerlink" href="#redismodule_stringtolongdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringToLongDouble(const RedisModuleString *str,
                                   long double *ld);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Convert the string into a long double, storing it at <code>*ld</code>.
Returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if the string is
not a valid string representation of a double value.</p>
<p><span id="RedisModule_StringToStreamID"></span></p>
<h3 id="redismodule_stringtostreamid"><code>RedisModule_StringToStreamID</code><a class="headerlink" href="#redismodule_stringtostreamid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringToStreamID(const RedisModuleString *str,
                                 RedisModuleStreamID *id);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Convert the string into a stream ID, storing it at <code>*id</code>.
Returns <code>REDISMODULE_OK</code> on success and returns <code>REDISMODULE_ERR</code> if the string
is not a valid string representation of a stream ID. The special IDs "+" and
"-" are allowed.</p>
<p><span id="RedisModule_StringCompare"></span></p>
<h3 id="redismodule_stringcompare"><code>RedisModule_StringCompare</code><a class="headerlink" href="#redismodule_stringcompare" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringCompare(const RedisModuleString *a,
                              const RedisModuleString *b);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Compare two string objects, returning -1, 0 or 1 respectively if
a &lt; b, a == b, a &gt; b. Strings are compared byte by byte as two
binary blobs without any encoding care / collation attempt.</p>
<p><span id="RedisModule_StringAppendBuffer"></span></p>
<h3 id="redismodule_stringappendbuffer"><code>RedisModule_StringAppendBuffer</code><a class="headerlink" href="#redismodule_stringappendbuffer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringAppendBuffer(RedisModuleCtx *ctx,
                                   RedisModuleString *str,
                                   const char *buf,
                                   size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Append the specified buffer to the string 'str'. The string must be a
string created by the user that is referenced only a single time, otherwise
<code>REDISMODULE_ERR</code> is returned and the operation is not performed.</p>
<p><span id="RedisModule_TrimStringAllocation"></span></p>
<h3 id="redismodule_trimstringallocation"><code>RedisModule_TrimStringAllocation</code><a class="headerlink" href="#redismodule_trimstringallocation" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_TrimStringAllocation(RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Trim possible excess memory allocated for a <code>RedisModuleString</code>.</p>
<p>Sometimes a <code>RedisModuleString</code> may have more memory allocated for
it than required, typically for argv arguments that were constructed
from network buffers. This function optimizes such strings by reallocating
their memory, which is useful for strings that are not short lived but
retained for an extended duration.</p>
<p>This operation is <em>not thread safe</em> and should only be called when
no concurrent access to the string is guaranteed. Using it for an argv
string in a module command before the string is potentially available
to other threads is generally safe.</p>
<p>Currently, Redis may also automatically trim retained strings when a
module command returns. However, doing this explicitly should still be
a preferred option:</p>
<ol>
<li>Future versions of Redis may abandon auto-trimming.</li>
<li>Auto-trimming as currently implemented is <em>not thread safe</em>.
   A background thread manipulating a recently retained string may end up
   in a race condition with the auto-trim, which could result with
   data corruption.</li>
</ol>
<p><span id="section-reply-apis"></span></p>
<h2 id="reply-apis">Reply APIs<a class="headerlink" href="#reply-apis" title="Permanent link">⚓︎</a></h2>
<p>These functions are used for sending replies to the client.</p>
<p>Most functions always return <code>REDISMODULE_OK</code> so you can use it with
'return' in order to return from the command implementation with:</p>
<div class="highlight"><pre><span></span><code>if (... some condition ...)
    return RedisModule_ReplyWithLongLong(ctx,mycount);
</code></pre></div>
<h3 id="reply-with-collection-functions">Reply with collection functions<a class="headerlink" href="#reply-with-collection-functions" title="Permanent link">⚓︎</a></h3>
<p>After starting a collection reply, the module must make calls to other
<code>ReplyWith*</code> style functions in order to emit the elements of the collection.
Collection types include: Array, Map, Set and Attribute.</p>
<p>When producing collections with a number of elements that is not known
beforehand, the function can be called with a special flag
<code>REDISMODULE_POSTPONED_LEN</code> (<code>REDISMODULE_POSTPONED_ARRAY_LEN</code> in the past),
and the actual number of elements can be later set with <code>RedisModule_ReplySet</code>*Length()
call (which will set the latest "open" count if there are multiple ones).</p>
<p><span id="RedisModule_WrongArity"></span></p>
<h3 id="redismodule_wrongarity"><code>RedisModule_WrongArity</code><a class="headerlink" href="#redismodule_wrongarity" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_WrongArity(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Send an error about the number of arguments given to the command,
citing the command name in the error message. Returns <code>REDISMODULE_OK</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>if (argc != 3) return RedisModule_WrongArity(ctx);
</code></pre></div>
<p><span id="RedisModule_ReplyWithLongLong"></span></p>
<h3 id="redismodule_replywithlonglong"><code>RedisModule_ReplyWithLongLong</code><a class="headerlink" href="#redismodule_replywithlonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithLongLong(RedisModuleCtx *ctx, long long ll);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Send an integer reply to the client, with the specified <code>long long</code> value.
The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithError"></span></p>
<h3 id="redismodule_replywitherror"><code>RedisModule_ReplyWithError</code><a class="headerlink" href="#redismodule_replywitherror" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithError(RedisModuleCtx *ctx, const char *err);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with the error 'err'.</p>
<p>Note that 'err' must contain all the error, including
the initial error code. The function only provides the initial "-", so
the usage is, for example:</p>
<div class="highlight"><pre><span></span><code>RedisModule_ReplyWithError(ctx,&quot;ERR Wrong Type&quot;);
</code></pre></div>
<p>and not just:</p>
<div class="highlight"><pre><span></span><code>RedisModule_ReplyWithError(ctx,&quot;Wrong Type&quot;);
</code></pre></div>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithErrorFormat"></span></p>
<h3 id="redismodule_replywitherrorformat"><code>RedisModule_ReplyWithErrorFormat</code><a class="headerlink" href="#redismodule_replywitherrorformat" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithErrorFormat(RedisModuleCtx *ctx,
                                     const char *fmt,
                                     ...);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Reply with the error create from a printf format and arguments.</p>
<p>Note that 'fmt' must contain all the error, including
the initial error code. The function only provides the initial "-", so
the usage is, for example:</p>
<div class="highlight"><pre><span></span><code>RedisModule_ReplyWithErrorFormat(ctx,&quot;ERR Wrong Type: %s&quot;,type);
</code></pre></div>
<p>and not just:</p>
<div class="highlight"><pre><span></span><code>RedisModule_ReplyWithErrorFormat(ctx,&quot;Wrong Type: %s&quot;,type);
</code></pre></div>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithSimpleString"></span></p>
<h3 id="redismodule_replywithsimplestring"><code>RedisModule_ReplyWithSimpleString</code><a class="headerlink" href="#redismodule_replywithsimplestring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithSimpleString(RedisModuleCtx *ctx, const char *msg);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with a simple string (<code>+... \r\n</code> in RESP protocol). This replies
are suitable only when sending a small non-binary string with small
overhead, like "OK" or similar replies.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithArray"></span></p>
<h3 id="redismodule_replywitharray"><code>RedisModule_ReplyWithArray</code><a class="headerlink" href="#redismodule_replywitharray" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithArray(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with an array type of 'len' elements.</p>
<p>After starting an array reply, the module must make <code>len</code> calls to other
<code>ReplyWith*</code> style functions in order to emit the elements of the array.
See Reply APIs section for more details.</p>
<p>Use <a href="#RedisModule_ReplySetArrayLength"><code>RedisModule_ReplySetArrayLength()</code></a> to set deferred length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithMap"></span></p>
<h3 id="redismodule_replywithmap"><code>RedisModule_ReplyWithMap</code><a class="headerlink" href="#redismodule_replywithmap" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithMap(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Reply with a RESP3 Map type of 'len' pairs.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>After starting a map reply, the module must make <code>len*2</code> calls to other
<code>ReplyWith*</code> style functions in order to emit the elements of the map.
See Reply APIs section for more details.</p>
<p>If the connected client is using RESP2, the reply will be converted to a flat
array.</p>
<p>Use <a href="#RedisModule_ReplySetMapLength"><code>RedisModule_ReplySetMapLength()</code></a> to set deferred length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithSet"></span></p>
<h3 id="redismodule_replywithset"><code>RedisModule_ReplyWithSet</code><a class="headerlink" href="#redismodule_replywithset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithSet(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Reply with a RESP3 Set type of 'len' elements.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>After starting a set reply, the module must make <code>len</code> calls to other
<code>ReplyWith*</code> style functions in order to emit the elements of the set.
See Reply APIs section for more details.</p>
<p>If the connected client is using RESP2, the reply will be converted to an
array type.</p>
<p>Use <a href="#RedisModule_ReplySetSetLength"><code>RedisModule_ReplySetSetLength()</code></a> to set deferred length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithAttribute"></span></p>
<h3 id="redismodule_replywithattribute"><code>RedisModule_ReplyWithAttribute</code><a class="headerlink" href="#redismodule_replywithattribute" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithAttribute(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Add attributes (metadata) to the reply. Should be done before adding the
actual reply. see <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a>#attribute-type</p>
<p>After starting an attribute's reply, the module must make <code>len*2</code> calls to other
<code>ReplyWith*</code> style functions in order to emit the elements of the attribute map.
See Reply APIs section for more details.</p>
<p>Use <a href="#RedisModule_ReplySetAttributeLength"><code>RedisModule_ReplySetAttributeLength()</code></a> to set deferred length.</p>
<p>Not supported by RESP2 and will return <code>REDISMODULE_ERR</code>, otherwise
the function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithNullArray"></span></p>
<h3 id="redismodule_replywithnullarray"><code>RedisModule_ReplyWithNullArray</code><a class="headerlink" href="#redismodule_replywithnullarray" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithNullArray(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Reply to the client with a null array, simply null in RESP3,
null array in RESP2.</p>
<p>Note: In RESP3 there's no difference between Null reply and
NullArray reply, so to prevent ambiguity it's better to avoid
using this API and use <a href="#RedisModule_ReplyWithNull"><code>RedisModule_ReplyWithNull</code></a> instead.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithEmptyArray"></span></p>
<h3 id="redismodule_replywithemptyarray"><code>RedisModule_ReplyWithEmptyArray</code><a class="headerlink" href="#redismodule_replywithemptyarray" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithEmptyArray(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Reply to the client with an empty array.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplySetArrayLength"></span></p>
<h3 id="redismodule_replysetarraylength"><code>RedisModule_ReplySetArrayLength</code><a class="headerlink" href="#redismodule_replysetarraylength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ReplySetArrayLength(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>When <a href="#RedisModule_ReplyWithArray"><code>RedisModule_ReplyWithArray()</code></a> is used with the argument
<code>REDISMODULE_POSTPONED_LEN</code>, because we don't know beforehand the number
of items we are going to output as elements of the array, this function
will take care to set the array length.</p>
<p>Since it is possible to have multiple array replies pending with unknown
length, this function guarantees to always set the latest array length
that was created in a postponed way.</p>
<p>For example in order to output an array like [1,[10,20,30]] we
could write:</p>
<div class="highlight"><pre><span></span><code> RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_LEN);
 RedisModule_ReplyWithLongLong(ctx,1);
 RedisModule_ReplyWithArray(ctx,REDISMODULE_POSTPONED_LEN);
 RedisModule_ReplyWithLongLong(ctx,10);
 RedisModule_ReplyWithLongLong(ctx,20);
 RedisModule_ReplyWithLongLong(ctx,30);
 RedisModule_ReplySetArrayLength(ctx,3); // Set len of 10,20,30 array.
 RedisModule_ReplySetArrayLength(ctx,2); // Set len of top array
</code></pre></div>
<p>Note that in the above example there is no reason to postpone the array
length, since we produce a fixed number of elements, but in the practice
the code may use an iterator or other ways of creating the output so
that is not easy to calculate in advance the number of elements.</p>
<p><span id="RedisModule_ReplySetMapLength"></span></p>
<h3 id="redismodule_replysetmaplength"><code>RedisModule_ReplySetMapLength</code><a class="headerlink" href="#redismodule_replysetmaplength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ReplySetMapLength(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Very similar to <a href="#RedisModule_ReplySetArrayLength"><code>RedisModule_ReplySetArrayLength</code></a> except <code>len</code> should
exactly half of the number of <code>ReplyWith*</code> functions called in the
context of the map.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p><span id="RedisModule_ReplySetSetLength"></span></p>
<h3 id="redismodule_replysetsetlength"><code>RedisModule_ReplySetSetLength</code><a class="headerlink" href="#redismodule_replysetsetlength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ReplySetSetLength(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Very similar to <a href="#RedisModule_ReplySetArrayLength"><code>RedisModule_ReplySetArrayLength</code></a>
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p><span id="RedisModule_ReplySetAttributeLength"></span></p>
<h3 id="redismodule_replysetattributelength"><code>RedisModule_ReplySetAttributeLength</code><a class="headerlink" href="#redismodule_replysetattributelength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ReplySetAttributeLength(RedisModuleCtx *ctx, long len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Very similar to <a href="#RedisModule_ReplySetMapLength"><code>RedisModule_ReplySetMapLength</code></a>
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>Must not be called if <a href="#RedisModule_ReplyWithAttribute"><code>RedisModule_ReplyWithAttribute</code></a> returned an error.</p>
<p><span id="RedisModule_ReplyWithStringBuffer"></span></p>
<h3 id="redismodule_replywithstringbuffer"><code>RedisModule_ReplyWithStringBuffer</code><a class="headerlink" href="#redismodule_replywithstringbuffer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithStringBuffer(RedisModuleCtx *ctx,
                                      const char *buf,
                                      size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with a bulk string, taking in input a C buffer pointer and length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithCString"></span></p>
<h3 id="redismodule_replywithcstring"><code>RedisModule_ReplyWithCString</code><a class="headerlink" href="#redismodule_replywithcstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithCString(RedisModuleCtx *ctx, const char *buf);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.6</p>
<p>Reply with a bulk string, taking in input a C buffer pointer that is
assumed to be null-terminated.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithString"></span></p>
<h3 id="redismodule_replywithstring"><code>RedisModule_ReplyWithString</code><a class="headerlink" href="#redismodule_replywithstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithString(RedisModuleCtx *ctx, RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with a bulk string, taking in input a <code>RedisModuleString</code> object.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithEmptyString"></span></p>
<h3 id="redismodule_replywithemptystring"><code>RedisModule_ReplyWithEmptyString</code><a class="headerlink" href="#redismodule_replywithemptystring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithEmptyString(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Reply with an empty string.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithVerbatimStringType"></span></p>
<h3 id="redismodule_replywithverbatimstringtype"><code>RedisModule_ReplyWithVerbatimStringType</code><a class="headerlink" href="#redismodule_replywithverbatimstringtype" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithVerbatimStringType(RedisModuleCtx *ctx,
                                            const char *buf,
                                            size_t len,
                                            const char *ext);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Reply with a binary safe string, which should not be escaped or filtered
taking in input a C buffer pointer, length and a 3 character type/extension.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithVerbatimString"></span></p>
<h3 id="redismodule_replywithverbatimstring"><code>RedisModule_ReplyWithVerbatimString</code><a class="headerlink" href="#redismodule_replywithverbatimstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithVerbatimString(RedisModuleCtx *ctx,
                                        const char *buf,
                                        size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Reply with a binary safe string, which should not be escaped or filtered
taking in input a C buffer pointer and length.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithNull"></span></p>
<h3 id="redismodule_replywithnull"><code>RedisModule_ReplyWithNull</code><a class="headerlink" href="#redismodule_replywithnull" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithNull(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply to the client with a NULL.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithBool"></span></p>
<h3 id="redismodule_replywithbool"><code>RedisModule_ReplyWithBool</code><a class="headerlink" href="#redismodule_replywithbool" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithBool(RedisModuleCtx *ctx, int b);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Reply with a RESP3 Boolean type.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>In RESP3, this is boolean type
In RESP2, it's a string response of "1" and "0" for true and false respectively.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithCallReply"></span></p>
<h3 id="redismodule_replywithcallreply"><code>RedisModule_ReplyWithCallReply</code><a class="headerlink" href="#redismodule_replywithcallreply" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithCallReply(RedisModuleCtx *ctx,
                                   RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply exactly what a Redis command returned us with <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a>.
This function is useful when we use <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> in order to
execute some command, as we want to reply to the client exactly the
same reply we obtained by the command.</p>
<p>Return:
- <code>REDISMODULE_OK</code> on success.
- <code>REDISMODULE_ERR</code> if the given reply is in RESP3 format but the client expects RESP2.
  In case of an error, it's the module writer responsibility to translate the reply
  to RESP2 (or handle it differently by returning an error). Notice that for
  module writer convenience, it is possible to pass <code>0</code> as a parameter to the fmt
  argument of <a href="#RedisModule_Call"><code>RedisModule_Call</code></a> so that the <code>RedisModuleCallReply</code> will return in the same
  protocol (RESP2 or RESP3) as set in the current client's context.</p>
<p><span id="RedisModule_ReplyWithDouble"></span></p>
<h3 id="redismodule_replywithdouble"><code>RedisModule_ReplyWithDouble</code><a class="headerlink" href="#redismodule_replywithdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithDouble(RedisModuleCtx *ctx, double d);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Reply with a RESP3 Double type.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>Send a string reply obtained converting the double 'd' into a bulk string.
This function is basically equivalent to converting a double into
a string into a C buffer, and then calling the function
<a href="#RedisModule_ReplyWithStringBuffer"><code>RedisModule_ReplyWithStringBuffer()</code></a> with the buffer and length.</p>
<p>In RESP3 the string is tagged as a double, while in RESP2 it's just a plain string 
that the user will have to parse.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithBigNumber"></span></p>
<h3 id="redismodule_replywithbignumber"><code>RedisModule_ReplyWithBigNumber</code><a class="headerlink" href="#redismodule_replywithbignumber" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithBigNumber(RedisModuleCtx *ctx,
                                   const char *bignum,
                                   size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Reply with a RESP3 BigNumber type.
Visit <a href="https://github.com/antirez/RESP3/blob/master/spec.md">https://github.com/antirez/RESP3/blob/master/spec.md</a> for more info about RESP3.</p>
<p>In RESP3, this is a string of length <code>len</code> that is tagged as a BigNumber, 
however, it's up to the caller to ensure that it's a valid BigNumber.
In RESP2, this is just a plain bulk string response.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="RedisModule_ReplyWithLongDouble"></span></p>
<h3 id="redismodule_replywithlongdouble"><code>RedisModule_ReplyWithLongDouble</code><a class="headerlink" href="#redismodule_replywithlongdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplyWithLongDouble(RedisModuleCtx *ctx, long double ld);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Send a string reply obtained converting the long double 'ld' into a bulk
string. This function is basically equivalent to converting a long double
into a string into a C buffer, and then calling the function
<a href="#RedisModule_ReplyWithStringBuffer"><code>RedisModule_ReplyWithStringBuffer()</code></a> with the buffer and length.
The double string uses human readable formatting (see
<code>addReplyHumanLongDouble</code> in networking.c).</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="section-commands-replication-api"></span></p>
<h2 id="commands-replication-api">Commands replication API<a class="headerlink" href="#commands-replication-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_Replicate"></span></p>
<h3 id="redismodule_replicate"><code>RedisModule_Replicate</code><a class="headerlink" href="#redismodule_replicate" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_Replicate(RedisModuleCtx *ctx,
                          const char *cmdname,
                          const char *fmt,
                          ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Replicate the specified command and arguments to slaves and AOF, as effect
of execution of the calling command implementation.</p>
<p>The replicated commands are always wrapped into the MULTI/EXEC that
contains all the commands replicated in a given module command
execution. However the commands replicated with <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a>
are the first items, the ones replicated with <a href="#RedisModule_Replicate"><code>RedisModule_Replicate()</code></a>
will all follow before the EXEC.</p>
<p>Modules should try to use one interface or the other.</p>
<p>This command follows exactly the same interface of <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a>,
so a set of format specifiers must be passed, followed by arguments
matching the provided format specifiers.</p>
<p>Please refer to <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> for more information.</p>
<p>Using the special "A" and "R" modifiers, the caller can exclude either
the AOF or the replicas from the propagation of the specified command.
Otherwise, by default, the command will be propagated in both channels.</p>
<h4 id="note-about-calling-this-function-from-a-thread-safe-context">Note about calling this function from a thread safe context:<a class="headerlink" href="#note-about-calling-this-function-from-a-thread-safe-context" title="Permanent link">⚓︎</a></h4>
<p>Normally when you call this function from the callback implementing a
module command, or any other callback provided by the Redis Module API,
Redis will accumulate all the calls to this function in the context of
the callback, and will propagate all the commands wrapped in a MULTI/EXEC
transaction. However when calling this function from a threaded safe context
that can live an undefined amount of time, and can be locked/unlocked in
at will, the behavior is different: MULTI/EXEC wrapper is not emitted
and the command specified is inserted in the AOF and replication stream
immediately.</p>
<h4 id="return-value">Return value<a class="headerlink" href="#return-value" title="Permanent link">⚓︎</a></h4>
<p>The command returns <code>REDISMODULE_ERR</code> if the format specifiers are invalid
or the command name does not belong to a known command.</p>
<p><span id="RedisModule_ReplicateVerbatim"></span></p>
<h3 id="redismodule_replicateverbatim"><code>RedisModule_ReplicateVerbatim</code><a class="headerlink" href="#redismodule_replicateverbatim" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ReplicateVerbatim(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>This function will replicate the command exactly as it was invoked
by the client. Note that this function will not wrap the command into
a MULTI/EXEC stanza, so it should not be mixed with other replication
commands.</p>
<p>Basically this form of replication is useful when you want to propagate
the command to the slaves and AOF file exactly as it was called, since
the command can just be re-executed to deterministically re-create the
new state starting from the old one.</p>
<p>The function always returns <code>REDISMODULE_OK</code>.</p>
<p><span id="section-db-and-key-apis-generic-api"></span></p>
<h2 id="db-and-key-apis-generic-api">DB and Key APIs – Generic API<a class="headerlink" href="#db-and-key-apis-generic-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_GetClientId"></span></p>
<h3 id="redismodule_getclientid"><code>RedisModule_GetClientId</code><a class="headerlink" href="#redismodule_getclientid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>unsigned long long RedisModule_GetClientId(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the ID of the current client calling the currently active module
command. The returned ID has a few guarantees:</p>
<ol>
<li>The ID is different for each different client, so if the same client
   executes a module command multiple times, it can be recognized as
   having the same ID, otherwise the ID will be different.</li>
<li>The ID increases monotonically. Clients connecting to the server later
   are guaranteed to get IDs greater than any past ID previously seen.</li>
</ol>
<p>Valid IDs are from 1 to 2^64 - 1. If 0 is returned it means there is no way
to fetch the ID in the context the function was currently called.</p>
<p>After obtaining the ID, it is possible to check if the command execution
is actually happening in the context of AOF loading, using this macro:</p>
<div class="highlight"><pre><span></span><code> if (RedisModule_IsAOFClient(RedisModule_GetClientId(ctx)) {
     // Handle it differently.
 }
</code></pre></div>
<p><span id="RedisModule_GetClientUserNameById"></span></p>
<h3 id="redismodule_getclientusernamebyid"><code>RedisModule_GetClientUserNameById</code><a class="headerlink" href="#redismodule_getclientusernamebyid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetClientUserNameById(RedisModuleCtx *ctx,
                                                     uint64_t id);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.1</p>
<p>Return the ACL user name used by the client with the specified client ID.
Client ID can be obtained with <a href="#RedisModule_GetClientId"><code>RedisModule_GetClientId()</code></a> API. If the client does not
exist, NULL is returned and errno is set to ENOENT. If the client isn't
using an ACL user, NULL is returned and errno is set to ENOTSUP</p>
<p><span id="RedisModule_GetClientInfoById"></span></p>
<h3 id="redismodule_getclientinfobyid"><code>RedisModule_GetClientInfoById</code><a class="headerlink" href="#redismodule_getclientinfobyid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetClientInfoById(void *ci, uint64_t id);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Return information about the client with the specified ID (that was
previously obtained via the <a href="#RedisModule_GetClientId"><code>RedisModule_GetClientId()</code></a> API). If the
client exists, <code>REDISMODULE_OK</code> is returned, otherwise <code>REDISMODULE_ERR</code>
is returned.</p>
<p>When the client exist and the <code>ci</code> pointer is not NULL, but points to
a structure of type <code>RedisModuleClientInfoV</code>1, previously initialized with
the correct <code>REDISMODULE_CLIENTINFO_INITIALIZER_V1</code>, the structure is populated
with the following fields:</p>
<div class="highlight"><pre><span></span><code> uint64_t flags;         // REDISMODULE_CLIENTINFO_FLAG_*
 uint64_t id;            // Client ID
 char addr[46];          // IPv4 or IPv6 address.
 uint16_t port;          // TCP port.
 uint16_t db;            // Selected DB.
</code></pre></div>
<p>Note: the client ID is useless in the context of this call, since we
      already know, however the same structure could be used in other
      contexts where we don't know the client ID, yet the same structure
      is returned.</p>
<p>With flags having the following meaning:</p>
<div class="highlight"><pre><span></span><code>REDISMODULE_CLIENTINFO_FLAG_SSL          Client using SSL connection.
REDISMODULE_CLIENTINFO_FLAG_PUBSUB       Client in Pub/Sub mode.
REDISMODULE_CLIENTINFO_FLAG_BLOCKED      Client blocked in command.
REDISMODULE_CLIENTINFO_FLAG_TRACKING     Client with keys tracking on.
REDISMODULE_CLIENTINFO_FLAG_UNIXSOCKET   Client using unix domain socket.
REDISMODULE_CLIENTINFO_FLAG_MULTI        Client in MULTI state.
</code></pre></div>
<p>However passing NULL is a way to just check if the client exists in case
we are not interested in any additional information.</p>
<p>This is the correct usage when we want the client info structure
returned:</p>
<div class="highlight"><pre><span></span><code> RedisModuleClientInfo ci = REDISMODULE_CLIENTINFO_INITIALIZER;
 int retval = RedisModule_GetClientInfoById(&amp;ci,client_id);
 if (retval == REDISMODULE_OK) {
     printf(&quot;Address: %s\n&quot;, ci.addr);
 }
</code></pre></div>
<p><span id="RedisModule_GetClientNameById"></span></p>
<h3 id="redismodule_getclientnamebyid"><code>RedisModule_GetClientNameById</code><a class="headerlink" href="#redismodule_getclientnamebyid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetClientNameById(RedisModuleCtx *ctx,
                                                 uint64_t id);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.3</p>
<p>Returns the name of the client connection with the given ID.</p>
<p>If the client ID does not exist or if the client has no name associated with
it, NULL is returned.</p>
<p><span id="RedisModule_SetClientNameById"></span></p>
<h3 id="redismodule_setclientnamebyid"><code>RedisModule_SetClientNameById</code><a class="headerlink" href="#redismodule_setclientnamebyid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetClientNameById(uint64_t id, RedisModuleString *name);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.3</p>
<p>Sets the name of the client with the given ID. This is equivalent to the client calling
<code>CLIENT SETNAME name</code>.</p>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and errno is set as follows:</p>
<ul>
<li>ENOENT if the client does not exist</li>
<li>EINVAL if the name contains invalid characters</li>
</ul>
<p><span id="RedisModule_PublishMessage"></span></p>
<h3 id="redismodule_publishmessage"><code>RedisModule_PublishMessage</code><a class="headerlink" href="#redismodule_publishmessage" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_PublishMessage(RedisModuleCtx *ctx,
                               RedisModuleString *channel,
                               RedisModuleString *message);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Publish a message to subscribers (see PUBLISH command).</p>
<p><span id="RedisModule_PublishMessageShard"></span></p>
<h3 id="redismodule_publishmessageshard"><code>RedisModule_PublishMessageShard</code><a class="headerlink" href="#redismodule_publishmessageshard" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_PublishMessageShard(RedisModuleCtx *ctx,
                                    RedisModuleString *channel,
                                    RedisModuleString *message);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Publish a message to shard-subscribers (see SPUBLISH command).</p>
<p><span id="RedisModule_GetSelectedDb"></span></p>
<h3 id="redismodule_getselecteddb"><code>RedisModule_GetSelectedDb</code><a class="headerlink" href="#redismodule_getselecteddb" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetSelectedDb(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the currently selected DB.</p>
<p><span id="RedisModule_GetContextFlags"></span></p>
<h3 id="redismodule_getcontextflags"><code>RedisModule_GetContextFlags</code><a class="headerlink" href="#redismodule_getcontextflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetContextFlags(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.3</p>
<p>Return the current context's flags. The flags provide information on the
current request context (whether the client is a Lua script or in a MULTI),
and about the Redis instance in general, i.e replication and persistence.</p>
<p>It is possible to call this function even with a NULL context, however
in this case the following flags will not be reported:</p>
<ul>
<li>LUA, MULTI, REPLICATED, DIRTY (see below for more info).</li>
</ul>
<p>Available flags and their meaning:</p>
<ul>
<li>
<p><code>REDISMODULE_CTX_FLAGS_LUA</code>: The command is running in a Lua script</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_MULTI</code>: The command is running inside a transaction</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_REPLICATED</code>: The command was sent over the replication
   link by the MASTER</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_MASTER</code>: The Redis instance is a master</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_SLAVE</code>: The Redis instance is a slave</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_READONLY</code>: The Redis instance is read-only</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_CLUSTER</code>: The Redis instance is in cluster mode</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_AOF</code>: The Redis instance has AOF enabled</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_RDB</code>: The instance has RDB enabled</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_MAXMEMORY</code>:  The instance has Maxmemory set</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_EVICT</code>:  Maxmemory is set and has an eviction
   policy that may delete keys</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_OOM</code>: Redis is out of memory according to the
   maxmemory setting.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_OOM_WARNING</code>: Less than 25% of memory remains before
                                      reaching the maxmemory level.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_LOADING</code>: Server is loading RDB/AOF</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_STALE</code>: No active link with the master.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_CONNECTING</code>: The replica is trying to
                                                connect with the master.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_TRANSFERRING</code>: Master -&gt; Replica RDB
                                                  transfer is in progress.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_REPLICA_IS_ONLINE</code>: The replica has an active link
                                            with its master. This is the
                                            contrary of STALE state.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_ACTIVE_CHILD</code>: There is currently some background
                                       process active (RDB, AUX or module).</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_MULTI_DIRTY</code>: The next EXEC will fail due to dirty
                                      CAS (touched keys).</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_IS_CHILD</code>: Redis is currently running inside
                                   background child process.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_RESP3</code>: Indicate the that client attached to this
                                context is using RESP3.</p>
</li>
<li>
<p><code>REDISMODULE_CTX_FLAGS_SERVER_STARTUP</code>: The Redis instance is starting</p>
</li>
</ul>
<p><span id="RedisModule_AvoidReplicaTraffic"></span></p>
<h3 id="redismodule_avoidreplicatraffic"><code>RedisModule_AvoidReplicaTraffic</code><a class="headerlink" href="#redismodule_avoidreplicatraffic" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_AvoidReplicaTraffic(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Returns true if a client sent the CLIENT PAUSE command to the server or
if Redis Cluster does a manual failover, pausing the clients.
This is needed when we have a master with replicas, and want to write,
without adding further data to the replication channel, that the replicas
replication offset, match the one of the master. When this happens, it is
safe to failover the master without data loss.</p>
<p>However modules may generate traffic by calling <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> with
the "!" flag, or by calling <a href="#RedisModule_Replicate"><code>RedisModule_Replicate()</code></a>, in a context outside
commands execution, for instance in timeout callbacks, threads safe
contexts, and so forth. When modules will generate too much traffic, it
will be hard for the master and replicas offset to match, because there
is more data to send in the replication channel.</p>
<p>So modules may want to try to avoid very heavy background work that has
the effect of creating data to the replication channel, when this function
returns true. This is mostly useful for modules that have background
garbage collection tasks, or that do writes and replicate such writes
periodically in timer callbacks or other periodic callbacks.</p>
<p><span id="RedisModule_SelectDb"></span></p>
<h3 id="redismodule_selectdb"><code>RedisModule_SelectDb</code><a class="headerlink" href="#redismodule_selectdb" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SelectDb(RedisModuleCtx *ctx, int newid);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Change the currently selected DB. Returns an error if the id
is out of range.</p>
<p>Note that the client will retain the currently selected DB even after
the Redis command implemented by the module calling this function
returns.</p>
<p>If the module command wishes to change something in a different DB and
returns back to the original one, it should call <a href="#RedisModule_GetSelectedDb"><code>RedisModule_GetSelectedDb()</code></a>
before in order to restore the old DB number before returning.</p>
<p><span id="RedisModule_KeyExists"></span></p>
<h3 id="redismodule_keyexists"><code>RedisModule_KeyExists</code><a class="headerlink" href="#redismodule_keyexists" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_KeyExists(RedisModuleCtx *ctx, robj *keyname);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Check if a key exists, without affecting its last access time.</p>
<p>This is equivalent to calling <a href="#RedisModule_OpenKey"><code>RedisModule_OpenKey</code></a> with the mode <code>REDISMODULE_READ</code> |
<code>REDISMODULE_OPEN_KEY_NOTOUCH</code>, then checking if NULL was returned and, if not,
calling <a href="#RedisModule_CloseKey"><code>RedisModule_CloseKey</code></a> on the opened key.</p>
<p><span id="RedisModule_OpenKey"></span></p>
<h3 id="redismodule_openkey"><code>RedisModule_OpenKey</code><a class="headerlink" href="#redismodule_openkey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleKey *RedisModule_OpenKey(RedisModuleCtx *ctx,
                                    robj *keyname,
                                    int mode);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return a handle representing a Redis key, so that it is possible
to call other APIs with the key handle as argument to perform
operations on the key.</p>
<p>The return value is the handle representing the key, that must be
closed with <a href="#RedisModule_CloseKey"><code>RedisModule_CloseKey()</code></a>.</p>
<p>If the key does not exist and <code>REDISMODULE_WRITE</code> mode is requested, the handle
is still returned, since it is possible to perform operations on
a yet not existing key (that will be created, for example, after
a list push operation). If the mode is just <code>REDISMODULE_READ</code> instead, and the
key does not exist, NULL is returned. However it is still safe to
call <a href="#RedisModule_CloseKey"><code>RedisModule_CloseKey()</code></a> and <a href="#RedisModule_KeyType"><code>RedisModule_KeyType()</code></a> on a NULL
value.</p>
<p>Extra flags that can be pass to the API under the mode argument:
* <code>REDISMODULE_OPEN_KEY_NOTOUCH</code> - Avoid touching the LRU/LFU of the key when opened.
* <code>REDISMODULE_OPEN_KEY_NONOTIFY</code> - Don't trigger keyspace event on key misses.
* <code>REDISMODULE_OPEN_KEY_NOSTATS</code> - Don't update keyspace hits/misses counters.
* <code>REDISMODULE_OPEN_KEY_NOEXPIRE</code> - Avoid deleting lazy expired keys.
* <code>REDISMODULE_OPEN_KEY_NOEFFECTS</code> - Avoid any effects from fetching the key.</p>
<p><span id="RedisModule_GetOpenKeyModesAll"></span></p>
<h3 id="redismodule_getopenkeymodesall"><code>RedisModule_GetOpenKeyModesAll</code><a class="headerlink" href="#redismodule_getopenkeymodesall" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetOpenKeyModesAll(void);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Returns the full OpenKey modes mask, using the return value
the module can check if a certain set of OpenKey modes are supported
by the redis server version in use.
Example:</p>
<div class="highlight"><pre><span></span><code>   int supportedMode = RedisModule_GetOpenKeyModesAll();
   if (supportedMode &amp; REDISMODULE_OPEN_KEY_NOTOUCH) {
         // REDISMODULE_OPEN_KEY_NOTOUCH is supported
   } else{
         // REDISMODULE_OPEN_KEY_NOTOUCH is not supported
   }
</code></pre></div>
<p><span id="RedisModule_CloseKey"></span></p>
<h3 id="redismodule_closekey"><code>RedisModule_CloseKey</code><a class="headerlink" href="#redismodule_closekey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_CloseKey(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Close a key handle.</p>
<p><span id="RedisModule_KeyType"></span></p>
<h3 id="redismodule_keytype"><code>RedisModule_KeyType</code><a class="headerlink" href="#redismodule_keytype" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_KeyType(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the type of the key. If the key pointer is NULL then
<code>REDISMODULE_KEYTYPE_EMPTY</code> is returned.</p>
<p><span id="RedisModule_ValueLength"></span></p>
<h3 id="redismodule_valuelength"><code>RedisModule_ValueLength</code><a class="headerlink" href="#redismodule_valuelength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_ValueLength(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the length of the value associated with the key.
For strings this is the length of the string. For all the other types
is the number of elements (just counting keys for hashes).</p>
<p>If the key pointer is NULL or the key is empty, zero is returned.</p>
<p><span id="RedisModule_DeleteKey"></span></p>
<h3 id="redismodule_deletekey"><code>RedisModule_DeleteKey</code><a class="headerlink" href="#redismodule_deletekey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DeleteKey(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>If the key is open for writing, remove it, and setup the key to
accept new writes as an empty key (that will be created on demand).
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_UnlinkKey"></span></p>
<h3 id="redismodule_unlinkkey"><code>RedisModule_UnlinkKey</code><a class="headerlink" href="#redismodule_unlinkkey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_UnlinkKey(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.7</p>
<p>If the key is open for writing, unlink it (that is delete it in a
non-blocking way, not reclaiming memory immediately) and setup the key to
accept new writes as an empty key (that will be created on demand).
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_GetExpire"></span></p>
<h3 id="redismodule_getexpire"><code>RedisModule_GetExpire</code><a class="headerlink" href="#redismodule_getexpire" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>mstime_t RedisModule_GetExpire(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the key expire value, as milliseconds of remaining TTL.
If no TTL is associated with the key or if the key is empty,
<code>REDISMODULE_NO_EXPIRE</code> is returned.</p>
<p><span id="RedisModule_SetExpire"></span></p>
<h3 id="redismodule_setexpire"><code>RedisModule_SetExpire</code><a class="headerlink" href="#redismodule_setexpire" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetExpire(RedisModuleKey *key, mstime_t expire);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Set a new expire for the key. If the special expire
<code>REDISMODULE_NO_EXPIRE</code> is set, the expire is cancelled if there was
one (the same as the PERSIST command).</p>
<p>Note that the expire must be provided as a positive integer representing
the number of milliseconds of TTL the key should have.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if
the key was not open for writing or is an empty key.</p>
<p><span id="RedisModule_GetAbsExpire"></span></p>
<h3 id="redismodule_getabsexpire"><code>RedisModule_GetAbsExpire</code><a class="headerlink" href="#redismodule_getabsexpire" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>mstime_t RedisModule_GetAbsExpire(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.2</p>
<p>Return the key expire value, as absolute Unix timestamp.
If no TTL is associated with the key or if the key is empty,
<code>REDISMODULE_NO_EXPIRE</code> is returned.</p>
<p><span id="RedisModule_SetAbsExpire"></span></p>
<h3 id="redismodule_setabsexpire"><code>RedisModule_SetAbsExpire</code><a class="headerlink" href="#redismodule_setabsexpire" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetAbsExpire(RedisModuleKey *key, mstime_t expire);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.2</p>
<p>Set a new expire for the key. If the special expire
<code>REDISMODULE_NO_EXPIRE</code> is set, the expire is cancelled if there was
one (the same as the PERSIST command).</p>
<p>Note that the expire must be provided as a positive integer representing
the absolute Unix timestamp the key should have.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success or <code>REDISMODULE_ERR</code> if
the key was not open for writing or is an empty key.</p>
<p><span id="RedisModule_ResetDataset"></span></p>
<h3 id="redismodule_resetdataset"><code>RedisModule_ResetDataset</code><a class="headerlink" href="#redismodule_resetdataset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ResetDataset(int restart_aof, int async);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Performs similar operation to FLUSHALL, and optionally start a new AOF file (if enabled)
If <code>restart_aof</code> is true, you must make sure the command that triggered this call is not
propagated to the AOF file.
When async is set to true, db contents will be freed by a background thread.</p>
<p><span id="RedisModule_DbSize"></span></p>
<h3 id="redismodule_dbsize"><code>RedisModule_DbSize</code><a class="headerlink" href="#redismodule_dbsize" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>unsigned long long RedisModule_DbSize(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Returns the number of keys in the current db.</p>
<p><span id="RedisModule_RandomKey"></span></p>
<h3 id="redismodule_randomkey"><code>RedisModule_RandomKey</code><a class="headerlink" href="#redismodule_randomkey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_RandomKey(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Returns a name of a random key, or NULL if current db is empty.</p>
<p><span id="RedisModule_GetKeyNameFromOptCtx"></span></p>
<h3 id="redismodule_getkeynamefromoptctx"><code>RedisModule_GetKeyNameFromOptCtx</code><a class="headerlink" href="#redismodule_getkeynamefromoptctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetKeyNameFromOptCtx(RedisModuleKeyOptCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the name of the key currently being processed.</p>
<p><span id="RedisModule_GetToKeyNameFromOptCtx"></span></p>
<h3 id="redismodule_gettokeynamefromoptctx"><code>RedisModule_GetToKeyNameFromOptCtx</code><a class="headerlink" href="#redismodule_gettokeynamefromoptctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetToKeyNameFromOptCtx(RedisModuleKeyOptCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the name of the target key currently being processed.</p>
<p><span id="RedisModule_GetDbIdFromOptCtx"></span></p>
<h3 id="redismodule_getdbidfromoptctx"><code>RedisModule_GetDbIdFromOptCtx</code><a class="headerlink" href="#redismodule_getdbidfromoptctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetDbIdFromOptCtx(RedisModuleKeyOptCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the dbid currently being processed.</p>
<p><span id="RedisModule_GetToDbIdFromOptCtx"></span></p>
<h3 id="redismodule_gettodbidfromoptctx"><code>RedisModule_GetToDbIdFromOptCtx</code><a class="headerlink" href="#redismodule_gettodbidfromoptctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetToDbIdFromOptCtx(RedisModuleKeyOptCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the target dbid currently being processed.</p>
<p><span id="section-key-api-for-string-type"></span></p>
<h2 id="key-api-for-string-type">Key API for String type<a class="headerlink" href="#key-api-for-string-type" title="Permanent link">⚓︎</a></h2>
<p>See also <a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength()</code></a>, which returns the length of a string.</p>
<p><span id="RedisModule_StringSet"></span></p>
<h3 id="redismodule_stringset"><code>RedisModule_StringSet</code><a class="headerlink" href="#redismodule_stringset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringSet(RedisModuleKey *key, RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>If the key is open for writing, set the specified string 'str' as the
value of the key, deleting the old value if any.
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing or there is an active iterator, <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_StringDMA"></span></p>
<h3 id="redismodule_stringdma"><code>RedisModule_StringDMA</code><a class="headerlink" href="#redismodule_stringdma" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>char *RedisModule_StringDMA(RedisModuleKey *key, size_t *len, int mode);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Prepare the key associated string value for DMA access, and returns
a pointer and size (by reference), that the user can use to read or
modify the string in-place accessing it directly via pointer.</p>
<p>The 'mode' is composed by bitwise OR-ing the following flags:</p>
<div class="highlight"><pre><span></span><code>REDISMODULE_READ -- Read access
REDISMODULE_WRITE -- Write access
</code></pre></div>
<p>If the DMA is not requested for writing, the pointer returned should
only be accessed in a read-only fashion.</p>
<p>On error (wrong type) NULL is returned.</p>
<p>DMA access rules:</p>
<ol>
<li>
<p>No other key writing function should be called since the moment
the pointer is obtained, for all the time we want to use DMA access
to read or modify the string.</p>
</li>
<li>
<p>Each time <a href="#RedisModule_StringTruncate"><code>RedisModule_StringTruncate()</code></a> is called, to continue with the DMA
access, <a href="#RedisModule_StringDMA"><code>RedisModule_StringDMA()</code></a> should be called again to re-obtain
a new pointer and length.</p>
</li>
<li>
<p>If the returned pointer is not NULL, but the length is zero, no
byte can be touched (the string is empty, or the key itself is empty)
so a <a href="#RedisModule_StringTruncate"><code>RedisModule_StringTruncate()</code></a> call should be used if there is to enlarge
the string, and later call StringDMA() again to get the pointer.</p>
</li>
</ol>
<p><span id="RedisModule_StringTruncate"></span></p>
<h3 id="redismodule_stringtruncate"><code>RedisModule_StringTruncate</code><a class="headerlink" href="#redismodule_stringtruncate" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StringTruncate(RedisModuleKey *key, size_t newlen);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>If the key is open for writing and is of string type, resize it, padding
with zero bytes if the new length is greater than the old one.</p>
<p>After this call, <a href="#RedisModule_StringDMA"><code>RedisModule_StringDMA()</code></a> must be called again to continue
DMA access with the new pointer.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success, and <code>REDISMODULE_ERR</code> on
error, that is, the key is not open for writing, is not a string
or resizing for more than 512 MB is requested.</p>
<p>If the key is empty, a string key is created with the new string value
unless the new length value requested is zero.</p>
<p><span id="section-key-api-for-list-type"></span></p>
<h2 id="key-api-for-list-type">Key API for List type<a class="headerlink" href="#key-api-for-list-type" title="Permanent link">⚓︎</a></h2>
<p>Many of the list functions access elements by index. Since a list is in
essence a doubly-linked list, accessing elements by index is generally an
O(N) operation. However, if elements are accessed sequentially or with
indices close together, the functions are optimized to seek the index from
the previous index, rather than seeking from the ends of the list.</p>
<p>This enables iteration to be done efficiently using a simple for loop:</p>
<div class="highlight"><pre><span></span><code>long n = RedisModule_ValueLength(key);
for (long i = 0; i &lt; n; i++) {
    RedisModuleString *elem = RedisModule_ListGet(key, i);
    // Do stuff...
}
</code></pre></div>
<p>Note that after modifying a list using <a href="#RedisModule_ListPop"><code>RedisModule_ListPop</code></a>, <a href="#RedisModule_ListSet"><code>RedisModule_ListSet</code></a> or
<a href="#RedisModule_ListInsert"><code>RedisModule_ListInsert</code></a>, the internal iterator is invalidated so the next operation
will require a linear seek.</p>
<p>Modifying a list in any another way, for example using <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a>, while a key
is open will confuse the internal iterator and may cause trouble if the key
is used after such modifications. The key must be reopened in this case.</p>
<p>See also <a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength()</code></a>, which returns the length of a list.</p>
<p><span id="RedisModule_ListPush"></span></p>
<h3 id="redismodule_listpush"><code>RedisModule_ListPush</code><a class="headerlink" href="#redismodule_listpush" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ListPush(RedisModuleKey *key,
                         int where,
                         RedisModuleString *ele);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Push an element into a list, on head or tail depending on 'where' argument
(<code>REDISMODULE_LIST_HEAD</code> or <code>REDISMODULE_LIST_TAIL</code>). If the key refers to an
empty key opened for writing, the key is created. On success, <code>REDISMODULE_OK</code>
is returned. On failure, <code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as
follows:</p>
<ul>
<li>EINVAL if key or ele is NULL.</li>
<li>ENOTSUP if the key is of another type than list.</li>
<li>EBADF if the key is not opened for writing.</li>
</ul>
<p>Note: Before Redis 7.0, <code>errno</code> was not set by this function.</p>
<p><span id="RedisModule_ListPop"></span></p>
<h3 id="redismodule_listpop"><code>RedisModule_ListPop</code><a class="headerlink" href="#redismodule_listpop" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_ListPop(RedisModuleKey *key, int where);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Pop an element from the list, and returns it as a module string object
that the user should be free with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by enabling
automatic memory. The <code>where</code> argument specifies if the element should be
popped from the beginning or the end of the list (<code>REDISMODULE_LIST_HEAD</code> or
<code>REDISMODULE_LIST_TAIL</code>). On failure, the command returns NULL and sets
<code>errno</code> as follows:</p>
<ul>
<li>EINVAL if key is NULL.</li>
<li>ENOTSUP if the key is empty or of another type than list.</li>
<li>EBADF if the key is not opened for writing.</li>
</ul>
<p>Note: Before Redis 7.0, <code>errno</code> was not set by this function.</p>
<p><span id="RedisModule_ListGet"></span></p>
<h3 id="redismodule_listget"><code>RedisModule_ListGet</code><a class="headerlink" href="#redismodule_listget" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_ListGet(RedisModuleKey *key, long index);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the element at index <code>index</code> in the list stored at <code>key</code>, like the
LINDEX command. The element should be free'd using <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or using
automatic memory management.</p>
<p>The index is zero-based, so 0 means the first element, 1 the second element
and so on. Negative indices can be used to designate elements starting at the
tail of the list. Here, -1 means the last element, -2 means the penultimate
and so forth.</p>
<p>When no value is found at the given key and index, NULL is returned and
<code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key is NULL.</li>
<li>ENOTSUP if the key is not a list.</li>
<li>EBADF if the key is not opened for reading.</li>
<li>EDOM if the index is not a valid index in the list.</li>
</ul>
<p><span id="RedisModule_ListSet"></span></p>
<h3 id="redismodule_listset"><code>RedisModule_ListSet</code><a class="headerlink" href="#redismodule_listset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ListSet(RedisModuleKey *key,
                        long index,
                        RedisModuleString *value);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Replaces the element at index <code>index</code> in the list stored at <code>key</code>.</p>
<p>The index is zero-based, so 0 means the first element, 1 the second element
and so on. Negative indices can be used to designate elements starting at the
tail of the list. Here, -1 means the last element, -2 means the penultimate
and so forth.</p>
<p>On success, <code>REDISMODULE_OK</code> is returned. On failure, <code>REDISMODULE_ERR</code> is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key or value is NULL.</li>
<li>ENOTSUP if the key is not a list.</li>
<li>EBADF if the key is not opened for writing.</li>
<li>EDOM if the index is not a valid index in the list.</li>
</ul>
<p><span id="RedisModule_ListInsert"></span></p>
<h3 id="redismodule_listinsert"><code>RedisModule_ListInsert</code><a class="headerlink" href="#redismodule_listinsert" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ListInsert(RedisModuleKey *key,
                           long index,
                           RedisModuleString *value);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Inserts an element at the given index.</p>
<p>The index is zero-based, so 0 means the first element, 1 the second element
and so on. Negative indices can be used to designate elements starting at the
tail of the list. Here, -1 means the last element, -2 means the penultimate
and so forth. The index is the element's index after inserting it.</p>
<p>On success, <code>REDISMODULE_OK</code> is returned. On failure, <code>REDISMODULE_ERR</code> is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key or value is NULL.</li>
<li>ENOTSUP if the key of another type than list.</li>
<li>EBADF if the key is not opened for writing.</li>
<li>EDOM if the index is not a valid index in the list.</li>
</ul>
<p><span id="RedisModule_ListDelete"></span></p>
<h3 id="redismodule_listdelete"><code>RedisModule_ListDelete</code><a class="headerlink" href="#redismodule_listdelete" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ListDelete(RedisModuleKey *key, long index);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Removes an element at the given index. The index is 0-based. A negative index
can also be used, counting from the end of the list.</p>
<p>On success, <code>REDISMODULE_OK</code> is returned. On failure, <code>REDISMODULE_ERR</code> is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key or value is NULL.</li>
<li>ENOTSUP if the key is not a list.</li>
<li>EBADF if the key is not opened for writing.</li>
<li>EDOM if the index is not a valid index in the list.</li>
</ul>
<p><span id="section-key-api-for-sorted-set-type"></span></p>
<h2 id="key-api-for-sorted-set-type">Key API for Sorted Set type<a class="headerlink" href="#key-api-for-sorted-set-type" title="Permanent link">⚓︎</a></h2>
<p>See also <a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength()</code></a>, which returns the length of a sorted set.</p>
<p><span id="RedisModule_ZsetAdd"></span></p>
<h3 id="redismodule_zsetadd"><code>RedisModule_ZsetAdd</code><a class="headerlink" href="#redismodule_zsetadd" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetAdd(RedisModuleKey *key,
                        double score,
                        RedisModuleString *ele,
                        int *flagsptr);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Add a new element into a sorted set, with the specified 'score'.
If the element already exists, the score is updated.</p>
<p>A new sorted set is created at value if the key is an empty open key
setup for writing.</p>
<p>Additional flags can be passed to the function via a pointer, the flags
are both used to receive input and to communicate state when the function
returns. 'flagsptr' can be NULL if no special flags are used.</p>
<p>The input flags are:</p>
<div class="highlight"><pre><span></span><code>REDISMODULE_ZADD_XX: Element must already exist. Do nothing otherwise.
REDISMODULE_ZADD_NX: Element must not exist. Do nothing otherwise.
REDISMODULE_ZADD_GT: If element exists, new score must be greater than the current score. 
                     Do nothing otherwise. Can optionally be combined with XX.
REDISMODULE_ZADD_LT: If element exists, new score must be less than the current score.
                     Do nothing otherwise. Can optionally be combined with XX.
</code></pre></div>
<p>The output flags are:</p>
<div class="highlight"><pre><span></span><code>REDISMODULE_ZADD_ADDED: The new element was added to the sorted set.
REDISMODULE_ZADD_UPDATED: The score of the element was updated.
REDISMODULE_ZADD_NOP: No operation was performed because XX or NX flags.
</code></pre></div>
<p>On success the function returns <code>REDISMODULE_OK</code>. On the following errors
<code>REDISMODULE_ERR</code> is returned:</p>
<ul>
<li>The key was not opened for writing.</li>
<li>The key is of the wrong type.</li>
<li>'score' double value is not a number (NaN).</li>
</ul>
<p><span id="RedisModule_ZsetIncrby"></span></p>
<h3 id="redismodule_zsetincrby"><code>RedisModule_ZsetIncrby</code><a class="headerlink" href="#redismodule_zsetincrby" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetIncrby(RedisModuleKey *key,
                           double score,
                           RedisModuleString *ele,
                           int *flagsptr,
                           double *newscore);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>This function works exactly like <a href="#RedisModule_ZsetAdd"><code>RedisModule_ZsetAdd()</code></a>, but instead of setting
a new score, the score of the existing element is incremented, or if the
element does not already exist, it is added assuming the old score was
zero.</p>
<p>The input and output flags, and the return value, have the same exact
meaning, with the only difference that this function will return
<code>REDISMODULE_ERR</code> even when 'score' is a valid double number, but adding it
to the existing score results into a NaN (not a number) condition.</p>
<p>This function has an additional field 'newscore', if not NULL is filled
with the new score of the element after the increment, if no error
is returned.</p>
<p><span id="RedisModule_ZsetRem"></span></p>
<h3 id="redismodule_zsetrem"><code>RedisModule_ZsetRem</code><a class="headerlink" href="#redismodule_zsetrem" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetRem(RedisModuleKey *key,
                        RedisModuleString *ele,
                        int *deleted);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Remove the specified element from the sorted set.
The function returns <code>REDISMODULE_OK</code> on success, and <code>REDISMODULE_ERR</code>
on one of the following conditions:</p>
<ul>
<li>The key was not opened for writing.</li>
<li>The key is of the wrong type.</li>
</ul>
<p>The return value does NOT indicate the fact the element was really
removed (since it existed) or not, just if the function was executed
with success.</p>
<p>In order to know if the element was removed, the additional argument
'deleted' must be passed, that populates the integer by reference
setting it to 1 or 0 depending on the outcome of the operation.
The 'deleted' argument can be NULL if the caller is not interested
to know if the element was really removed.</p>
<p>Empty keys will be handled correctly by doing nothing.</p>
<p><span id="RedisModule_ZsetScore"></span></p>
<h3 id="redismodule_zsetscore"><code>RedisModule_ZsetScore</code><a class="headerlink" href="#redismodule_zsetscore" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetScore(RedisModuleKey *key,
                          RedisModuleString *ele,
                          double *score);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>On success retrieve the double score associated at the sorted set element
'ele' and returns <code>REDISMODULE_OK</code>. Otherwise <code>REDISMODULE_ERR</code> is returned
to signal one of the following conditions:</p>
<ul>
<li>There is no such element 'ele' in the sorted set.</li>
<li>The key is not a sorted set.</li>
<li>The key is an open empty key.</li>
</ul>
<p><span id="section-key-api-for-sorted-set-iterator"></span></p>
<h2 id="key-api-for-sorted-set-iterator">Key API for Sorted Set iterator<a class="headerlink" href="#key-api-for-sorted-set-iterator" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_ZsetRangeStop"></span></p>
<h3 id="redismodule_zsetrangestop"><code>RedisModule_ZsetRangeStop</code><a class="headerlink" href="#redismodule_zsetrangestop" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ZsetRangeStop(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Stop a sorted set iteration.</p>
<p><span id="RedisModule_ZsetRangeEndReached"></span></p>
<h3 id="redismodule_zsetrangeendreached"><code>RedisModule_ZsetRangeEndReached</code><a class="headerlink" href="#redismodule_zsetrangeendreached" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetRangeEndReached(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the "End of range" flag value to signal the end of the iteration.</p>
<p><span id="RedisModule_ZsetFirstInScoreRange"></span></p>
<h3 id="redismodule_zsetfirstinscorerange"><code>RedisModule_ZsetFirstInScoreRange</code><a class="headerlink" href="#redismodule_zsetfirstinscorerange" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetFirstInScoreRange(RedisModuleKey *key,
                                      double min,
                                      double max,
                                      int minex,
                                      int maxex);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Setup a sorted set iterator seeking the first element in the specified
range. Returns <code>REDISMODULE_OK</code> if the iterator was correctly initialized
otherwise <code>REDISMODULE_ERR</code> is returned in the following conditions:</p>
<ol>
<li>The value stored at key is not a sorted set or the key is empty.</li>
</ol>
<p>The range is specified according to the two double values 'min' and 'max'.
Both can be infinite using the following two macros:</p>
<ul>
<li><code>REDISMODULE_POSITIVE_INFINITE</code> for positive infinite value</li>
<li><code>REDISMODULE_NEGATIVE_INFINITE</code> for negative infinite value</li>
</ul>
<p>'minex' and 'maxex' parameters, if true, respectively setup a range
where the min and max value are exclusive (not included) instead of
inclusive.</p>
<p><span id="RedisModule_ZsetLastInScoreRange"></span></p>
<h3 id="redismodule_zsetlastinscorerange"><code>RedisModule_ZsetLastInScoreRange</code><a class="headerlink" href="#redismodule_zsetlastinscorerange" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetLastInScoreRange(RedisModuleKey *key,
                                     double min,
                                     double max,
                                     int minex,
                                     int maxex);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Exactly like <a href="#RedisModule_ZsetFirstInScoreRange"><code>RedisModule_ZsetFirstInScoreRange()</code></a> but the last element of
the range is selected for the start of the iteration instead.</p>
<p><span id="RedisModule_ZsetFirstInLexRange"></span></p>
<h3 id="redismodule_zsetfirstinlexrange"><code>RedisModule_ZsetFirstInLexRange</code><a class="headerlink" href="#redismodule_zsetfirstinlexrange" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetFirstInLexRange(RedisModuleKey *key,
                                    RedisModuleString *min,
                                    RedisModuleString *max);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Setup a sorted set iterator seeking the first element in the specified
lexicographical range. Returns <code>REDISMODULE_OK</code> if the iterator was correctly
initialized otherwise <code>REDISMODULE_ERR</code> is returned in the
following conditions:</p>
<ol>
<li>The value stored at key is not a sorted set or the key is empty.</li>
<li>The lexicographical range 'min' and 'max' format is invalid.</li>
</ol>
<p>'min' and 'max' should be provided as two <code>RedisModuleString</code> objects
in the same format as the parameters passed to the ZRANGEBYLEX command.
The function does not take ownership of the objects, so they can be released
ASAP after the iterator is setup.</p>
<p><span id="RedisModule_ZsetLastInLexRange"></span></p>
<h3 id="redismodule_zsetlastinlexrange"><code>RedisModule_ZsetLastInLexRange</code><a class="headerlink" href="#redismodule_zsetlastinlexrange" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetLastInLexRange(RedisModuleKey *key,
                                   RedisModuleString *min,
                                   RedisModuleString *max);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Exactly like <a href="#RedisModule_ZsetFirstInLexRange"><code>RedisModule_ZsetFirstInLexRange()</code></a> but the last element of
the range is selected for the start of the iteration instead.</p>
<p><span id="RedisModule_ZsetRangeCurrentElement"></span></p>
<h3 id="redismodule_zsetrangecurrentelement"><code>RedisModule_ZsetRangeCurrentElement</code><a class="headerlink" href="#redismodule_zsetrangecurrentelement" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_ZsetRangeCurrentElement(RedisModuleKey *key,
                                                       double *score);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the current sorted set element of an active sorted set iterator
or NULL if the range specified in the iterator does not include any
element.</p>
<p><span id="RedisModule_ZsetRangeNext"></span></p>
<h3 id="redismodule_zsetrangenext"><code>RedisModule_ZsetRangeNext</code><a class="headerlink" href="#redismodule_zsetrangenext" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetRangeNext(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Go to the next element of the sorted set iterator. Returns 1 if there was
a next element, 0 if we are already at the latest element or the range
does not include any item at all.</p>
<p><span id="RedisModule_ZsetRangePrev"></span></p>
<h3 id="redismodule_zsetrangeprev"><code>RedisModule_ZsetRangePrev</code><a class="headerlink" href="#redismodule_zsetrangeprev" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ZsetRangePrev(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Go to the previous element of the sorted set iterator. Returns 1 if there was
a previous element, 0 if we are already at the first element or the range
does not include any item at all.</p>
<p><span id="section-key-api-for-hash-type"></span></p>
<h2 id="key-api-for-hash-type">Key API for Hash type<a class="headerlink" href="#key-api-for-hash-type" title="Permanent link">⚓︎</a></h2>
<p>See also <a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength()</code></a>, which returns the number of fields in a hash.</p>
<p><span id="RedisModule_HashSet"></span></p>
<h3 id="redismodule_hashset"><code>RedisModule_HashSet</code><a class="headerlink" href="#redismodule_hashset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_HashSet(RedisModuleKey *key, int flags, ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Set the field of the specified hash field to the specified value.
If the key is an empty key open for writing, it is created with an empty
hash value, in order to set the specified field.</p>
<p>The function is variadic and the user must specify pairs of field
names and values, both as <code>RedisModuleString</code> pointers (unless the
CFIELD option is set, see later). At the end of the field/value-ptr pairs,
NULL must be specified as last argument to signal the end of the arguments
in the variadic function.</p>
<p>Example to set the hash argv[1] to the value argv[2]:</p>
<div class="highlight"><pre><span></span><code> RedisModule_HashSet(key,REDISMODULE_HASH_NONE,argv[1],argv[2],NULL);
</code></pre></div>
<p>The function can also be used in order to delete fields (if they exist)
by setting them to the specified value of <code>REDISMODULE_HASH_DELETE</code>:</p>
<div class="highlight"><pre><span></span><code> RedisModule_HashSet(key,REDISMODULE_HASH_NONE,argv[1],
                     REDISMODULE_HASH_DELETE,NULL);
</code></pre></div>
<p>The behavior of the command changes with the specified flags, that can be
set to <code>REDISMODULE_HASH_NONE</code> if no special behavior is needed.</p>
<div class="highlight"><pre><span></span><code>REDISMODULE_HASH_NX: The operation is performed only if the field was not
                     already existing in the hash.
REDISMODULE_HASH_XX: The operation is performed only if the field was
                     already existing, so that a new value could be
                     associated to an existing filed, but no new fields
                     are created.
REDISMODULE_HASH_CFIELDS: The field names passed are null terminated C
                          strings instead of RedisModuleString objects.
REDISMODULE_HASH_COUNT_ALL: Include the number of inserted fields in the
                            returned number, in addition to the number of
                            updated and deleted fields. (Added in Redis
                            6.2.)
</code></pre></div>
<p>Unless NX is specified, the command overwrites the old field value with
the new one.</p>
<p>When using <code>REDISMODULE_HASH_CFIELDS</code>, field names are reported using
normal C strings, so for example to delete the field "foo" the following
code can be used:</p>
<div class="highlight"><pre><span></span><code> RedisModule_HashSet(key,REDISMODULE_HASH_CFIELDS,&quot;foo&quot;,
                     REDISMODULE_HASH_DELETE,NULL);
</code></pre></div>
<p>Return value:</p>
<p>The number of fields existing in the hash prior to the call, which have been
updated (its old value has been replaced by a new value) or deleted. If the
flag <code>REDISMODULE_HASH_COUNT_ALL</code> is set, inserted fields not previously
existing in the hash are also counted.</p>
<p>If the return value is zero, <code>errno</code> is set (since Redis 6.2) as follows:</p>
<ul>
<li>EINVAL if any unknown flags are set or if key is NULL.</li>
<li>ENOTSUP if the key is associated with a non Hash value.</li>
<li>EBADF if the key was not opened for writing.</li>
<li>ENOENT if no fields were counted as described under Return value above.
  This is not actually an error. The return value can be zero if all fields
  were just created and the <code>COUNT_ALL</code> flag was unset, or if changes were held
  back due to the NX and XX flags.</li>
</ul>
<p>NOTICE: The return value semantics of this function are very different
between Redis 6.2 and older versions. Modules that use it should determine
the Redis version and handle it accordingly.</p>
<p><span id="RedisModule_HashGet"></span></p>
<h3 id="redismodule_hashget"><code>RedisModule_HashGet</code><a class="headerlink" href="#redismodule_hashget" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_HashGet(RedisModuleKey *key, int flags, ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Get fields from a hash value. This function is called using a variable
number of arguments, alternating a field name (as a <code>RedisModuleString</code>
pointer) with a pointer to a <code>RedisModuleString</code> pointer, that is set to the
value of the field if the field exists, or NULL if the field does not exist.
At the end of the field/value-ptr pairs, NULL must be specified as last
argument to signal the end of the arguments in the variadic function.</p>
<p>This is an example usage:</p>
<div class="highlight"><pre><span></span><code> RedisModuleString *first, *second;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_NONE,argv[1],&amp;first,
                     argv[2],&amp;second,NULL);
</code></pre></div>
<p>As with <a href="#RedisModule_HashSet"><code>RedisModule_HashSet()</code></a> the behavior of the command can be specified
passing flags different than <code>REDISMODULE_HASH_NONE</code>:</p>
<p><code>REDISMODULE_HASH_CFIELDS</code>: field names as null terminated C strings.</p>
<p><code>REDISMODULE_HASH_EXISTS</code>: instead of setting the value of the field
expecting a <code>RedisModuleString</code> pointer to pointer, the function just
reports if the field exists or not and expects an integer pointer
as the second element of each pair.</p>
<p>Example of <code>REDISMODULE_HASH_CFIELDS</code>:</p>
<div class="highlight"><pre><span></span><code> RedisModuleString *username, *hashedpass;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_CFIELDS,&quot;username&quot;,&amp;username,&quot;hp&quot;,&amp;hashedpass, NULL);
</code></pre></div>
<p>Example of <code>REDISMODULE_HASH_EXISTS</code>:</p>
<div class="highlight"><pre><span></span><code> int exists;
 RedisModule_HashGet(mykey,REDISMODULE_HASH_EXISTS,argv[1],&amp;exists,NULL);
</code></pre></div>
<p>The function returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> if
the key is not a hash value.</p>
<p>Memory management:</p>
<p>The returned <code>RedisModuleString</code> objects should be released with
<a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a>, or by enabling automatic memory management.</p>
<p><span id="section-key-api-for-stream-type"></span></p>
<h2 id="key-api-for-stream-type">Key API for Stream type<a class="headerlink" href="#key-api-for-stream-type" title="Permanent link">⚓︎</a></h2>
<p>For an introduction to streams, see <a href="https://redis.io/topics/streams-intro">https://redis.io/topics/streams-intro</a>.</p>
<p>The type <code>RedisModuleStreamID</code>, which is used in stream functions, is a struct
with two 64-bit fields and is defined as</p>
<div class="highlight"><pre><span></span><code>typedef struct RedisModuleStreamID {
    uint64_t ms;
    uint64_t seq;
} RedisModuleStreamID;
</code></pre></div>
<p>See also <a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength()</code></a>, which returns the length of a stream, and the
conversion functions <a href="#RedisModule_StringToStreamID"><code>RedisModule_StringToStreamID()</code></a> and <a href="#RedisModule_CreateStringFromStreamID"><code>RedisModule_CreateStringFromStreamID()</code></a>.</p>
<p><span id="RedisModule_StreamAdd"></span></p>
<h3 id="redismodule_streamadd"><code>RedisModule_StreamAdd</code><a class="headerlink" href="#redismodule_streamadd" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamAdd(RedisModuleKey *key,
                          int flags,
                          RedisModuleStreamID *id,
                          RedisModuleString **argv,
                          long numfields);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Adds an entry to a stream. Like XADD without trimming.</p>
<ul>
<li><code>key</code>: The key where the stream is (or will be) stored</li>
<li><code>flags</code>: A bit field of</li>
<li><code>REDISMODULE_STREAM_ADD_AUTOID</code>: Assign a stream ID automatically, like
    <code>*</code> in the XADD command.</li>
<li><code>id</code>: If the <code>AUTOID</code> flag is set, this is where the assigned ID is
  returned. Can be NULL if <code>AUTOID</code> is set, if you don't care to receive the
  ID. If <code>AUTOID</code> is not set, this is the requested ID.</li>
<li><code>argv</code>: A pointer to an array of size <code>numfields * 2</code> containing the
  fields and values.</li>
<li><code>numfields</code>: The number of field-value pairs in <code>argv</code>.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> if an entry has been added. On failure,
<code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream</li>
<li>EBADF if the key was not opened for writing</li>
<li>EDOM if the given ID was 0-0 or not greater than all other IDs in the
  stream (only if the AUTOID flag is unset)</li>
<li>EFBIG if the stream has reached the last possible ID</li>
<li>ERANGE if the elements are too large to be stored.</li>
</ul>
<p><span id="RedisModule_StreamDelete"></span></p>
<h3 id="redismodule_streamdelete"><code>RedisModule_StreamDelete</code><a class="headerlink" href="#redismodule_streamdelete" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamDelete(RedisModuleKey *key, RedisModuleStreamID *id);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Deletes an entry from a stream.</p>
<ul>
<li><code>key</code>: A key opened for writing, with no stream iterator started.</li>
<li><code>id</code>: The stream ID of the entry to delete.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
  key is empty</li>
<li>EBADF if the key was not opened for writing or if a stream iterator is
  associated with the key</li>
<li>ENOENT if no entry with the given stream ID exists</li>
</ul>
<p>See also <a href="#RedisModule_StreamIteratorDelete"><code>RedisModule_StreamIteratorDelete()</code></a> for deleting the current entry while
iterating using a stream iterator.</p>
<p><span id="RedisModule_StreamIteratorStart"></span></p>
<h3 id="redismodule_streamiteratorstart"><code>RedisModule_StreamIteratorStart</code><a class="headerlink" href="#redismodule_streamiteratorstart" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamIteratorStart(RedisModuleKey *key,
                                    int flags,
                                    RedisModuleStreamID *start,
                                    RedisModuleStreamID *end);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Sets up a stream iterator.</p>
<ul>
<li><code>key</code>: The stream key opened for reading using <a href="#RedisModule_OpenKey"><code>RedisModule_OpenKey()</code></a>.</li>
<li><code>flags</code>:</li>
<li><code>REDISMODULE_STREAM_ITERATOR_EXCLUSIVE</code>: Don't include <code>start</code> and <code>end</code>
    in the iterated range.</li>
<li><code>REDISMODULE_STREAM_ITERATOR_REVERSE</code>: Iterate in reverse order, starting
    from the <code>end</code> of the range.</li>
<li><code>start</code>: The lower bound of the range. Use NULL for the beginning of the
  stream.</li>
<li><code>end</code>: The upper bound of the range. Use NULL for the end of the stream.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
  key is empty</li>
<li>EBADF if the key was not opened for writing or if a stream iterator is
  already associated with the key</li>
<li>EDOM if <code>start</code> or <code>end</code> is outside the valid range</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> if the key doesn't
refer to a stream or if invalid arguments were given.</p>
<p>The stream IDs are retrieved using <a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID()</code></a> and
for each stream ID, the fields and values are retrieved using
<a href="#RedisModule_StreamIteratorNextField"><code>RedisModule_StreamIteratorNextField()</code></a>. The iterator is freed by calling
<a href="#RedisModule_StreamIteratorStop"><code>RedisModule_StreamIteratorStop()</code></a>.</p>
<p>Example (error handling omitted):</p>
<div class="highlight"><pre><span></span><code>RedisModule_StreamIteratorStart(key, 0, startid_ptr, endid_ptr);
RedisModuleStreamID id;
long numfields;
while (RedisModule_StreamIteratorNextID(key, &amp;id, &amp;numfields) ==
       REDISMODULE_OK) {
    RedisModuleString *field, *value;
    while (RedisModule_StreamIteratorNextField(key, &amp;field, &amp;value) ==
           REDISMODULE_OK) {
        //
        // ... Do stuff ...
        //
        RedisModule_FreeString(ctx, field);
        RedisModule_FreeString(ctx, value);
    }
}
RedisModule_StreamIteratorStop(key);
</code></pre></div>
<p><span id="RedisModule_StreamIteratorStop"></span></p>
<h3 id="redismodule_streamiteratorstop"><code>RedisModule_StreamIteratorStop</code><a class="headerlink" href="#redismodule_streamiteratorstop" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamIteratorStop(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Stops a stream iterator created using <a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart()</code></a> and
reclaims its memory.</p>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
  key is empty</li>
<li>EBADF if the key was not opened for writing or if no stream iterator is
  associated with the key</li>
</ul>
<p><span id="RedisModule_StreamIteratorNextID"></span></p>
<h3 id="redismodule_streamiteratornextid"><code>RedisModule_StreamIteratorNextID</code><a class="headerlink" href="#redismodule_streamiteratornextid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamIteratorNextID(RedisModuleKey *key,
                                     RedisModuleStreamID *id,
                                     long *numfields);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Finds the next stream entry and returns its stream ID and the number of
fields.</p>
<ul>
<li><code>key</code>: Key for which a stream iterator has been started using
  <a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart()</code></a>.</li>
<li><code>id</code>: The stream ID returned. NULL if you don't care.</li>
<li><code>numfields</code>: The number of fields in the found stream entry. NULL if you
  don't care.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> and sets <code>*id</code> and <code>*numfields</code> if an entry was found.
On failure, <code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
  key is empty</li>
<li>EBADF if no stream iterator is associated with the key</li>
<li>ENOENT if there are no more entries in the range of the iterator</li>
</ul>
<p>In practice, if <a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID()</code></a> is called after a successful call
to <a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart()</code></a> and with the same key, it is safe to assume that
an <code>REDISMODULE_ERR</code> return value means that there are no more entries.</p>
<p>Use <a href="#RedisModule_StreamIteratorNextField"><code>RedisModule_StreamIteratorNextField()</code></a> to retrieve the fields and values.
See the example at <a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart()</code></a>.</p>
<p><span id="RedisModule_StreamIteratorNextField"></span></p>
<h3 id="redismodule_streamiteratornextfield"><code>RedisModule_StreamIteratorNextField</code><a class="headerlink" href="#redismodule_streamiteratornextfield" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamIteratorNextField(RedisModuleKey *key,
                                        RedisModuleString **field_ptr,
                                        RedisModuleString **value_ptr);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Retrieves the next field of the current stream ID and its corresponding value
in a stream iteration. This function should be called repeatedly after calling
<a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID()</code></a> to fetch each field-value pair.</p>
<ul>
<li><code>key</code>: Key where a stream iterator has been started.</li>
<li><code>field_ptr</code>: This is where the field is returned.</li>
<li><code>value_ptr</code>: This is where the value is returned.</li>
</ul>
<p>Returns <code>REDISMODULE_OK</code> and points <code>*field_ptr</code> and <code>*value_ptr</code> to freshly
allocated <code>RedisModuleString</code> objects. The string objects are freed
automatically when the callback finishes if automatic memory is enabled. On
failure, <code>REDISMODULE_ERR</code> is returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with a NULL key</li>
<li>ENOTSUP if the key refers to a value of a type other than stream or if the
  key is empty</li>
<li>EBADF if no stream iterator is associated with the key</li>
<li>ENOENT if there are no more fields in the current stream entry</li>
</ul>
<p>In practice, if <a href="#RedisModule_StreamIteratorNextField"><code>RedisModule_StreamIteratorNextField()</code></a> is called after a successful
call to <a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID()</code></a> and with the same key, it is safe to assume
that an <code>REDISMODULE_ERR</code> return value means that there are no more fields.</p>
<p>See the example at <a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart()</code></a>.</p>
<p><span id="RedisModule_StreamIteratorDelete"></span></p>
<h3 id="redismodule_streamiteratordelete"><code>RedisModule_StreamIteratorDelete</code><a class="headerlink" href="#redismodule_streamiteratordelete" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StreamIteratorDelete(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Deletes the current stream entry while iterating.</p>
<p>This function can be called after <a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID()</code></a> or after any
calls to <a href="#RedisModule_StreamIteratorNextField"><code>RedisModule_StreamIteratorNextField()</code></a>.</p>
<p>Returns <code>REDISMODULE_OK</code> on success. On failure, <code>REDISMODULE_ERR</code> is returned
and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if key is NULL</li>
<li>ENOTSUP if the key is empty or is of another type than stream</li>
<li>EBADF if the key is not opened for writing, if no iterator has been started</li>
<li>ENOENT if the iterator has no current stream entry</li>
</ul>
<p><span id="RedisModule_StreamTrimByLength"></span></p>
<h3 id="redismodule_streamtrimbylength"><code>RedisModule_StreamTrimByLength</code><a class="headerlink" href="#redismodule_streamtrimbylength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>long long RedisModule_StreamTrimByLength(RedisModuleKey *key,
                                         int flags,
                                         long long length);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Trim a stream by length, similar to XTRIM with MAXLEN.</p>
<ul>
<li><code>key</code>: Key opened for writing.</li>
<li><code>flags</code>: A bitfield of</li>
<li><code>REDISMODULE_STREAM_TRIM_APPROX</code>: Trim less if it improves performance,
    like XTRIM with <code>~</code>.</li>
<li><code>length</code>: The number of stream entries to keep after trimming.</li>
</ul>
<p>Returns the number of entries deleted. On failure, a negative value is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key is empty or of a type other than stream</li>
<li>EBADF if the key is not opened for writing</li>
</ul>
<p><span id="RedisModule_StreamTrimByID"></span></p>
<h3 id="redismodule_streamtrimbyid"><code>RedisModule_StreamTrimByID</code><a class="headerlink" href="#redismodule_streamtrimbyid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>long long RedisModule_StreamTrimByID(RedisModuleKey *key,
                                     int flags,
                                     RedisModuleStreamID *id);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Trim a stream by ID, similar to XTRIM with MINID.</p>
<ul>
<li><code>key</code>: Key opened for writing.</li>
<li><code>flags</code>: A bitfield of</li>
<li><code>REDISMODULE_STREAM_TRIM_APPROX</code>: Trim less if it improves performance,
    like XTRIM with <code>~</code>.</li>
<li><code>id</code>: The smallest stream ID to keep after trimming.</li>
</ul>
<p>Returns the number of entries deleted. On failure, a negative value is
returned and <code>errno</code> is set as follows:</p>
<ul>
<li>EINVAL if called with invalid arguments</li>
<li>ENOTSUP if the key is empty or of a type other than stream</li>
<li>EBADF if the key is not opened for writing</li>
</ul>
<p><span id="section-calling-redis-commands-from-modules"></span></p>
<h2 id="calling-redis-commands-from-modules">Calling Redis commands from modules<a class="headerlink" href="#calling-redis-commands-from-modules" title="Permanent link">⚓︎</a></h2>
<p><a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> sends a command to Redis. The remaining functions handle the reply.</p>
<p><span id="RedisModule_FreeCallReply"></span></p>
<h3 id="redismodule_freecallreply"><code>RedisModule_FreeCallReply</code><a class="headerlink" href="#redismodule_freecallreply" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeCallReply(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Free a Call reply and all the nested replies it contains if it's an
array.</p>
<p><span id="RedisModule_CallReplyType"></span></p>
<h3 id="redismodule_callreplytype"><code>RedisModule_CallReplyType</code><a class="headerlink" href="#redismodule_callreplytype" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CallReplyType(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the reply type as one of the following:</p>
<ul>
<li><code>REDISMODULE_REPLY_UNKNOWN</code></li>
<li><code>REDISMODULE_REPLY_STRING</code></li>
<li><code>REDISMODULE_REPLY_ERROR</code></li>
<li><code>REDISMODULE_REPLY_INTEGER</code></li>
<li><code>REDISMODULE_REPLY_ARRAY</code></li>
<li><code>REDISMODULE_REPLY_NULL</code></li>
<li><code>REDISMODULE_REPLY_MAP</code></li>
<li><code>REDISMODULE_REPLY_SET</code></li>
<li><code>REDISMODULE_REPLY_BOOL</code></li>
<li><code>REDISMODULE_REPLY_DOUBLE</code></li>
<li><code>REDISMODULE_REPLY_BIG_NUMBER</code></li>
<li><code>REDISMODULE_REPLY_VERBATIM_STRING</code></li>
<li><code>REDISMODULE_REPLY_ATTRIBUTE</code></li>
<li><code>REDISMODULE_REPLY_PROMISE</code></li>
</ul>
<p><span id="RedisModule_CallReplyLength"></span></p>
<h3 id="redismodule_callreplylength"><code>RedisModule_CallReplyLength</code><a class="headerlink" href="#redismodule_callreplylength" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_CallReplyLength(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the reply type length, where applicable.</p>
<p><span id="RedisModule_CallReplyArrayElement"></span></p>
<h3 id="redismodule_callreplyarrayelement"><code>RedisModule_CallReplyArrayElement</code><a class="headerlink" href="#redismodule_callreplyarrayelement" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCallReply *RedisModule_CallReplyArrayElement(RedisModuleCallReply *reply,
                                                        size_t idx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the 'idx'-th nested call reply element of an array reply, or NULL
if the reply type is wrong or the index is out of range.</p>
<p><span id="RedisModule_CallReplyInteger"></span></p>
<h3 id="redismodule_callreplyinteger"><code>RedisModule_CallReplyInteger</code><a class="headerlink" href="#redismodule_callreplyinteger" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>long long RedisModule_CallReplyInteger(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the <code>long long</code> of an integer reply.</p>
<p><span id="RedisModule_CallReplyDouble"></span></p>
<h3 id="redismodule_callreplydouble"><code>RedisModule_CallReplyDouble</code><a class="headerlink" href="#redismodule_callreplydouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>double RedisModule_CallReplyDouble(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the double value of a double reply.</p>
<p><span id="RedisModule_CallReplyBigNumber"></span></p>
<h3 id="redismodule_callreplybignumber"><code>RedisModule_CallReplyBigNumber</code><a class="headerlink" href="#redismodule_callreplybignumber" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_CallReplyBigNumber(RedisModuleCallReply *reply,
                                           size_t *len);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the big number value of a big number reply.</p>
<p><span id="RedisModule_CallReplyVerbatim"></span></p>
<h3 id="redismodule_callreplyverbatim"><code>RedisModule_CallReplyVerbatim</code><a class="headerlink" href="#redismodule_callreplyverbatim" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_CallReplyVerbatim(RedisModuleCallReply *reply,
                                          size_t *len,
                                          const char **format);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the value of a verbatim string reply,
An optional output argument can be given to get verbatim reply format.</p>
<p><span id="RedisModule_CallReplyBool"></span></p>
<h3 id="redismodule_callreplybool"><code>RedisModule_CallReplyBool</code><a class="headerlink" href="#redismodule_callreplybool" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CallReplyBool(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the Boolean value of a Boolean reply.</p>
<p><span id="RedisModule_CallReplySetElement"></span></p>
<h3 id="redismodule_callreplysetelement"><code>RedisModule_CallReplySetElement</code><a class="headerlink" href="#redismodule_callreplysetelement" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCallReply *RedisModule_CallReplySetElement(RedisModuleCallReply *reply,
                                                      size_t idx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the 'idx'-th nested call reply element of a set reply, or NULL
if the reply type is wrong or the index is out of range.</p>
<p><span id="RedisModule_CallReplyMapElement"></span></p>
<h3 id="redismodule_callreplymapelement"><code>RedisModule_CallReplyMapElement</code><a class="headerlink" href="#redismodule_callreplymapelement" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CallReplyMapElement(RedisModuleCallReply *reply,
                                    size_t idx,
                                    RedisModuleCallReply **key,
                                    RedisModuleCallReply **val);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Retrieve the 'idx'-th key and value of a map reply.</p>
<p>Returns:
- <code>REDISMODULE_OK</code> on success.
- <code>REDISMODULE_ERR</code> if idx out of range or if the reply type is wrong.</p>
<p>The <code>key</code> and <code>value</code> arguments are used to return by reference, and may be
NULL if not required.</p>
<p><span id="RedisModule_CallReplyAttribute"></span></p>
<h3 id="redismodule_callreplyattribute"><code>RedisModule_CallReplyAttribute</code><a class="headerlink" href="#redismodule_callreplyattribute" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCallReply *RedisModule_CallReplyAttribute(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Return the attribute of the given reply, or NULL if no attribute exists.</p>
<p><span id="RedisModule_CallReplyAttributeElement"></span></p>
<h3 id="redismodule_callreplyattributeelement"><code>RedisModule_CallReplyAttributeElement</code><a class="headerlink" href="#redismodule_callreplyattributeelement" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CallReplyAttributeElement(RedisModuleCallReply *reply,
                                          size_t idx,
                                          RedisModuleCallReply **key,
                                          RedisModuleCallReply **val);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Retrieve the 'idx'-th key and value of an attribute reply.</p>
<p>Returns:
- <code>REDISMODULE_OK</code> on success.
- <code>REDISMODULE_ERR</code> if idx out of range or if the reply type is wrong.</p>
<p>The <code>key</code> and <code>value</code> arguments are used to return by reference, and may be
NULL if not required.</p>
<p><span id="RedisModule_CallReplyPromiseSetUnblockHandler"></span></p>
<h3 id="redismodule_callreplypromisesetunblockhandler"><code>RedisModule_CallReplyPromiseSetUnblockHandler</code><a class="headerlink" href="#redismodule_callreplypromisesetunblockhandler" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_CallReplyPromiseSetUnblockHandler(RedisModuleCallReply *reply,
                                                   RedisModuleOnUnblocked on_unblock,
                                                   void *private_data);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Set unblock handler (callback and private data) on the given promise <code>RedisModuleCallReply</code>.
The given reply must be of promise type (<code>REDISMODULE_REPLY_PROMISE</code>).</p>
<p><span id="RedisModule_CallReplyPromiseAbort"></span></p>
<h3 id="redismodule_callreplypromiseabort"><code>RedisModule_CallReplyPromiseAbort</code><a class="headerlink" href="#redismodule_callreplypromiseabort" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CallReplyPromiseAbort(RedisModuleCallReply *reply,
                                      void **private_data);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Abort the execution of a given promise <code>RedisModuleCallReply</code>.
return <code>REDMODULE_OK</code> in case the abort was done successfully and <code>REDISMODULE_ERR</code>
if its not possible to abort the execution (execution already finished).
In case the execution was aborted (<code>REDMODULE_OK</code> was returned), the <code>private_data</code> out parameter
will be set with the value of the private data that was given on '<a href="#RedisModule_CallReplyPromiseSetUnblockHandler"><code>RedisModule_CallReplyPromiseSetUnblockHandler</code></a>'
so the caller will be able to release the private data.</p>
<p>If the execution was aborted successfully, it is promised that the unblock handler will not be called.
That said, it is possible that the abort operation will successes but the operation will still continue.
This can happened if, for example, a module implements some blocking command and does not respect the
disconnect callback. For pure Redis commands this can not happened.</p>
<p><span id="RedisModule_CallReplyStringPtr"></span></p>
<h3 id="redismodule_callreplystringptr"><code>RedisModule_CallReplyStringPtr</code><a class="headerlink" href="#redismodule_callreplystringptr" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_CallReplyStringPtr(RedisModuleCallReply *reply,
                                           size_t *len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return the pointer and length of a string or error reply.</p>
<p><span id="RedisModule_CreateStringFromCallReply"></span></p>
<h3 id="redismodule_createstringfromcallreply"><code>RedisModule_CreateStringFromCallReply</code><a class="headerlink" href="#redismodule_createstringfromcallreply" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CreateStringFromCallReply(RedisModuleCallReply *reply);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return a new string object from a call reply of type string, error or
integer. Otherwise (wrong reply type) return NULL.</p>
<p><span id="RedisModule_SetContextUser"></span></p>
<h3 id="redismodule_setcontextuser"><code>RedisModule_SetContextUser</code><a class="headerlink" href="#redismodule_setcontextuser" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SetContextUser(RedisModuleCtx *ctx,
                                const RedisModuleUser *user);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.6</p>
<p>Modifies the user that <a href="#RedisModule_Call"><code>RedisModule_Call</code></a> will use (e.g. for ACL checks)</p>
<p><span id="RedisModule_Call"></span></p>
<h3 id="redismodule_call"><code>RedisModule_Call</code><a class="headerlink" href="#redismodule_call" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCallReply *RedisModule_Call(RedisModuleCtx *ctx,
                                       const char *cmdname,
                                       const char *fmt,
                                       ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Exported API to call any Redis command from modules.</p>
<ul>
<li><strong>cmdname</strong>: The Redis command to call.</li>
<li>
<p><strong>fmt</strong>: A format specifier string for the command's arguments. Each
  of the arguments should be specified by a valid type specification. The
  format specifier can also contain the modifiers <code>!</code>, <code>A</code>, <code>3</code> and <code>R</code> which
  don't have a corresponding argument.</p>
<ul>
<li><code>b</code> -- The argument is a buffer and is immediately followed by another
         argument that is the buffer's length.</li>
<li><code>c</code> -- The argument is a pointer to a plain C string (null-terminated).</li>
<li><code>l</code> -- The argument is a <code>long long</code> integer.</li>
<li><code>s</code> -- The argument is a RedisModuleString.</li>
<li><code>v</code> -- The argument(s) is a vector of RedisModuleString.</li>
<li><code>!</code> -- Sends the Redis command and its arguments to replicas and AOF.</li>
<li><code>A</code> -- Suppress AOF propagation, send only to replicas (requires <code>!</code>).</li>
<li><code>R</code> -- Suppress replicas propagation, send only to AOF (requires <code>!</code>).</li>
<li><code>3</code> -- Return a RESP3 reply. This will change the command reply.
         e.g., HGETALL returns a map instead of a flat array.</li>
<li><code>0</code> -- Return the reply in auto mode, i.e. the reply format will be the
         same as the client attached to the given RedisModuleCtx. This will
         probably used when you want to pass the reply directly to the client.</li>
<li><code>C</code> -- Run a command as the user attached to the context.
         User is either attached automatically via the client that directly
         issued the command and created the context or via RedisModule_SetContextUser.
         If the context is not directly created by an issued command (such as a
         background context and no user was set on it via RedisModule_SetContextUser,
         RedisModule_Call will fail.
         Checks if the command can be executed according to ACL rules and causes
         the command to run as the determined user, so that any future user
         dependent activity, such as ACL checks within scripts will proceed as
         expected.
         Otherwise, the command will run as the Redis unrestricted user.</li>
<li><code>S</code> -- Run the command in a script mode, this means that it will raise
         an error if a command which are not allowed inside a script
         (flagged with the <code>deny-script</code> flag) is invoked (like SHUTDOWN).
         In addition, on script mode, write commands are not allowed if there are
         not enough good replicas (as configured with <code>min-replicas-to-write</code>)
         or when the server is unable to persist to the disk.</li>
<li><code>W</code> -- Do not allow to run any write command (flagged with the <code>write</code> flag).</li>
<li><code>M</code> -- Do not allow <code>deny-oom</code> flagged commands when over the memory limit.</li>
<li><code>E</code> -- Return error as RedisModuleCallReply. If there is an error before
         invoking the command, the error is returned using errno mechanism.
         This flag allows to get the error also as an error CallReply with
         relevant error message.</li>
<li>'D' -- A "Dry Run" mode. Return before executing the underlying call().
         If everything succeeded, it will return with a NULL, otherwise it will
         return with a CallReply object denoting the error, as if it was called with
         the 'E' code.</li>
<li>'K' -- Allow running blocking commands. If enabled and the command gets blocked, a
         special REDISMODULE_REPLY_PROMISE will be returned. This reply type
         indicates that the command was blocked and the reply will be given asynchronously.
         The module can use this reply object to set a handler which will be called when
         the command gets unblocked using RedisModule_CallReplyPromiseSetUnblockHandler.
         The handler must be set immediately after the command invocation (without releasing
         the Redis lock in between). If the handler is not set, the blocking command will
         still continue its execution but the reply will be ignored (fire and forget),
         notice that this is dangerous in case of role change, as explained below.
         The module can use RedisModule_CallReplyPromiseAbort to abort the command invocation
         if it was not yet finished (see RedisModule_CallReplyPromiseAbort documentation for more
         details). It is also the module's responsibility to abort the execution on role change, either by using
         server event (to get notified when the instance becomes a replica) or relying on the disconnect
         callback of the original client. Failing to do so can result in a write operation on a replica.
         Unlike other call replies, promise call reply <strong>must</strong> be freed while the Redis GIL is locked.
         Notice that on unblocking, the only promise is that the unblock handler will be called,
         If the blocking RedisModule_Call caused the module to also block some real client (using RedisModule_BlockClient),
         it is the module responsibility to unblock this client on the unblock handler.
         On the unblock handler it is only allowed to perform the following:
         * Calling additional Redis commands using RedisModule_Call
         * Open keys using RedisModule_OpenKey
         * Replicate data to the replica or AOF<div class="highlight"><pre><span></span><code> Specifically, it is not allowed to call any Redis module API which are client related such as:
 * RedisModule_Reply* API&#39;s
 * RedisModule_BlockClient
 * RedisModule_GetCurrentUserName
</code></pre></div>
</li>
</ul>
</li>
<li>
<p><strong>...</strong>: The actual arguments to the Redis command.</p>
</li>
</ul>
<p>On success a <code>RedisModuleCallReply</code> object is returned, otherwise
NULL is returned and errno is set to the following values:</p>
<ul>
<li>EBADF: wrong format specifier.</li>
<li>EINVAL: wrong command arity.</li>
<li>ENOENT: command does not exist.</li>
<li>EPERM: operation in Cluster instance with key in non local slot.</li>
<li>EROFS: operation in Cluster instance when a write command is sent
         in a readonly state.</li>
<li>ENETDOWN: operation in Cluster instance when cluster is down.</li>
<li>ENOTSUP: No ACL user for the specified module context</li>
<li>EACCES: Command cannot be executed, according to ACL rules</li>
<li>ENOSPC: Write or deny-oom command is not allowed</li>
<li>ESPIPE: Command not allowed on script mode</li>
</ul>
<p>Example code fragment:</p>
<div class="highlight"><pre><span></span><code> reply = RedisModule_Call(ctx,&quot;INCRBY&quot;,&quot;sc&quot;,argv[1],&quot;10&quot;);
 if (RedisModule_CallReplyType(reply) == REDISMODULE_REPLY_INTEGER) {
   long long myval = RedisModule_CallReplyInteger(reply);
   // Do something with myval.
 }
</code></pre></div>
<p>This API is documented here: <a href="https://redis.io/topics/modules-intro">https://redis.io/topics/modules-intro</a></p>
<p><span id="RedisModule_CallReplyProto"></span></p>
<h3 id="redismodule_callreplyproto"><code>RedisModule_CallReplyProto</code><a class="headerlink" href="#redismodule_callreplyproto" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_CallReplyProto(RedisModuleCallReply *reply,
                                       size_t *len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return a pointer, and a length, to the protocol returned by the command
that returned the reply object.</p>
<p><span id="section-modules-data-types"></span></p>
<h2 id="modules-data-types">Modules data types<a class="headerlink" href="#modules-data-types" title="Permanent link">⚓︎</a></h2>
<p>When String DMA or using existing data structures is not enough, it is
possible to create new data types from scratch and export them to
Redis. The module must provide a set of callbacks for handling the
new values exported (for example in order to provide RDB saving/loading,
AOF rewrite, and so forth). In this section we define this API.</p>
<p><span id="RedisModule_CreateDataType"></span></p>
<h3 id="redismodule_createdatatype"><code>RedisModule_CreateDataType</code><a class="headerlink" href="#redismodule_createdatatype" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>moduleType *RedisModule_CreateDataType(RedisModuleCtx *ctx,
                                       const char *name,
                                       int encver,
                                       void *typemethods_ptr);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Register a new data type exported by the module. The parameters are the
following. Please for in depth documentation check the modules API
documentation, especially <a href="https://redis.io/topics/modules-native-types">https://redis.io/topics/modules-native-types</a>.</p>
<ul>
<li><strong>name</strong>: A 9 characters data type name that MUST be unique in the Redis
  Modules ecosystem. Be creative... and there will be no collisions. Use
  the charset A-Z a-z 9-0, plus the two "-_" characters. A good
  idea is to use, for example <code>&lt;typename&gt;-&lt;vendor&gt;</code>. For example
  "tree-AntZ" may mean "Tree data structure by @antirez". To use both
  lower case and upper case letters helps in order to prevent collisions.</li>
<li>
<p><strong>encver</strong>: Encoding version, which is, the version of the serialization
  that a module used in order to persist data. As long as the "name"
  matches, the RDB loading will be dispatched to the type callbacks
  whatever 'encver' is used, however the module can understand if
  the encoding it must load are of an older version of the module.
  For example the module "tree-AntZ" initially used encver=0. Later
  after an upgrade, it started to serialize data in a different format
  and to register the type with encver=1. However this module may
  still load old data produced by an older version if the <code>rdb_load</code>
  callback is able to check the encver value and act accordingly.
  The encver must be a positive value between 0 and 1023.</p>
</li>
<li>
<p><strong>typemethods_ptr</strong> is a pointer to a <code>RedisModuleTypeMethods</code> structure
  that should be populated with the methods callbacks and structure
  version, like in the following example:</p>
<div class="highlight"><pre><span></span><code>RedisModuleTypeMethods tm = {
    .version = REDISMODULE_TYPE_METHOD_VERSION,
    .rdb_load = myType_RDBLoadCallBack,
    .rdb_save = myType_RDBSaveCallBack,
    .aof_rewrite = myType_AOFRewriteCallBack,
    .free = myType_FreeCallBack,

    // Optional fields
    .digest = myType_DigestCallBack,
    .mem_usage = myType_MemUsageCallBack,
    .aux_load = myType_AuxRDBLoadCallBack,
    .aux_save = myType_AuxRDBSaveCallBack,
    .free_effort = myType_FreeEffortCallBack,
    .unlink = myType_UnlinkCallBack,
    .copy = myType_CopyCallback,
    .defrag = myType_DefragCallback

    // Enhanced optional fields
    .mem_usage2 = myType_MemUsageCallBack2,
    .free_effort2 = myType_FreeEffortCallBack2,
    .unlink2 = myType_UnlinkCallBack2,
    .copy2 = myType_CopyCallback2,
}
</code></pre></div>
</li>
<li>
<p><strong>rdb_load</strong>: A callback function pointer that loads data from RDB files.</p>
</li>
<li><strong>rdb_save</strong>: A callback function pointer that saves data to RDB files.</li>
<li><strong>aof_rewrite</strong>: A callback function pointer that rewrites data as commands.</li>
<li><strong>digest</strong>: A callback function pointer that is used for <code>DEBUG DIGEST</code>.</li>
<li><strong>free</strong>: A callback function pointer that can free a type value.</li>
<li><strong>aux_save</strong>: A callback function pointer that saves out of keyspace data to RDB files.
  'when' argument is either <code>REDISMODULE_AUX_BEFORE_RDB</code> or <code>REDISMODULE_AUX_AFTER_RDB</code>.</li>
<li><strong>aux_load</strong>: A callback function pointer that loads out of keyspace data from RDB files.
  Similar to <code>aux_save</code>, returns <code>REDISMODULE_OK</code> on success, and ERR otherwise.</li>
<li><strong>free_effort</strong>: A callback function pointer that used to determine whether the module's
  memory needs to be lazy reclaimed. The module should return the complexity involved by
  freeing the value. for example: how many pointers are gonna be freed. Note that if it 
  returns 0, we'll always do an async free.</li>
<li><strong>unlink</strong>: A callback function pointer that used to notifies the module that the key has 
  been removed from the DB by redis, and may soon be freed by a background thread. Note that 
  it won't be called on FLUSHALL/FLUSHDB (both sync and async), and the module can use the 
  <code>RedisModuleEvent_FlushDB</code> to hook into that.</li>
<li>
<p><strong>copy</strong>: A callback function pointer that is used to make a copy of the specified key.
  The module is expected to perform a deep copy of the specified value and return it.
  In addition, hints about the names of the source and destination keys is provided.
  A NULL return value is considered an error and the copy operation fails.
  Note: if the target key exists and is being overwritten, the copy callback will be
  called first, followed by a free callback to the value that is being replaced.</p>
</li>
<li>
<p><strong>defrag</strong>: A callback function pointer that is used to request the module to defrag
  a key. The module should then iterate pointers and call the relevant <code>RedisModule_Defrag*()</code>
  functions to defragment pointers or complex types. The module should continue
  iterating as long as <a href="#RedisModule_DefragShouldStop"><code>RedisModule_DefragShouldStop()</code></a> returns a zero value, and return a
  zero value if finished or non-zero value if more work is left to be done. If more work
  needs to be done, <a href="#RedisModule_DefragCursorSet"><code>RedisModule_DefragCursorSet()</code></a> and <a href="#RedisModule_DefragCursorGet"><code>RedisModule_DefragCursorGet()</code></a> can be used to track
  this work across different calls.
  Normally, the defrag mechanism invokes the callback without a time limit, so
  <a href="#RedisModule_DefragShouldStop"><code>RedisModule_DefragShouldStop()</code></a> always returns zero. The "late defrag" mechanism which has
  a time limit and provides cursor support is used only for keys that are determined
  to have significant internal complexity. To determine this, the defrag mechanism
  uses the <code>free_effort</code> callback and the 'active-defrag-max-scan-fields' config directive.
  NOTE: The value is passed as a <code>void**</code> and the function is expected to update the
  pointer if the top-level value pointer is defragmented and consequently changes.</p>
</li>
<li>
<p><strong>mem_usage2</strong>: Similar to <code>mem_usage</code>, but provides the <code>RedisModuleKeyOptCtx</code> parameter
  so that meta information such as key name and db id can be obtained, and
  the <code>sample_size</code> for size estimation (see MEMORY USAGE command).</p>
</li>
<li><strong>free_effort2</strong>: Similar to <code>free_effort</code>, but provides the <code>RedisModuleKeyOptCtx</code> parameter
  so that meta information such as key name and db id can be obtained.</li>
<li><strong>unlink2</strong>: Similar to <code>unlink</code>, but provides the <code>RedisModuleKeyOptCtx</code> parameter
  so that meta information such as key name and db id can be obtained.</li>
<li><strong>copy2</strong>: Similar to <code>copy</code>, but provides the <code>RedisModuleKeyOptCtx</code> parameter
  so that meta information such as key names and db ids can be obtained.</li>
<li><strong>aux_save2</strong>: Similar to <code>aux_save</code>, but with small semantic change, if the module
  saves nothing on this callback then no data about this aux field will be written to the
  RDB and it will be possible to load the RDB even if the module is not loaded.</li>
</ul>
<p>Note: the module name "AAAAAAAAA" is reserved and produces an error, it
happens to be pretty lame as well.</p>
<p>If <a href="#RedisModule_CreateDataType"><code>RedisModule_CreateDataType()</code></a> is called outside of <code>RedisModule_OnLoad()</code> function,
there is already a module registering a type with the same name,
or if the module name or encver is invalid, NULL is returned.
Otherwise the new type is registered into Redis, and a reference of
type <code>RedisModuleType</code> is returned: the caller of the function should store
this reference into a global variable to make future use of it in the
modules type API, since a single module may register multiple types.
Example code fragment:</p>
<div class="highlight"><pre><span></span><code> static RedisModuleType *BalancedTreeType;

 int RedisModule_OnLoad(RedisModuleCtx *ctx) {
     // some code here ...
     BalancedTreeType = RedisModule_CreateDataType(...);
 }
</code></pre></div>
<p><span id="RedisModule_ModuleTypeSetValue"></span></p>
<h3 id="redismodule_moduletypesetvalue"><code>RedisModule_ModuleTypeSetValue</code><a class="headerlink" href="#redismodule_moduletypesetvalue" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ModuleTypeSetValue(RedisModuleKey *key,
                                   moduleType *mt,
                                   void *value);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>If the key is open for writing, set the specified module type object
as the value of the key, deleting the old value if any.
On success <code>REDISMODULE_OK</code> is returned. If the key is not open for
writing or there is an active iterator, <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_ModuleTypeGetType"></span></p>
<h3 id="redismodule_moduletypegettype"><code>RedisModule_ModuleTypeGetType</code><a class="headerlink" href="#redismodule_moduletypegettype" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>moduleType *RedisModule_ModuleTypeGetType(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Assuming <a href="#RedisModule_KeyType"><code>RedisModule_KeyType()</code></a> returned <code>REDISMODULE_KEYTYPE_MODULE</code> on
the key, returns the module type pointer of the value stored at key.</p>
<p>If the key is NULL, is not associated with a module type, or is empty,
then NULL is returned instead.</p>
<p><span id="RedisModule_ModuleTypeGetValue"></span></p>
<h3 id="redismodule_moduletypegetvalue"><code>RedisModule_ModuleTypeGetValue</code><a class="headerlink" href="#redismodule_moduletypegetvalue" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_ModuleTypeGetValue(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Assuming <a href="#RedisModule_KeyType"><code>RedisModule_KeyType()</code></a> returned <code>REDISMODULE_KEYTYPE_MODULE</code> on
the key, returns the module type low-level value stored at key, as
it was set by the user via <a href="#RedisModule_ModuleTypeSetValue"><code>RedisModule_ModuleTypeSetValue()</code></a>.</p>
<p>If the key is NULL, is not associated with a module type, or is empty,
then NULL is returned instead.</p>
<p><span id="section-rdb-loading-and-saving-functions"></span></p>
<h2 id="rdb-loading-and-saving-functions">RDB loading and saving functions<a class="headerlink" href="#rdb-loading-and-saving-functions" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_IsIOError"></span></p>
<h3 id="redismodule_isioerror"><code>RedisModule_IsIOError</code><a class="headerlink" href="#redismodule_isioerror" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsIOError(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Returns true if any previous IO API failed.
for <code>Load*</code> APIs the <code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code> flag must be set with
<a href="#RedisModule_SetModuleOptions"><code>RedisModule_SetModuleOptions</code></a> first.</p>
<p><span id="RedisModule_SaveUnsigned"></span></p>
<h3 id="redismodule_saveunsigned"><code>RedisModule_SaveUnsigned</code><a class="headerlink" href="#redismodule_saveunsigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveUnsigned(RedisModuleIO *io, uint64_t value);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Save an unsigned 64 bit value into the RDB file. This function should only
be called in the context of the <code>rdb_save</code> method of modules implementing new
data types.</p>
<p><span id="RedisModule_LoadUnsigned"></span></p>
<h3 id="redismodule_loadunsigned"><code>RedisModule_LoadUnsigned</code><a class="headerlink" href="#redismodule_loadunsigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>uint64_t RedisModule_LoadUnsigned(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Load an unsigned 64 bit value from the RDB file. This function should only
be called in the context of the <code>rdb_load</code> method of modules implementing
new data types.</p>
<p><span id="RedisModule_SaveSigned"></span></p>
<h3 id="redismodule_savesigned"><code>RedisModule_SaveSigned</code><a class="headerlink" href="#redismodule_savesigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveSigned(RedisModuleIO *io, int64_t value);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_SaveUnsigned"><code>RedisModule_SaveUnsigned()</code></a> but for signed 64 bit values.</p>
<p><span id="RedisModule_LoadSigned"></span></p>
<h3 id="redismodule_loadsigned"><code>RedisModule_LoadSigned</code><a class="headerlink" href="#redismodule_loadsigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int64_t RedisModule_LoadSigned(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_LoadUnsigned"><code>RedisModule_LoadUnsigned()</code></a> but for signed 64 bit values.</p>
<p><span id="RedisModule_SaveString"></span></p>
<h3 id="redismodule_savestring"><code>RedisModule_SaveString</code><a class="headerlink" href="#redismodule_savestring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveString(RedisModuleIO *io, RedisModuleString *s);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module type, saves a
string into the RDB file taking as input a <code>RedisModuleString</code>.</p>
<p>The string can be later loaded with <a href="#RedisModule_LoadString"><code>RedisModule_LoadString()</code></a> or
other Load family functions expecting a serialized string inside
the RDB file.</p>
<p><span id="RedisModule_SaveStringBuffer"></span></p>
<h3 id="redismodule_savestringbuffer"><code>RedisModule_SaveStringBuffer</code><a class="headerlink" href="#redismodule_savestringbuffer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveStringBuffer(RedisModuleIO *io,
                                  const char *str,
                                  size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_SaveString"><code>RedisModule_SaveString()</code></a> but takes a raw C pointer and length
as input.</p>
<p><span id="RedisModule_LoadString"></span></p>
<h3 id="redismodule_loadstring"><code>RedisModule_LoadString</code><a class="headerlink" href="#redismodule_loadstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_LoadString(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_load</code> method of a module data type, loads a string
from the RDB file, that was previously saved with <a href="#RedisModule_SaveString"><code>RedisModule_SaveString()</code></a>
functions family.</p>
<p>The returned string is a newly allocated <code>RedisModuleString</code> object, and
the user should at some point free it with a call to <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a>.</p>
<p>If the data structure does not store strings as <code>RedisModuleString</code> objects,
the similar function <a href="#RedisModule_LoadStringBuffer"><code>RedisModule_LoadStringBuffer()</code></a> could be used instead.</p>
<p><span id="RedisModule_LoadStringBuffer"></span></p>
<h3 id="redismodule_loadstringbuffer"><code>RedisModule_LoadStringBuffer</code><a class="headerlink" href="#redismodule_loadstringbuffer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>char *RedisModule_LoadStringBuffer(RedisModuleIO *io, size_t *lenptr);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_LoadString"><code>RedisModule_LoadString()</code></a> but returns a heap allocated string that
was allocated with <a href="#RedisModule_Alloc"><code>RedisModule_Alloc()</code></a>, and can be resized or freed with
<a href="#RedisModule_Realloc"><code>RedisModule_Realloc()</code></a> or <a href="#RedisModule_Free"><code>RedisModule_Free()</code></a>.</p>
<p>The size of the string is stored at '*lenptr' if not NULL.
The returned string is not automatically NULL terminated, it is loaded
exactly as it was stored inside the RDB file.</p>
<p><span id="RedisModule_SaveDouble"></span></p>
<h3 id="redismodule_savedouble"><code>RedisModule_SaveDouble</code><a class="headerlink" href="#redismodule_savedouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveDouble(RedisModuleIO *io, double value);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, saves a double
value to the RDB file. The double can be a valid number, a NaN or infinity.
It is possible to load back the value with <a href="#RedisModule_LoadDouble"><code>RedisModule_LoadDouble()</code></a>.</p>
<p><span id="RedisModule_LoadDouble"></span></p>
<h3 id="redismodule_loaddouble"><code>RedisModule_LoadDouble</code><a class="headerlink" href="#redismodule_loaddouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>double RedisModule_LoadDouble(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
double value saved by <a href="#RedisModule_SaveDouble"><code>RedisModule_SaveDouble()</code></a>.</p>
<p><span id="RedisModule_SaveFloat"></span></p>
<h3 id="redismodule_savefloat"><code>RedisModule_SaveFloat</code><a class="headerlink" href="#redismodule_savefloat" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveFloat(RedisModuleIO *io, float value);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, saves a float
value to the RDB file. The float can be a valid number, a NaN or infinity.
It is possible to load back the value with <a href="#RedisModule_LoadFloat"><code>RedisModule_LoadFloat()</code></a>.</p>
<p><span id="RedisModule_LoadFloat"></span></p>
<h3 id="redismodule_loadfloat"><code>RedisModule_LoadFloat</code><a class="headerlink" href="#redismodule_loadfloat" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>float RedisModule_LoadFloat(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
float value saved by <a href="#RedisModule_SaveFloat"><code>RedisModule_SaveFloat()</code></a>.</p>
<p><span id="RedisModule_SaveLongDouble"></span></p>
<h3 id="redismodule_savelongdouble"><code>RedisModule_SaveLongDouble</code><a class="headerlink" href="#redismodule_savelongdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SaveLongDouble(RedisModuleIO *io, long double value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, saves a long double
value to the RDB file. The double can be a valid number, a NaN or infinity.
It is possible to load back the value with <a href="#RedisModule_LoadLongDouble"><code>RedisModule_LoadLongDouble()</code></a>.</p>
<p><span id="RedisModule_LoadLongDouble"></span></p>
<h3 id="redismodule_loadlongdouble"><code>RedisModule_LoadLongDouble</code><a class="headerlink" href="#redismodule_loadlongdouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>long double RedisModule_LoadLongDouble(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>In the context of the <code>rdb_save</code> method of a module data type, loads back the
long double value saved by <a href="#RedisModule_SaveLongDouble"><code>RedisModule_SaveLongDouble()</code></a>.</p>
<p><span id="section-key-digest-api-debug-digest-interface-for-modules-types"></span></p>
<h2 id="key-digest-api-debug-digest-interface-for-modules-types">Key digest API (DEBUG DIGEST interface for modules types)<a class="headerlink" href="#key-digest-api-debug-digest-interface-for-modules-types" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_DigestAddStringBuffer"></span></p>
<h3 id="redismodule_digestaddstringbuffer"><code>RedisModule_DigestAddStringBuffer</code><a class="headerlink" href="#redismodule_digestaddstringbuffer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_DigestAddStringBuffer(RedisModuleDigest *md,
                                       const char *ele,
                                       size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Add a new element to the digest. This function can be called multiple times
one element after the other, for all the elements that constitute a given
data structure. The function call must be followed by the call to
<a href="#RedisModule_DigestEndSequence"><code>RedisModule_DigestEndSequence</code></a> eventually, when all the elements that are
always in a given order are added. See the Redis Modules data types
documentation for more info. However this is a quick example that uses Redis
data types as an example.</p>
<p>To add a sequence of unordered elements (for example in the case of a Redis
Set), the pattern to use is:</p>
<div class="highlight"><pre><span></span><code>foreach element {
    AddElement(element);
    EndSequence();
}
</code></pre></div>
<p>Because Sets are not ordered, so every element added has a position that
does not depend from the other. However if instead our elements are
ordered in pairs, like field-value pairs of a Hash, then one should
use:</p>
<div class="highlight"><pre><span></span><code>foreach key,value {
    AddElement(key);
    AddElement(value);
    EndSequence();
}
</code></pre></div>
<p>Because the key and value will be always in the above order, while instead
the single key-value pairs, can appear in any position into a Redis hash.</p>
<p>A list of ordered elements would be implemented with:</p>
<div class="highlight"><pre><span></span><code>foreach element {
    AddElement(element);
}
EndSequence();
</code></pre></div>
<p><span id="RedisModule_DigestAddLongLong"></span></p>
<h3 id="redismodule_digestaddlonglong"><code>RedisModule_DigestAddLongLong</code><a class="headerlink" href="#redismodule_digestaddlonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_DigestAddLongLong(RedisModuleDigest *md, long long ll);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Like <a href="#RedisModule_DigestAddStringBuffer"><code>RedisModule_DigestAddStringBuffer()</code></a> but takes a <code>long long</code> as input
that gets converted into a string before adding it to the digest.</p>
<p><span id="RedisModule_DigestEndSequence"></span></p>
<h3 id="redismodule_digestendsequence"><code>RedisModule_DigestEndSequence</code><a class="headerlink" href="#redismodule_digestendsequence" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_DigestEndSequence(RedisModuleDigest *md);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>See the documentation for <code>RedisModule_DigestAddElement()</code>.</p>
<p><span id="RedisModule_LoadDataTypeFromStringEncver"></span></p>
<h3 id="redismodule_loaddatatypefromstringencver"><code>RedisModule_LoadDataTypeFromStringEncver</code><a class="headerlink" href="#redismodule_loaddatatypefromstringencver" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_LoadDataTypeFromStringEncver(const RedisModuleString *str,
                                               const moduleType *mt,
                                               int encver);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Decode a serialized representation of a module data type 'mt', in a specific encoding version 'encver'
from string 'str' and return a newly allocated value, or NULL if decoding failed.</p>
<p>This call basically reuses the '<code>rdb_load</code>' callback which module data types
implement in order to allow a module to arbitrarily serialize/de-serialize
keys, similar to how the Redis 'DUMP' and 'RESTORE' commands are implemented.</p>
<p>Modules should generally use the <code>REDISMODULE_OPTIONS_HANDLE_IO_ERRORS</code> flag and
make sure the de-serialization code properly checks and handles IO errors
(freeing allocated buffers and returning a NULL).</p>
<p>If this is NOT done, Redis will handle corrupted (or just truncated) serialized
data by producing an error message and terminating the process.</p>
<p><span id="RedisModule_LoadDataTypeFromString"></span></p>
<h3 id="redismodule_loaddatatypefromstring"><code>RedisModule_LoadDataTypeFromString</code><a class="headerlink" href="#redismodule_loaddatatypefromstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_LoadDataTypeFromString(const RedisModuleString *str,
                                         const moduleType *mt);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Similar to <a href="#RedisModule_LoadDataTypeFromStringEncver"><code>RedisModule_LoadDataTypeFromStringEncver</code></a>, original version of the API, kept
for backward compatibility.</p>
<p><span id="RedisModule_SaveDataTypeToString"></span></p>
<h3 id="redismodule_savedatatypetostring"><code>RedisModule_SaveDataTypeToString</code><a class="headerlink" href="#redismodule_savedatatypetostring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_SaveDataTypeToString(RedisModuleCtx *ctx,
                                                    void *data,
                                                    const moduleType *mt);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Encode a module data type 'mt' value 'data' into serialized form, and return it
as a newly allocated <code>RedisModuleString</code>.</p>
<p>This call basically reuses the '<code>rdb_save</code>' callback which module data types
implement in order to allow a module to arbitrarily serialize/de-serialize
keys, similar to how the Redis 'DUMP' and 'RESTORE' commands are implemented.</p>
<p><span id="RedisModule_GetKeyNameFromDigest"></span></p>
<h3 id="redismodule_getkeynamefromdigest"><code>RedisModule_GetKeyNameFromDigest</code><a class="headerlink" href="#redismodule_getkeynamefromdigest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetKeyNameFromDigest(RedisModuleDigest *dig);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the name of the key currently being processed.</p>
<p><span id="RedisModule_GetDbIdFromDigest"></span></p>
<h3 id="redismodule_getdbidfromdigest"><code>RedisModule_GetDbIdFromDigest</code><a class="headerlink" href="#redismodule_getdbidfromdigest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetDbIdFromDigest(RedisModuleDigest *dig);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the database id of the key currently being processed.</p>
<p><span id="section-aof-api-for-modules-data-types"></span></p>
<h2 id="aof-api-for-modules-data-types">AOF API for modules data types<a class="headerlink" href="#aof-api-for-modules-data-types" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_EmitAOF"></span></p>
<h3 id="redismodule_emitaof"><code>RedisModule_EmitAOF</code><a class="headerlink" href="#redismodule_emitaof" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_EmitAOF(RedisModuleIO *io,
                         const char *cmdname,
                         const char *fmt,
                         ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Emits a command into the AOF during the AOF rewriting process. This function
is only called in the context of the <code>aof_rewrite</code> method of data types exported
by a module. The command works exactly like <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> in the way
the parameters are passed, but it does not return anything as the error
handling is performed by Redis itself.</p>
<p><span id="section-io-context-handling"></span></p>
<h2 id="io-context-handling">IO context handling<a class="headerlink" href="#io-context-handling" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_GetKeyNameFromIO"></span></p>
<h3 id="redismodule_getkeynamefromio"><code>RedisModule_GetKeyNameFromIO</code><a class="headerlink" href="#redismodule_getkeynamefromio" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetKeyNameFromIO(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Returns the name of the key currently being processed.
There is no guarantee that the key name is always available, so this may return NULL.</p>
<p><span id="RedisModule_GetKeyNameFromModuleKey"></span></p>
<h3 id="redismodule_getkeynamefrommodulekey"><code>RedisModule_GetKeyNameFromModuleKey</code><a class="headerlink" href="#redismodule_getkeynamefrommodulekey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetKeyNameFromModuleKey(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Returns a <code>RedisModuleString</code> with the name of the key from <code>RedisModuleKey</code>.</p>
<p><span id="RedisModule_GetDbIdFromModuleKey"></span></p>
<h3 id="redismodule_getdbidfrommodulekey"><code>RedisModule_GetDbIdFromModuleKey</code><a class="headerlink" href="#redismodule_getdbidfrommodulekey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetDbIdFromModuleKey(RedisModuleKey *key);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns a database id of the key from <code>RedisModuleKey</code>.</p>
<p><span id="RedisModule_GetDbIdFromIO"></span></p>
<h3 id="redismodule_getdbidfromio"><code>RedisModule_GetDbIdFromIO</code><a class="headerlink" href="#redismodule_getdbidfromio" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetDbIdFromIO(RedisModuleIO *io);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the database id of the key currently being processed.
There is no guarantee that this info is always available, so this may return -1.</p>
<p><span id="section-logging"></span></p>
<h2 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_Log"></span></p>
<h3 id="redismodule_log"><code>RedisModule_Log</code><a class="headerlink" href="#redismodule_log" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_Log(RedisModuleCtx *ctx,
                     const char *levelstr,
                     const char *fmt,
                     ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Produces a log message to the standard Redis log, the format accepts
printf-alike specifiers, while level is a string describing the log
level to use when emitting the log, and must be one of the following:</p>
<ul>
<li>"debug" (<code>REDISMODULE_LOGLEVEL_DEBUG</code>)</li>
<li>"verbose" (<code>REDISMODULE_LOGLEVEL_VERBOSE</code>)</li>
<li>"notice" (<code>REDISMODULE_LOGLEVEL_NOTICE</code>)</li>
<li>"warning" (<code>REDISMODULE_LOGLEVEL_WARNING</code>)</li>
</ul>
<p>If the specified log level is invalid, verbose is used by default.
There is a fixed limit to the length of the log line this function is able
to emit, this limit is not specified but is guaranteed to be more than
a few lines of text.</p>
<p>The ctx argument may be NULL if cannot be provided in the context of the
caller for instance threads or callbacks, in which case a generic "module"
will be used instead of the module name.</p>
<p><span id="RedisModule_LogIOError"></span></p>
<h3 id="redismodule_logioerror"><code>RedisModule_LogIOError</code><a class="headerlink" href="#redismodule_logioerror" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_LogIOError(RedisModuleIO *io,
                            const char *levelstr,
                            const char *fmt,
                            ...);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Log errors from RDB / AOF serialization callbacks.</p>
<p>This function should be used when a callback is returning a critical
error to the caller since cannot load or save the data for some
critical reason.</p>
<p><span id="RedisModule__Assert"></span></p>
<h3 id="redismodule__assert"><code>RedisModule__Assert</code><a class="headerlink" href="#redismodule__assert" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule__Assert(const char *estr, const char *file, int line);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Redis-like assert function.</p>
<p>The macro <code>RedisModule_Assert(expression)</code> is recommended, rather than
calling this function directly.</p>
<p>A failed assertion will shut down the server and produce logging information
that looks identical to information generated by Redis itself.</p>
<p><span id="RedisModule_LatencyAddSample"></span></p>
<h3 id="redismodule_latencyaddsample"><code>RedisModule_LatencyAddSample</code><a class="headerlink" href="#redismodule_latencyaddsample" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_LatencyAddSample(const char *event, mstime_t latency);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Allows adding event to the latency monitor to be observed by the LATENCY
command. The call is skipped if the latency is smaller than the configured
latency-monitor-threshold.</p>
<p><span id="section-blocking-clients-from-modules"></span></p>
<h2 id="blocking-clients-from-modules">Blocking clients from modules<a class="headerlink" href="#blocking-clients-from-modules" title="Permanent link">⚓︎</a></h2>
<p>For a guide about blocking commands in modules, see
<a href="https://redis.io/topics/modules-blocking-ops">https://redis.io/topics/modules-blocking-ops</a>.</p>
<p><span id="RedisModule_RegisterAuthCallback"></span></p>
<h3 id="redismodule_registerauthcallback"><code>RedisModule_RegisterAuthCallback</code><a class="headerlink" href="#redismodule_registerauthcallback" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_RegisterAuthCallback(RedisModuleCtx *ctx,
                                      RedisModuleAuthCallback cb);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>This API registers a callback to execute in addition to normal password based authentication.
Multiple callbacks can be registered across different modules. When a Module is unloaded, all the
auth callbacks registered by it are unregistered.
The callbacks are attempted (in the order of most recently registered first) when the AUTH/HELLO
(with AUTH field provided) commands are called.
The callbacks will be called with a module context along with a username and a password, and are
expected to take one of the following actions:
(1) Authenticate - Use the <code>RedisModule_AuthenticateClient</code>* API and return <code>REDISMODULE_AUTH_HANDLED</code>.
This will immediately end the auth chain as successful and add the OK reply.
(2) Deny Authentication - Return <code>REDISMODULE_AUTH_HANDLED</code> without authenticating or blocking the
client. Optionally, <code>err</code> can be set to a custom error message and <code>err</code> will be automatically
freed by the server.
This will immediately end the auth chain as unsuccessful and add the ERR reply.
(3) Block a client on authentication - Use the <a href="#RedisModule_BlockClientOnAuth"><code>RedisModule_BlockClientOnAuth</code></a> API and return
<code>REDISMODULE_AUTH_HANDLED</code>. Here, the client will be blocked until the <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient</code></a> API is used
which will trigger the auth reply callback (provided through the <a href="#RedisModule_BlockClientOnAuth"><code>RedisModule_BlockClientOnAuth</code></a>).
In this reply callback, the Module should authenticate, deny or skip handling authentication.
(4) Skip handling Authentication - Return <code>REDISMODULE_AUTH_NOT_HANDLED</code> without blocking the
client. This will allow the engine to attempt the next module auth callback.
If none of the callbacks authenticate or deny auth, then password based auth is attempted and
will authenticate or add failure logs and reply to the clients accordingly.</p>
<p>Note: If a client is disconnected while it was in the middle of blocking module auth, that
occurrence of the AUTH or HELLO command will not be tracked in the INFO command stats.</p>
<p>The following is an example of how non-blocking module based authentication can be used:</p>
<div class="highlight"><pre><span></span><code> int auth_cb(RedisModuleCtx *ctx, RedisModuleString *username, RedisModuleString *password, RedisModuleString **err) {
     const char *user = RedisModule_StringPtrLen(username, NULL);
     const char *pwd = RedisModule_StringPtrLen(password, NULL);
     if (!strcmp(user,&quot;foo&quot;) &amp;&amp; !strcmp(pwd,&quot;valid_password&quot;)) {
         RedisModule_AuthenticateClientWithACLUser(ctx, &quot;foo&quot;, 3, NULL, NULL, NULL);
         return REDISMODULE_AUTH_HANDLED;
     }

     else if (!strcmp(user,&quot;foo&quot;) &amp;&amp; !strcmp(pwd,&quot;wrong_password&quot;)) {
         RedisModuleString *log = RedisModule_CreateString(ctx, &quot;Module Auth&quot;, 11);
         RedisModule_ACLAddLogEntryByUserName(ctx, username, log, REDISMODULE_ACL_LOG_AUTH);
         RedisModule_FreeString(ctx, log);
         const char *err_msg = &quot;Auth denied by Misc Module.&quot;;
         *err = RedisModule_CreateString(ctx, err_msg, strlen(err_msg));
         return REDISMODULE_AUTH_HANDLED;
     }
     return REDISMODULE_AUTH_NOT_HANDLED;
  }

 int RedisModule_OnLoad(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
     if (RedisModule_Init(ctx,&quot;authmodule&quot;,1,REDISMODULE_APIVER_1)== REDISMODULE_ERR)
         return REDISMODULE_ERR;
     RedisModule_RegisterAuthCallback(ctx, auth_cb);
     return REDISMODULE_OK;
 }
</code></pre></div>
<p><span id="RedisModule_BlockClient"></span></p>
<h3 id="redismodule_blockclient"><code>RedisModule_BlockClient</code><a class="headerlink" href="#redismodule_blockclient" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleBlockedClient *RedisModule_BlockClient(RedisModuleCtx *ctx,
                                                  RedisModuleCmdFunc reply_callback,
                                                  ;
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Block a client in the context of a blocking command, returning a handle
which will be used, later, in order to unblock the client with a call to
<a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a>. The arguments specify callback functions
and a timeout after which the client is unblocked.</p>
<p>The callbacks are called in the following contexts:</p>
<div class="highlight"><pre><span></span><code>reply_callback:   called after a successful RedisModule_UnblockClient()
                  call in order to reply to the client and unblock it.

timeout_callback: called when the timeout is reached or if `CLIENT UNBLOCK`
                  is invoked, in order to send an error to the client.

free_privdata:    called in order to free the private data that is passed
                  by RedisModule_UnblockClient() call.
</code></pre></div>
<p>Note: <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient</code></a> should be called for every blocked client,
      even if client was killed, timed-out or disconnected. Failing to do so
      will result in memory leaks.</p>
<p>There are some cases where <a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient()</code></a> cannot be used:</p>
<ol>
<li>If the client is a Lua script.</li>
<li>If the client is executing a MULTI block.</li>
</ol>
<p>In these cases, a call to <a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient()</code></a> will <strong>not</strong> block the
client, but instead produce a specific error reply.</p>
<p>A module that registers a <code>timeout_callback</code> function can also be unblocked
using the <code>CLIENT UNBLOCK</code> command, which will trigger the timeout callback.
If a callback function is not registered, then the blocked client will be
treated as if it is not in a blocked state and <code>CLIENT UNBLOCK</code> will return
a zero value.</p>
<p>Measuring background time: By default the time spent in the blocked command
is not account for the total command duration. To include such time you should
use <a href="#RedisModule_BlockedClientMeasureTimeStart"><code>RedisModule_BlockedClientMeasureTimeStart()</code></a> and <a href="#RedisModule_BlockedClientMeasureTimeEnd"><code>RedisModule_BlockedClientMeasureTimeEnd()</code></a> one,
or multiple times within the blocking command background work.</p>
<p><span id="RedisModule_BlockClientOnAuth"></span></p>
<h3 id="redismodule_blockclientonauth"><code>RedisModule_BlockClientOnAuth</code><a class="headerlink" href="#redismodule_blockclientonauth" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleBlockedClient *RedisModule_BlockClientOnAuth(RedisModuleCtx *ctx,
                                                        RedisModuleAuthCallback reply_callback,
                                                        ;
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Block the current client for module authentication in the background. If module auth is not in
progress on the client, the API returns NULL. Otherwise, the client is blocked and the <code>RedisModule_BlockedClient</code>
is returned similar to the <a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient</code></a> API.
Note: Only use this API from the context of a module auth callback.</p>
<p><span id="RedisModule_BlockClientGetPrivateData"></span></p>
<h3 id="redismodule_blockclientgetprivatedata"><code>RedisModule_BlockClientGetPrivateData</code><a class="headerlink" href="#redismodule_blockclientgetprivatedata" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_BlockClientGetPrivateData(RedisModuleBlockedClient *blocked_client);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Get the private data that was previusely set on a blocked client</p>
<p><span id="RedisModule_BlockClientSetPrivateData"></span></p>
<h3 id="redismodule_blockclientsetprivatedata"><code>RedisModule_BlockClientSetPrivateData</code><a class="headerlink" href="#redismodule_blockclientsetprivatedata" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_BlockClientSetPrivateData(RedisModuleBlockedClient *blocked_client,
                                           void *private_data);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Set private data on a blocked client</p>
<p><span id="RedisModule_BlockClientOnKeys"></span></p>
<h3 id="redismodule_blockclientonkeys"><code>RedisModule_BlockClientOnKeys</code><a class="headerlink" href="#redismodule_blockclientonkeys" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleBlockedClient *RedisModule_BlockClientOnKeys(RedisModuleCtx *ctx,
                                                        RedisModuleCmdFunc reply_callback,
                                                        ;
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>This call is similar to <a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient()</code></a>, however in this case we
don't just block the client, but also ask Redis to unblock it automatically
once certain keys become "ready", that is, contain more data.</p>
<p>Basically this is similar to what a typical Redis command usually does,
like BLPOP or BZPOPMAX: the client blocks if it cannot be served ASAP,
and later when the key receives new data (a list push for instance), the
client is unblocked and served.</p>
<p>However in the case of this module API, when the client is unblocked?</p>
<ol>
<li>If you block on a key of a type that has blocking operations associated,
   like a list, a sorted set, a stream, and so forth, the client may be
   unblocked once the relevant key is targeted by an operation that normally
   unblocks the native blocking operations for that type. So if we block
   on a list key, an RPUSH command may unblock our client and so forth.</li>
<li>If you are implementing your native data type, or if you want to add new
   unblocking conditions in addition to "1", you can call the modules API
   <a href="#RedisModule_SignalKeyAsReady"><code>RedisModule_SignalKeyAsReady()</code></a>.</li>
</ol>
<p>Anyway we can't be sure if the client should be unblocked just because the
key is signaled as ready: for instance a successive operation may change the
key, or a client in queue before this one can be served, modifying the key
as well and making it empty again. So when a client is blocked with
<a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys()</code></a> the reply callback is not called after
<a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a> is called, but every time a key is signaled as ready:
if the reply callback can serve the client, it returns <code>REDISMODULE_OK</code>
and the client is unblocked, otherwise it will return <code>REDISMODULE_ERR</code>
and we'll try again later.</p>
<p>The reply callback can access the key that was signaled as ready by
calling the API <a href="#RedisModule_GetBlockedClientReadyKey"><code>RedisModule_GetBlockedClientReadyKey()</code></a>, that returns
just the string name of the key as a <code>RedisModuleString</code> object.</p>
<p>Thanks to this system we can setup complex blocking scenarios, like
unblocking a client only if a list contains at least 5 items or other
more fancy logics.</p>
<p>Note that another difference with <a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient()</code></a>, is that here
we pass the private data directly when blocking the client: it will
be accessible later in the reply callback. Normally when blocking with
<a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient()</code></a> the private data to reply to the client is
passed when calling <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a> but here the unblocking
is performed by Redis itself, so we need to have some private data before
hand. The private data is used to store any information about the specific
unblocking operation that you are implementing. Such information will be
freed using the <code>free_privdata</code> callback provided by the user.</p>
<p>However the reply callback will be able to access the argument vector of
the command, so the private data is often not needed.</p>
<p>Note: Under normal circumstances <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient</code></a> should not be
      called for clients that are blocked on keys (Either the key will
      become ready or a timeout will occur). If for some reason you do want
      to call RedisModule_UnblockClient it is possible: Client will be
      handled as if it were timed-out (You must implement the timeout
      callback in that case).</p>
<p><span id="RedisModule_BlockClientOnKeysWithFlags"></span></p>
<h3 id="redismodule_blockclientonkeyswithflags"><code>RedisModule_BlockClientOnKeysWithFlags</code><a class="headerlink" href="#redismodule_blockclientonkeyswithflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleBlockedClient *RedisModule_BlockClientOnKeysWithFlags(RedisModuleCtx *ctx,
                                                                 RedisModuleCmdFunc reply_callback,
                                                                 ;
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Same as <a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys</code></a>, but can take <code>REDISMODULE_BLOCK_</code>* flags
Can be either <code>REDISMODULE_BLOCK_UNBLOCK_DEFAULT</code>, which means default behavior (same
as calling <a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys</code></a>)</p>
<p>The flags is a bit mask of these:</p>
<ul>
<li><code>REDISMODULE_BLOCK_UNBLOCK_DELETED</code>: The clients should to be awakened in case any of <code>keys</code> are deleted.
                                       Mostly useful for commands that require the key to exist (like XREADGROUP)</li>
</ul>
<p><span id="RedisModule_SignalKeyAsReady"></span></p>
<h3 id="redismodule_signalkeyasready"><code>RedisModule_SignalKeyAsReady</code><a class="headerlink" href="#redismodule_signalkeyasready" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SignalKeyAsReady(RedisModuleCtx *ctx, RedisModuleString *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>This function is used in order to potentially unblock a client blocked
on keys with <a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys()</code></a>. When this function is called,
all the clients blocked for this key will get their <code>reply_callback</code> called.</p>
<p><span id="RedisModule_UnblockClient"></span></p>
<h3 id="redismodule_unblockclient"><code>RedisModule_UnblockClient</code><a class="headerlink" href="#redismodule_unblockclient" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_UnblockClient(RedisModuleBlockedClient *bc, void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Unblock a client blocked by <code>RedisModule_BlockedClient</code>. This will trigger
the reply callbacks to be called in order to reply to the client.
The 'privdata' argument will be accessible by the reply callback, so
the caller of this function can pass any value that is needed in order to
actually reply to the client.</p>
<p>A common usage for 'privdata' is a thread that computes something that
needs to be passed to the client, included but not limited some slow
to compute reply or some reply obtained via networking.</p>
<p>Note 1: this function can be called from threads spawned by the module.</p>
<p>Note 2: when we unblock a client that is blocked for keys using the API
<a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys()</code></a>, the privdata argument here is not used.
Unblocking a client that was blocked for keys using this API will still
require the client to get some reply, so the function will use the
"timeout" handler in order to do so (The privdata provided in
<a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys()</code></a> is accessible from the timeout
callback via <a href="#RedisModule_GetBlockedClientPrivateData"><code>RedisModule_GetBlockedClientPrivateData</code></a>).</p>
<p><span id="RedisModule_AbortBlock"></span></p>
<h3 id="redismodule_abortblock"><code>RedisModule_AbortBlock</code><a class="headerlink" href="#redismodule_abortblock" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_AbortBlock(RedisModuleBlockedClient *bc);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Abort a blocked client blocking operation: the client will be unblocked
without firing any callback.</p>
<p><span id="RedisModule_SetDisconnectCallback"></span></p>
<h3 id="redismodule_setdisconnectcallback"><code>RedisModule_SetDisconnectCallback</code><a class="headerlink" href="#redismodule_setdisconnectcallback" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SetDisconnectCallback(RedisModuleBlockedClient *bc,
                                       RedisModuleDisconnectFunc callback);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Set a callback that will be called if a blocked client disconnects
before the module has a chance to call <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a></p>
<p>Usually what you want to do there, is to cleanup your module state
so that you can call <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a> safely, otherwise
the client will remain blocked forever if the timeout is large.</p>
<p>Notes:</p>
<ol>
<li>
<p>It is not safe to call Reply* family functions here, it is also
   useless since the client is gone.</p>
</li>
<li>
<p>This callback is not called if the client disconnects because of
   a timeout. In such a case, the client is unblocked automatically
   and the timeout callback is called.</p>
</li>
</ol>
<p><span id="RedisModule_IsBlockedReplyRequest"></span></p>
<h3 id="redismodule_isblockedreplyrequest"><code>RedisModule_IsBlockedReplyRequest</code><a class="headerlink" href="#redismodule_isblockedreplyrequest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsBlockedReplyRequest(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return non-zero if a module command was called in order to fill the
reply for a blocked client.</p>
<p><span id="RedisModule_IsBlockedTimeoutRequest"></span></p>
<h3 id="redismodule_isblockedtimeoutrequest"><code>RedisModule_IsBlockedTimeoutRequest</code><a class="headerlink" href="#redismodule_isblockedtimeoutrequest" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsBlockedTimeoutRequest(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return non-zero if a module command was called in order to fill the
reply for a blocked client that timed out.</p>
<p><span id="RedisModule_GetBlockedClientPrivateData"></span></p>
<h3 id="redismodule_getblockedclientprivatedata"><code>RedisModule_GetBlockedClientPrivateData</code><a class="headerlink" href="#redismodule_getblockedclientprivatedata" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_GetBlockedClientPrivateData(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Get the private data set by <a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient()</code></a></p>
<p><span id="RedisModule_GetBlockedClientReadyKey"></span></p>
<h3 id="redismodule_getblockedclientreadykey"><code>RedisModule_GetBlockedClientReadyKey</code><a class="headerlink" href="#redismodule_getblockedclientreadykey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetBlockedClientReadyKey(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the key that is ready when the reply callback is called in the context
of a client blocked by <a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys()</code></a>.</p>
<p><span id="RedisModule_GetBlockedClientHandle"></span></p>
<h3 id="redismodule_getblockedclienthandle"><code>RedisModule_GetBlockedClientHandle</code><a class="headerlink" href="#redismodule_getblockedclienthandle" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleBlockedClient *RedisModule_GetBlockedClientHandle(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Get the blocked client associated with a given context.
This is useful in the reply and timeout callbacks of blocked clients,
before sometimes the module has the blocked client handle references
around, and wants to cleanup it.</p>
<p><span id="RedisModule_BlockedClientDisconnected"></span></p>
<h3 id="redismodule_blockedclientdisconnected"><code>RedisModule_BlockedClientDisconnected</code><a class="headerlink" href="#redismodule_blockedclientdisconnected" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_BlockedClientDisconnected(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return true if when the free callback of a blocked client is called,
the reason for the client to be unblocked is that it disconnected
while it was blocked.</p>
<p><span id="section-thread-safe-contexts"></span></p>
<h2 id="thread-safe-contexts">Thread Safe Contexts<a class="headerlink" href="#thread-safe-contexts" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_GetThreadSafeContext"></span></p>
<h3 id="redismodule_getthreadsafecontext"><code>RedisModule_GetThreadSafeContext</code><a class="headerlink" href="#redismodule_getthreadsafecontext" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCtx *RedisModule_GetThreadSafeContext(RedisModuleBlockedClient *bc);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Return a context which can be used inside threads to make Redis context
calls with certain modules APIs. If 'bc' is not NULL then the module will
be bound to a blocked client, and it will be possible to use the
<code>RedisModule_Reply*</code> family of functions to accumulate a reply for when the
client will be unblocked. Otherwise the thread safe context will be
detached by a specific client.</p>
<p>To call non-reply APIs, the thread safe context must be prepared with:</p>
<div class="highlight"><pre><span></span><code>RedisModule_ThreadSafeContextLock(ctx);
... make your call here ...
RedisModule_ThreadSafeContextUnlock(ctx);
</code></pre></div>
<p>This is not needed when using <code>RedisModule_Reply*</code> functions, assuming
that a blocked client was used when the context was created, otherwise
no <code>RedisModule_Reply</code>* call should be made at all.</p>
<p>NOTE: If you're creating a detached thread safe context (bc is NULL),
consider using <a href="#RedisModule_GetDetachedThreadSafeContext"><code>RedisModule_GetDetachedThreadSafeContext</code></a> which will also retain
the module ID and thus be more useful for logging.</p>
<p><span id="RedisModule_GetDetachedThreadSafeContext"></span></p>
<h3 id="redismodule_getdetachedthreadsafecontext"><code>RedisModule_GetDetachedThreadSafeContext</code><a class="headerlink" href="#redismodule_getdetachedthreadsafecontext" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCtx *RedisModule_GetDetachedThreadSafeContext(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Return a detached thread safe context that is not associated with any
specific blocked client, but is associated with the module's context.</p>
<p>This is useful for modules that wish to hold a global context over
a long term, for purposes such as logging.</p>
<p><span id="RedisModule_FreeThreadSafeContext"></span></p>
<h3 id="redismodule_freethreadsafecontext"><code>RedisModule_FreeThreadSafeContext</code><a class="headerlink" href="#redismodule_freethreadsafecontext" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeThreadSafeContext(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Release a thread safe context.</p>
<p><span id="RedisModule_ThreadSafeContextLock"></span></p>
<h3 id="redismodule_threadsafecontextlock"><code>RedisModule_ThreadSafeContextLock</code><a class="headerlink" href="#redismodule_threadsafecontextlock" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ThreadSafeContextLock(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Acquire the server lock before executing a thread safe API call.
This is not needed for <code>RedisModule_Reply*</code> calls when there is
a blocked client connected to the thread safe context.</p>
<p><span id="RedisModule_ThreadSafeContextTryLock"></span></p>
<h3 id="redismodule_threadsafecontexttrylock"><code>RedisModule_ThreadSafeContextTryLock</code><a class="headerlink" href="#redismodule_threadsafecontexttrylock" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ThreadSafeContextTryLock(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.8</p>
<p>Similar to <a href="#RedisModule_ThreadSafeContextLock"><code>RedisModule_ThreadSafeContextLock</code></a> but this function
would not block if the server lock is already acquired.</p>
<p>If successful (lock acquired) <code>REDISMODULE_OK</code> is returned,
otherwise <code>REDISMODULE_ERR</code> is returned and errno is set
accordingly.</p>
<p><span id="RedisModule_ThreadSafeContextUnlock"></span></p>
<h3 id="redismodule_threadsafecontextunlock"><code>RedisModule_ThreadSafeContextUnlock</code><a class="headerlink" href="#redismodule_threadsafecontextunlock" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ThreadSafeContextUnlock(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.0</p>
<p>Release the server lock after a thread safe API call was executed.</p>
<p><span id="section-module-keyspace-notifications-api"></span></p>
<h2 id="module-keyspace-notifications-api">Module Keyspace Notifications API<a class="headerlink" href="#module-keyspace-notifications-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_SubscribeToKeyspaceEvents"></span></p>
<h3 id="redismodule_subscribetokeyspaceevents"><code>RedisModule_SubscribeToKeyspaceEvents</code><a class="headerlink" href="#redismodule_subscribetokeyspaceevents" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SubscribeToKeyspaceEvents(RedisModuleCtx *ctx,
                                          int types,
                                          RedisModuleNotificationFunc callback);
</code></pre></div>
<p><strong>Available since:</strong> 4.0.9</p>
<p>Subscribe to keyspace notifications. This is a low-level version of the
keyspace-notifications API. A module can register callbacks to be notified
when keyspace events occur.</p>
<p>Notification events are filtered by their type (string events, set events,
etc), and the subscriber callback receives only events that match a specific
mask of event types.</p>
<p>When subscribing to notifications with <a href="#RedisModule_SubscribeToKeyspaceEvents"><code>RedisModule_SubscribeToKeyspaceEvents</code></a>
the module must provide an event type-mask, denoting the events the subscriber
is interested in. This can be an ORed mask of any of the following flags:</p>
<ul>
<li><code>REDISMODULE_NOTIFY_GENERIC</code>: Generic commands like DEL, EXPIRE, RENAME</li>
<li><code>REDISMODULE_NOTIFY_STRING</code>: String events</li>
<li><code>REDISMODULE_NOTIFY_LIST</code>: List events</li>
<li><code>REDISMODULE_NOTIFY_SET</code>: Set events</li>
<li><code>REDISMODULE_NOTIFY_HASH</code>: Hash events</li>
<li><code>REDISMODULE_NOTIFY_ZSET</code>: Sorted Set events</li>
<li><code>REDISMODULE_NOTIFY_EXPIRED</code>: Expiration events</li>
<li><code>REDISMODULE_NOTIFY_EVICTED</code>: Eviction events</li>
<li><code>REDISMODULE_NOTIFY_STREAM</code>: Stream events</li>
<li><code>REDISMODULE_NOTIFY_MODULE</code>: Module types events</li>
<li><code>REDISMODULE_NOTIFY_KEYMISS</code>: Key-miss events
                               Notice, key-miss event is the only type
                               of event that is fired from within a read command.
                               Performing RedisModule_Call with a write command from within
                               this notification is wrong and discourage. It will
                               cause the read command that trigger the event to be
                               replicated to the AOF/Replica.</li>
<li><code>REDISMODULE_NOTIFY_ALL</code>: All events (Excluding <code>REDISMODULE_NOTIFY_KEYMISS</code>)</li>
<li><code>REDISMODULE_NOTIFY_LOADED</code>: A special notification available only for modules,
                              indicates that the key was loaded from persistence.
                              Notice, when this event fires, the given key
                              can not be retained, use RedisModule_CreateStringFromString
                              instead.</li>
</ul>
<p>We do not distinguish between key events and keyspace events, and it is up
to the module to filter the actions taken based on the key.</p>
<p>The subscriber signature is:</p>
<div class="highlight"><pre><span></span><code>int (*RedisModuleNotificationFunc) (RedisModuleCtx *ctx, int type,
                                    const char *event,
                                    RedisModuleString *key);
</code></pre></div>
<p><code>type</code> is the event type bit, that must match the mask given at registration
time. The event string is the actual command being executed, and key is the
relevant Redis key.</p>
<p>Notification callback gets executed with a redis context that can not be
used to send anything to the client, and has the db number where the event
occurred as its selected db number.</p>
<p>Notice that it is not necessary to enable notifications in redis.conf for
module notifications to work.</p>
<p>Warning: the notification callbacks are performed in a synchronous manner,
so notification callbacks must to be fast, or they would slow Redis down.
If you need to take long actions, use threads to offload them.</p>
<p>Moreover, the fact that the notification is executed synchronously means
that the notification code will be executed in the middle on Redis logic
(commands logic, eviction, expire). Changing the key space while the logic
runs is dangerous and discouraged. In order to react to key space events with
write actions, please refer to <a href="#RedisModule_AddPostNotificationJob"><code>RedisModule_AddPostNotificationJob</code></a>.</p>
<p>See <a href="https://redis.io/topics/notifications">https://redis.io/topics/notifications</a> for more information.</p>
<p><span id="RedisModule_AddPostNotificationJob"></span></p>
<h3 id="redismodule_addpostnotificationjob"><code>RedisModule_AddPostNotificationJob</code><a class="headerlink" href="#redismodule_addpostnotificationjob" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_AddPostNotificationJob(RedisModuleCtx *ctx,
                                       RedisModulePostNotificationJobFunc callback,
                                       void *privdata,
                                       void (*free_privdata)(void*));
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>When running inside a key space notification callback, it is dangerous and highly discouraged to perform any write
operation (See <a href="#RedisModule_SubscribeToKeyspaceEvents"><code>RedisModule_SubscribeToKeyspaceEvents</code></a>). In order to still perform write actions in this scenario,
Redis provides <a href="#RedisModule_AddPostNotificationJob"><code>RedisModule_AddPostNotificationJob</code></a> API. The API allows to register a job callback which Redis will call
when the following condition are promised to be fulfilled:
1. It is safe to perform any write operation.
2. The job will be called atomically along side the key space notification.</p>
<p>Notice, one job might trigger key space notifications that will trigger more jobs.
This raises a concerns of entering an infinite loops, we consider infinite loops
as a logical bug that need to be fixed in the module, an attempt to protect against
infinite loops by halting the execution could result in violation of the feature correctness
and so Redis will make no attempt to protect the module from infinite loops.</p>
<p>'<code>free_pd</code>' can be NULL and in such case will not be used.</p>
<p>Return <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> if was called while loading data from disk (AOF or RDB) or
if the instance is a readonly replica.</p>
<p><span id="RedisModule_GetNotifyKeyspaceEvents"></span></p>
<h3 id="redismodule_getnotifykeyspaceevents"><code>RedisModule_GetNotifyKeyspaceEvents</code><a class="headerlink" href="#redismodule_getnotifykeyspaceevents" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetNotifyKeyspaceEvents(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the configured bitmap of notify-keyspace-events (Could be used
for additional filtering in <code>RedisModuleNotificationFunc</code>)</p>
<p><span id="RedisModule_NotifyKeyspaceEvent"></span></p>
<h3 id="redismodule_notifykeyspaceevent"><code>RedisModule_NotifyKeyspaceEvent</code><a class="headerlink" href="#redismodule_notifykeyspaceevent" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_NotifyKeyspaceEvent(RedisModuleCtx *ctx,
                                    int type,
                                    const char *event,
                                    RedisModuleString *key);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Expose notifyKeyspaceEvent to modules</p>
<p><span id="section-modules-cluster-api"></span></p>
<h2 id="modules-cluster-api">Modules Cluster API<a class="headerlink" href="#modules-cluster-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_RegisterClusterMessageReceiver"></span></p>
<h3 id="redismodule_registerclustermessagereceiver"><code>RedisModule_RegisterClusterMessageReceiver</code><a class="headerlink" href="#redismodule_registerclustermessagereceiver" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_RegisterClusterMessageReceiver(RedisModuleCtx *ctx,
                                                uint8_t type,
                                                RedisModuleClusterMessageReceiver callback);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Register a callback receiver for cluster messages of type 'type'. If there
was already a registered callback, this will replace the callback function
with the one provided, otherwise if the callback is set to NULL and there
is already a callback for this function, the callback is unregistered
(so this API call is also used in order to delete the receiver).</p>
<p><span id="RedisModule_SendClusterMessage"></span></p>
<h3 id="redismodule_sendclustermessage"><code>RedisModule_SendClusterMessage</code><a class="headerlink" href="#redismodule_sendclustermessage" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SendClusterMessage(RedisModuleCtx *ctx,
                                   const char *target_id,
                                   uint8_t type,
                                   const char *msg,
                                   uint32_t len);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Send a message to all the nodes in the cluster if <code>target</code> is NULL, otherwise
at the specified target, which is a <code>REDISMODULE_NODE_ID_LEN</code> bytes node ID, as
returned by the receiver callback or by the nodes iteration functions.</p>
<p>The function returns <code>REDISMODULE_OK</code> if the message was successfully sent,
otherwise if the node is not connected or such node ID does not map to any
known cluster node, <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_GetClusterNodesList"></span></p>
<h3 id="redismodule_getclusternodeslist"><code>RedisModule_GetClusterNodesList</code><a class="headerlink" href="#redismodule_getclusternodeslist" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>char **RedisModule_GetClusterNodesList(RedisModuleCtx *ctx, size_t *numnodes);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return an array of string pointers, each string pointer points to a cluster
node ID of exactly <code>REDISMODULE_NODE_ID_LEN</code> bytes (without any null term).
The number of returned node IDs is stored into <code>*numnodes</code>.
However if this function is called by a module not running an a Redis
instance with Redis Cluster enabled, NULL is returned instead.</p>
<p>The IDs returned can be used with <a href="#RedisModule_GetClusterNodeInfo"><code>RedisModule_GetClusterNodeInfo()</code></a> in order
to get more information about single node.</p>
<p>The array returned by this function must be freed using the function
<a href="#RedisModule_FreeClusterNodesList"><code>RedisModule_FreeClusterNodesList()</code></a>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>size_t count, j;
char **ids = RedisModule_GetClusterNodesList(ctx,&amp;count);
for (j = 0; j &lt; count; j++) {
    RedisModule_Log(ctx,&quot;notice&quot;,&quot;Node %.*s&quot;,
        REDISMODULE_NODE_ID_LEN,ids[j]);
}
RedisModule_FreeClusterNodesList(ids);
</code></pre></div>
<p><span id="RedisModule_FreeClusterNodesList"></span></p>
<h3 id="redismodule_freeclusternodeslist"><code>RedisModule_FreeClusterNodesList</code><a class="headerlink" href="#redismodule_freeclusternodeslist" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeClusterNodesList(char **ids);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Free the node list obtained with <a href="#RedisModule_GetClusterNodesList"><code>RedisModule_GetClusterNodesList</code></a>.</p>
<p><span id="RedisModule_GetMyClusterID"></span></p>
<h3 id="redismodule_getmyclusterid"><code>RedisModule_GetMyClusterID</code><a class="headerlink" href="#redismodule_getmyclusterid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_GetMyClusterID(void);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return this node ID (<code>REDISMODULE_CLUSTER_ID_LEN</code> bytes) or NULL if the cluster
is disabled.</p>
<p><span id="RedisModule_GetClusterSize"></span></p>
<h3 id="redismodule_getclustersize"><code>RedisModule_GetClusterSize</code><a class="headerlink" href="#redismodule_getclustersize" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_GetClusterSize(void);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return the number of nodes in the cluster, regardless of their state
(handshake, noaddress, ...) so that the number of active nodes may actually
be smaller, but not greater than this number. If the instance is not in
cluster mode, zero is returned.</p>
<p><span id="RedisModule_GetClusterNodeInfo"></span></p>
<h3 id="redismodule_getclusternodeinfo"><code>RedisModule_GetClusterNodeInfo</code><a class="headerlink" href="#redismodule_getclusternodeinfo" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetClusterNodeInfo(RedisModuleCtx *ctx,
                                   const char *id,
                                   char *ip,
                                   char *master_id,
                                   int *port,
                                   int *flags);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Populate the specified info for the node having as ID the specified 'id',
then returns <code>REDISMODULE_OK</code>. Otherwise if the format of node ID is invalid
or the node ID does not exist from the POV of this local node, <code>REDISMODULE_ERR</code>
is returned.</p>
<p>The arguments <code>ip</code>, <code>master_id</code>, <code>port</code> and <code>flags</code> can be NULL in case we don't
need to populate back certain info. If an <code>ip</code> and <code>master_id</code> (only populated
if the instance is a slave) are specified, they point to buffers holding
at least <code>REDISMODULE_NODE_ID_LEN</code> bytes. The strings written back as <code>ip</code>
and <code>master_id</code> are not null terminated.</p>
<p>The list of flags reported is the following:</p>
<ul>
<li><code>REDISMODULE_NODE_MYSELF</code>:       This node</li>
<li><code>REDISMODULE_NODE_MASTER</code>:       The node is a master</li>
<li><code>REDISMODULE_NODE_SLAVE</code>:        The node is a replica</li>
<li><code>REDISMODULE_NODE_PFAIL</code>:        We see the node as failing</li>
<li><code>REDISMODULE_NODE_FAIL</code>:         The cluster agrees the node is failing</li>
<li><code>REDISMODULE_NODE_NOFAILOVER</code>:   The slave is configured to never failover</li>
</ul>
<p><span id="RedisModule_SetClusterFlags"></span></p>
<h3 id="redismodule_setclusterflags"><code>RedisModule_SetClusterFlags</code><a class="headerlink" href="#redismodule_setclusterflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SetClusterFlags(RedisModuleCtx *ctx, uint64_t flags);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Set Redis Cluster flags in order to change the normal behavior of
Redis Cluster, especially with the goal of disabling certain functions.
This is useful for modules that use the Cluster API in order to create
a different distributed system, but still want to use the Redis Cluster
message bus. Flags that can be set:</p>
<ul>
<li><code>CLUSTER_MODULE_FLAG_NO_FAILOVER</code></li>
<li><code>CLUSTER_MODULE_FLAG_NO_REDIRECTION</code></li>
</ul>
<p>With the following effects:</p>
<ul>
<li>
<p><code>NO_FAILOVER</code>: prevent Redis Cluster slaves from failing over a dead master.
               Also disables the replica migration feature.</p>
</li>
<li>
<p><code>NO_REDIRECTION</code>: Every node will accept any key, without trying to perform
                  partitioning according to the Redis Cluster algorithm.
                  Slots information will still be propagated across the
                  cluster, but without effect.</p>
</li>
</ul>
<p><span id="section-modules-timers-api"></span></p>
<h2 id="modules-timers-api">Modules Timers API<a class="headerlink" href="#modules-timers-api" title="Permanent link">⚓︎</a></h2>
<p>Module timers are a high precision "green timers" abstraction where
every module can register even millions of timers without problems, even if
the actual event loop will just have a single timer that is used to awake the
module timers subsystem in order to process the next event.</p>
<p>All the timers are stored into a radix tree, ordered by expire time, when
the main Redis event loop timer callback is called, we try to process all
the timers already expired one after the other. Then we re-enter the event
loop registering a timer that will expire when the next to process module
timer will expire.</p>
<p>Every time the list of active timers drops to zero, we unregister the
main event loop timer, so that there is no overhead when such feature is
not used.</p>
<p><span id="RedisModule_CreateTimer"></span></p>
<h3 id="redismodule_createtimer"><code>RedisModule_CreateTimer</code><a class="headerlink" href="#redismodule_createtimer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleTimerID RedisModule_CreateTimer(RedisModuleCtx *ctx,
                                           mstime_t period,
                                           RedisModuleTimerProc callback,
                                           void *data);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Create a new timer that will fire after <code>period</code> milliseconds, and will call
the specified function using <code>data</code> as argument. The returned timer ID can be
used to get information from the timer or to stop it before it fires.
Note that for the common use case of a repeating timer (Re-registration
of the timer inside the <code>RedisModuleTimerProc</code> callback) it matters when
this API is called:
If it is called at the beginning of 'callback' it means
the event will triggered every 'period'.
If it is called at the end of 'callback' it means
there will 'period' milliseconds gaps between events.
(If the time it takes to execute 'callback' is negligible the two
statements above mean the same)</p>
<p><span id="RedisModule_StopTimer"></span></p>
<h3 id="redismodule_stoptimer"><code>RedisModule_StopTimer</code><a class="headerlink" href="#redismodule_stoptimer" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_StopTimer(RedisModuleCtx *ctx,
                          RedisModuleTimerID id,
                          void **data);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Stop a timer, returns <code>REDISMODULE_OK</code> if the timer was found, belonged to the
calling module, and was stopped, otherwise <code>REDISMODULE_ERR</code> is returned.
If not NULL, the data pointer is set to the value of the data argument when
the timer was created.</p>
<p><span id="RedisModule_GetTimerInfo"></span></p>
<h3 id="redismodule_gettimerinfo"><code>RedisModule_GetTimerInfo</code><a class="headerlink" href="#redismodule_gettimerinfo" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetTimerInfo(RedisModuleCtx *ctx,
                             RedisModuleTimerID id,
                             uint64_t *remaining,
                             void **data);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Obtain information about a timer: its remaining time before firing
(in milliseconds), and the private data pointer associated with the timer.
If the timer specified does not exist or belongs to a different module
no information is returned and the function returns <code>REDISMODULE_ERR</code>, otherwise
<code>REDISMODULE_OK</code> is returned. The arguments remaining or data can be NULL if
the caller does not need certain information.</p>
<p><span id="section-modules-eventloop-api"></span></p>
<h2 id="modules-eventloop-api">Modules EventLoop API<a class="headerlink" href="#modules-eventloop-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_EventLoopAdd"></span></p>
<h3 id="redismodule_eventloopadd"><code>RedisModule_EventLoopAdd</code><a class="headerlink" href="#redismodule_eventloopadd" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_EventLoopAdd(int fd,
                             int mask,
                             RedisModuleEventLoopFunc func,
                             void *user_data);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Add a pipe / socket event to the event loop.</p>
<ul>
<li>
<p><code>mask</code> must be one of the following values:</p>
<ul>
<li><code>REDISMODULE_EVENTLOOP_READABLE</code></li>
<li><code>REDISMODULE_EVENTLOOP_WRITABLE</code></li>
<li><code>REDISMODULE_EVENTLOOP_READABLE | REDISMODULE_EVENTLOOP_WRITABLE</code></li>
</ul>
</li>
</ul>
<p>On success <code>REDISMODULE_OK</code> is returned, otherwise
<code>REDISMODULE_ERR</code> is returned and errno is set to the following values:</p>
<ul>
<li>ERANGE: <code>fd</code> is negative or higher than <code>maxclients</code> Redis config.</li>
<li>EINVAL: <code>callback</code> is NULL or <code>mask</code> value is invalid.</li>
</ul>
<p><code>errno</code> might take other values in case of an internal error.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>void onReadable(int fd, void *user_data, int mask) {
    char buf[32];
    int bytes = read(fd,buf,sizeof(buf));
    printf(&quot;Read %d bytes \n&quot;, bytes);
}
RedisModule_EventLoopAdd(fd, REDISMODULE_EVENTLOOP_READABLE, onReadable, NULL);
</code></pre></div>
<p><span id="RedisModule_EventLoopDel"></span></p>
<h3 id="redismodule_eventloopdel"><code>RedisModule_EventLoopDel</code><a class="headerlink" href="#redismodule_eventloopdel" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_EventLoopDel(int fd, int mask);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Delete a pipe / socket event from the event loop.</p>
<ul>
<li>
<p><code>mask</code> must be one of the following values:</p>
<ul>
<li><code>REDISMODULE_EVENTLOOP_READABLE</code></li>
<li><code>REDISMODULE_EVENTLOOP_WRITABLE</code></li>
<li><code>REDISMODULE_EVENTLOOP_READABLE | REDISMODULE_EVENTLOOP_WRITABLE</code></li>
</ul>
</li>
</ul>
<p>On success <code>REDISMODULE_OK</code> is returned, otherwise
<code>REDISMODULE_ERR</code> is returned and errno is set to the following values:</p>
<ul>
<li>ERANGE: <code>fd</code> is negative or higher than <code>maxclients</code> Redis config.</li>
<li>EINVAL: <code>mask</code> value is invalid.</li>
</ul>
<p><span id="RedisModule_EventLoopAddOneShot"></span></p>
<h3 id="redismodule_eventloopaddoneshot"><code>RedisModule_EventLoopAddOneShot</code><a class="headerlink" href="#redismodule_eventloopaddoneshot" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_EventLoopAddOneShot(RedisModuleEventLoopOneShotFunc func,
                                    void *user_data);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>This function can be called from other threads to trigger callback on Redis
main thread. On success <code>REDISMODULE_OK</code> is returned. If <code>func</code> is NULL
<code>REDISMODULE_ERR</code> is returned and errno is set to EINVAL.</p>
<p><span id="section-modules-acl-api"></span></p>
<h2 id="modules-acl-api">Modules ACL API<a class="headerlink" href="#modules-acl-api" title="Permanent link">⚓︎</a></h2>
<p>Implements a hook into the authentication and authorization within Redis.</p>
<p><span id="RedisModule_CreateModuleUser"></span></p>
<h3 id="redismodule_createmoduleuser"><code>RedisModule_CreateModuleUser</code><a class="headerlink" href="#redismodule_createmoduleuser" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleUser *RedisModule_CreateModuleUser(const char *name);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Creates a Redis ACL user that the module can use to authenticate a client.
After obtaining the user, the module should set what such user can do
using the <code>RedisModule_SetUserACL()</code> function. Once configured, the user
can be used in order to authenticate a connection, with the specified
ACL rules, using the <code>RedisModule_AuthClientWithUser()</code> function.</p>
<p>Note that:</p>
<ul>
<li>Users created here are not listed by the ACL command.</li>
<li>Users created here are not checked for duplicated name, so it's up to
  the module calling this function to take care of not creating users
  with the same name.</li>
<li>The created user can be used to authenticate multiple Redis connections.</li>
</ul>
<p>The caller can later free the user using the function
<a href="#RedisModule_FreeModuleUser"><code>RedisModule_FreeModuleUser()</code></a>. When this function is called, if there are
still clients authenticated with this user, they are disconnected.
The function to free the user should only be used when the caller really
wants to invalidate the user to define a new one with different
capabilities.</p>
<p><span id="RedisModule_FreeModuleUser"></span></p>
<h3 id="redismodule_freemoduleuser"><code>RedisModule_FreeModuleUser</code><a class="headerlink" href="#redismodule_freemoduleuser" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_FreeModuleUser(RedisModuleUser *user);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Frees a given user and disconnects all of the clients that have been
authenticated with it. See <a href="#RedisModule_CreateModuleUser"><code>RedisModule_CreateModuleUser</code></a> for detailed usage.</p>
<p><span id="RedisModule_SetModuleUserACL"></span></p>
<h3 id="redismodule_setmoduleuseracl"><code>RedisModule_SetModuleUserACL</code><a class="headerlink" href="#redismodule_setmoduleuseracl" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetModuleUserACL(RedisModuleUser *user, const char* acl);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Sets the permissions of a user created through the redis module
interface. The syntax is the same as ACL SETUSER, so refer to the
documentation in acl.c for more information. See <a href="#RedisModule_CreateModuleUser"><code>RedisModule_CreateModuleUser</code></a>
for detailed usage.</p>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> on failure
and will set an errno describing why the operation failed.</p>
<p><span id="RedisModule_SetModuleUserACLString"></span></p>
<h3 id="redismodule_setmoduleuseraclstring"><code>RedisModule_SetModuleUserACLString</code><a class="headerlink" href="#redismodule_setmoduleuseraclstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetModuleUserACLString(RedisModuleCtx *ctx,
                                       RedisModuleUser *user,
                                       const char *acl,
                                       RedisModuleString **error);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.6</p>
<p>Sets the permission of a user with a complete ACL string, such as one
would use on the redis ACL SETUSER command line API. This differs from
<a href="#RedisModule_SetModuleUserACL"><code>RedisModule_SetModuleUserACL</code></a>, which only takes single ACL operations at a time.</p>
<p>Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> on failure
if a <code>RedisModuleString</code> is provided in error, a string describing the error
will be returned</p>
<p><span id="RedisModule_GetModuleUserACLString"></span></p>
<h3 id="redismodule_getmoduleuseraclstring"><code>RedisModule_GetModuleUserACLString</code><a class="headerlink" href="#redismodule_getmoduleuseraclstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetModuleUserACLString(RedisModuleUser *user);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.6</p>
<p>Get the ACL string for a given user
Returns a <code>RedisModuleString</code></p>
<p><span id="RedisModule_GetCurrentUserName"></span></p>
<h3 id="redismodule_getcurrentusername"><code>RedisModule_GetCurrentUserName</code><a class="headerlink" href="#redismodule_getcurrentusername" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetCurrentUserName(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Retrieve the user name of the client connection behind the current context.
The user name can be used later, in order to get a <code>RedisModuleUser</code>.
See more information in <a href="#RedisModule_GetModuleUserFromUserName"><code>RedisModule_GetModuleUserFromUserName</code></a>.</p>
<p>The returned string must be released with <a href="#RedisModule_FreeString"><code>RedisModule_FreeString()</code></a> or by
enabling automatic memory management.</p>
<p><span id="RedisModule_GetModuleUserFromUserName"></span></p>
<h3 id="redismodule_getmoduleuserfromusername"><code>RedisModule_GetModuleUserFromUserName</code><a class="headerlink" href="#redismodule_getmoduleuserfromusername" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleUser *RedisModule_GetModuleUserFromUserName(RedisModuleString *name);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>A <code>RedisModuleUser</code> can be used to check if command, key or channel can be executed or
accessed according to the ACLs rules associated with that user.
When a Module wants to do ACL checks on a general ACL user (not created by <a href="#RedisModule_CreateModuleUser"><code>RedisModule_CreateModuleUser</code></a>),
it can get the <code>RedisModuleUser</code> from this API, based on the user name retrieved by <a href="#RedisModule_GetCurrentUserName"><code>RedisModule_GetCurrentUserName</code></a>.</p>
<p>Since a general ACL user can be deleted at any time, this <code>RedisModuleUser</code> should be used only in the context
where this function was called. In order to do ACL checks out of that context, the Module can store the user name,
and call this API at any other context.</p>
<p>Returns NULL if the user is disabled or the user does not exist.
The caller should later free the user using the function <a href="#RedisModule_FreeModuleUser"><code>RedisModule_FreeModuleUser()</code></a>.</p>
<p><span id="RedisModule_ACLCheckCommandPermissions"></span></p>
<h3 id="redismodule_aclcheckcommandpermissions"><code>RedisModule_ACLCheckCommandPermissions</code><a class="headerlink" href="#redismodule_aclcheckcommandpermissions" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ACLCheckCommandPermissions(RedisModuleUser *user,
                                           RedisModuleString **argv,
                                           int argc);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Checks if the command can be executed by the user, according to the ACLs associated with it.</p>
<p>On success a <code>REDISMODULE_OK</code> is returned, otherwise
<code>REDISMODULE_ERR</code> is returned and errno is set to the following values:</p>
<ul>
<li>ENOENT: Specified command does not exist.</li>
<li>EACCES: Command cannot be executed, according to ACL rules</li>
</ul>
<p><span id="RedisModule_ACLCheckKeyPermissions"></span></p>
<h3 id="redismodule_aclcheckkeypermissions"><code>RedisModule_ACLCheckKeyPermissions</code><a class="headerlink" href="#redismodule_aclcheckkeypermissions" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ACLCheckKeyPermissions(RedisModuleUser *user,
                                       RedisModuleString *key,
                                       int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Check if the key can be accessed by the user according to the ACLs attached to the user
and the flags representing the key access. The flags are the same that are used in the
keyspec for logical operations. These flags are documented in <a href="#RedisModule_SetCommandInfo"><code>RedisModule_SetCommandInfo</code></a> as
the <code>REDISMODULE_CMD_KEY_ACCESS</code>, <code>REDISMODULE_CMD_KEY_UPDATE</code>, <code>REDISMODULE_CMD_KEY_INSERT</code>,
and <code>REDISMODULE_CMD_KEY_DELETE</code> flags.</p>
<p>If no flags are supplied, the user is still required to have some access to the key for
this command to return successfully.</p>
<p>If the user is able to access the key then <code>REDISMODULE_OK</code> is returned, otherwise
<code>REDISMODULE_ERR</code> is returned and errno is set to one of the following values:</p>
<ul>
<li>EINVAL: The provided flags are invalid.</li>
<li>EACCESS: The user does not have permission to access the key.</li>
</ul>
<p><span id="RedisModule_ACLCheckChannelPermissions"></span></p>
<h3 id="redismodule_aclcheckchannelpermissions"><code>RedisModule_ACLCheckChannelPermissions</code><a class="headerlink" href="#redismodule_aclcheckchannelpermissions" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ACLCheckChannelPermissions(RedisModuleUser *user,
                                           RedisModuleString *ch,
                                           int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Check if the pubsub channel can be accessed by the user based off of the given
access flags. See <a href="#RedisModule_ChannelAtPosWithFlags"><code>RedisModule_ChannelAtPosWithFlags</code></a> for more information about the
possible flags that can be passed in.</p>
<p>If the user is able to access the pubsub channel then <code>REDISMODULE_OK</code> is returned, otherwise
<code>REDISMODULE_ERR</code> is returned and errno is set to one of the following values:</p>
<ul>
<li>EINVAL: The provided flags are invalid.</li>
<li>EACCESS: The user does not have permission to access the pubsub channel.</li>
</ul>
<p><span id="RedisModule_ACLAddLogEntry"></span></p>
<h3 id="redismodule_acladdlogentry"><code>RedisModule_ACLAddLogEntry</code><a class="headerlink" href="#redismodule_acladdlogentry" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ACLAddLogEntry(RedisModuleCtx *ctx,
                               RedisModuleUser *user,
                               RedisModuleString *object,
                               RedisModuleACLLogEntryReason reason);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Adds a new entry in the ACL log.
Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> on error.</p>
<p>For more information about ACL log, please refer to <a href="https://redis.io/commands/acl-log">https://redis.io/commands/acl-log</a></p>
<p><span id="RedisModule_ACLAddLogEntryByUserName"></span></p>
<h3 id="redismodule_acladdlogentrybyusername"><code>RedisModule_ACLAddLogEntryByUserName</code><a class="headerlink" href="#redismodule_acladdlogentrybyusername" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ACLAddLogEntryByUserName(RedisModuleCtx *ctx,
                                         RedisModuleString *username,
                                         RedisModuleString *object,
                                         RedisModuleACLLogEntryReason reason);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Adds a new entry in the ACL log with the <code>username</code> <code>RedisModuleString</code> provided.
Returns <code>REDISMODULE_OK</code> on success and <code>REDISMODULE_ERR</code> on error.</p>
<p>For more information about ACL log, please refer to <a href="https://redis.io/commands/acl-log">https://redis.io/commands/acl-log</a></p>
<p><span id="RedisModule_AuthenticateClientWithUser"></span></p>
<h3 id="redismodule_authenticateclientwithuser"><code>RedisModule_AuthenticateClientWithUser</code><a class="headerlink" href="#redismodule_authenticateclientwithuser" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_AuthenticateClientWithUser(RedisModuleCtx *ctx,
                                           RedisModuleUser *module_user,
                                           RedisModuleUserChangedFunc callback,
                                           void *privdata,
                                           uint64_t *client_id);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Authenticate the current context's user with the provided redis acl user.
Returns <code>REDISMODULE_ERR</code> if the user is disabled.</p>
<p>See authenticateClientWithUser for information about callback, <code>client_id</code>,
and general usage for authentication.</p>
<p><span id="RedisModule_AuthenticateClientWithACLUser"></span></p>
<h3 id="redismodule_authenticateclientwithacluser"><code>RedisModule_AuthenticateClientWithACLUser</code><a class="headerlink" href="#redismodule_authenticateclientwithacluser" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_AuthenticateClientWithACLUser(RedisModuleCtx *ctx,
                                              const char *name,
                                              size_t len,
                                              RedisModuleUserChangedFunc callback,
                                              void *privdata,
                                              uint64_t *client_id);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Authenticate the current context's user with the provided redis acl user.
Returns <code>REDISMODULE_ERR</code> if the user is disabled or the user does not exist.</p>
<p>See authenticateClientWithUser for information about callback, <code>client_id</code>,
and general usage for authentication.</p>
<p><span id="RedisModule_DeauthenticateAndCloseClient"></span></p>
<h3 id="redismodule_deauthenticateandcloseclient"><code>RedisModule_DeauthenticateAndCloseClient</code><a class="headerlink" href="#redismodule_deauthenticateandcloseclient" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DeauthenticateAndCloseClient(RedisModuleCtx *ctx,
                                             uint64_t client_id);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Deauthenticate and close the client. The client resources will not be
immediately freed, but will be cleaned up in a background job. This is
the recommended way to deauthenticate a client since most clients can't
handle users becoming deauthenticated. Returns <code>REDISMODULE_ERR</code> when the
client doesn't exist and <code>REDISMODULE_OK</code> when the operation was successful.</p>
<p>The client ID is returned from the <a href="#RedisModule_AuthenticateClientWithUser"><code>RedisModule_AuthenticateClientWithUser</code></a> and
<a href="#RedisModule_AuthenticateClientWithACLUser"><code>RedisModule_AuthenticateClientWithACLUser</code></a> APIs, but can be obtained through
the CLIENT api or through server events.</p>
<p>This function is not thread safe, and must be executed within the context
of a command or thread safe context.</p>
<p><span id="RedisModule_RedactClientCommandArgument"></span></p>
<h3 id="redismodule_redactclientcommandargument"><code>RedisModule_RedactClientCommandArgument</code><a class="headerlink" href="#redismodule_redactclientcommandargument" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RedactClientCommandArgument(RedisModuleCtx *ctx, int pos);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Redact the client command argument specified at the given position. Redacted arguments 
are obfuscated in user facing commands such as SLOWLOG or MONITOR, as well as
never being written to server logs. This command may be called multiple times on the
same position.</p>
<p>Note that the command name, position 0, can not be redacted. </p>
<p>Returns <code>REDISMODULE_OK</code> if the argument was redacted and <code>REDISMODULE_ERR</code> if there 
was an invalid parameter passed in or the position is outside the client 
argument range.</p>
<p><span id="RedisModule_GetClientCertificate"></span></p>
<h3 id="redismodule_getclientcertificate"><code>RedisModule_GetClientCertificate</code><a class="headerlink" href="#redismodule_getclientcertificate" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_GetClientCertificate(RedisModuleCtx *ctx,
                                                    uint64_t client_id);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Return the X.509 client-side certificate used by the client to authenticate
this connection.</p>
<p>The return value is an allocated <code>RedisModuleString</code> that is a X.509 certificate
encoded in PEM (Base64) format. It should be freed (or auto-freed) by the caller.</p>
<p>A NULL value is returned in the following conditions:</p>
<ul>
<li>Connection ID does not exist</li>
<li>Connection is not a TLS connection</li>
<li>Connection is a TLS connection but no client certificate was used</li>
</ul>
<p><span id="section-modules-dictionary-api"></span></p>
<h2 id="modules-dictionary-api">Modules Dictionary API<a class="headerlink" href="#modules-dictionary-api" title="Permanent link">⚓︎</a></h2>
<p>Implements a sorted dictionary (actually backed by a radix tree) with
the usual get / set / del / num-items API, together with an iterator
capable of going back and forth.</p>
<p><span id="RedisModule_CreateDict"></span></p>
<h3 id="redismodule_createdict"><code>RedisModule_CreateDict</code><a class="headerlink" href="#redismodule_createdict" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleDict *RedisModule_CreateDict(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Create a new dictionary. The 'ctx' pointer can be the current module context
or NULL, depending on what you want. Please follow the following rules:</p>
<ol>
<li>Use a NULL context if you plan to retain a reference to this dictionary
   that will survive the time of the module callback where you created it.</li>
<li>Use a NULL context if no context is available at the time you are creating
   the dictionary (of course...).</li>
<li>However use the current callback context as 'ctx' argument if the
   dictionary time to live is just limited to the callback scope. In this
   case, if enabled, you can enjoy the automatic memory management that will
   reclaim the dictionary memory, as well as the strings returned by the
   Next / Prev dictionary iterator calls.</li>
</ol>
<p><span id="RedisModule_FreeDict"></span></p>
<h3 id="redismodule_freedict"><code>RedisModule_FreeDict</code><a class="headerlink" href="#redismodule_freedict" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeDict(RedisModuleCtx *ctx, RedisModuleDict *d);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Free a dictionary created with <a href="#RedisModule_CreateDict"><code>RedisModule_CreateDict()</code></a>. You need to pass the
context pointer 'ctx' only if the dictionary was created using the
context instead of passing NULL.</p>
<p><span id="RedisModule_DictSize"></span></p>
<h3 id="redismodule_dictsize"><code>RedisModule_DictSize</code><a class="headerlink" href="#redismodule_dictsize" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>uint64_t RedisModule_DictSize(RedisModuleDict *d);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return the size of the dictionary (number of keys).</p>
<p><span id="RedisModule_DictSetC"></span></p>
<h3 id="redismodule_dictsetc"><code>RedisModule_DictSetC</code><a class="headerlink" href="#redismodule_dictsetc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictSetC(RedisModuleDict *d,
                         void *key,
                         size_t keylen,
                         void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Store the specified key into the dictionary, setting its value to the
pointer 'ptr'. If the key was added with success, since it did not
already exist, <code>REDISMODULE_OK</code> is returned. Otherwise if the key already
exists the function returns <code>REDISMODULE_ERR</code>.</p>
<p><span id="RedisModule_DictReplaceC"></span></p>
<h3 id="redismodule_dictreplacec"><code>RedisModule_DictReplaceC</code><a class="headerlink" href="#redismodule_dictreplacec" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictReplaceC(RedisModuleDict *d,
                             void *key,
                             size_t keylen,
                             void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictSetC"><code>RedisModule_DictSetC()</code></a> but will replace the key with the new
value if the key already exists.</p>
<p><span id="RedisModule_DictSet"></span></p>
<h3 id="redismodule_dictset"><code>RedisModule_DictSet</code><a class="headerlink" href="#redismodule_dictset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictSet(RedisModuleDict *d, RedisModuleString *key, void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictSetC"><code>RedisModule_DictSetC()</code></a> but takes the key as a <code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictReplace"></span></p>
<h3 id="redismodule_dictreplace"><code>RedisModule_DictReplace</code><a class="headerlink" href="#redismodule_dictreplace" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictReplace(RedisModuleDict *d,
                            RedisModuleString *key,
                            void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictReplaceC"><code>RedisModule_DictReplaceC()</code></a> but takes the key as a <code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictGetC"></span></p>
<h3 id="redismodule_dictgetc"><code>RedisModule_DictGetC</code><a class="headerlink" href="#redismodule_dictgetc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_DictGetC(RedisModuleDict *d,
                           void *key,
                           size_t keylen,
                           int *nokey);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return the value stored at the specified key. The function returns NULL
both in the case the key does not exist, or if you actually stored
NULL at key. So, optionally, if the 'nokey' pointer is not NULL, it will
be set by reference to 1 if the key does not exist, or to 0 if the key
exists.</p>
<p><span id="RedisModule_DictGet"></span></p>
<h3 id="redismodule_dictget"><code>RedisModule_DictGet</code><a class="headerlink" href="#redismodule_dictget" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_DictGet(RedisModuleDict *d,
                          RedisModuleString *key,
                          int *nokey);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictGetC"><code>RedisModule_DictGetC()</code></a> but takes the key as a <code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictDelC"></span></p>
<h3 id="redismodule_dictdelc"><code>RedisModule_DictDelC</code><a class="headerlink" href="#redismodule_dictdelc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictDelC(RedisModuleDict *d,
                         void *key,
                         size_t keylen,
                         void *oldval);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Remove the specified key from the dictionary, returning <code>REDISMODULE_OK</code> if
the key was found and deleted, or <code>REDISMODULE_ERR</code> if instead there was
no such key in the dictionary. When the operation is successful, if
'oldval' is not NULL, then '*oldval' is set to the value stored at the
key before it was deleted. Using this feature it is possible to get
a pointer to the value (for instance in order to release it), without
having to call <a href="#RedisModule_DictGet"><code>RedisModule_DictGet()</code></a> before deleting the key.</p>
<p><span id="RedisModule_DictDel"></span></p>
<h3 id="redismodule_dictdel"><code>RedisModule_DictDel</code><a class="headerlink" href="#redismodule_dictdel" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictDel(RedisModuleDict *d,
                        RedisModuleString *key,
                        void *oldval);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictDelC"><code>RedisModule_DictDelC()</code></a> but gets the key as a <code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictIteratorStartC"></span></p>
<h3 id="redismodule_dictiteratorstartc"><code>RedisModule_DictIteratorStartC</code><a class="headerlink" href="#redismodule_dictiteratorstartc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleDictIter *RedisModule_DictIteratorStartC(RedisModuleDict *d,
                                                    const char *op,
                                                    void *key,
                                                    size_t keylen);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return an iterator, setup in order to start iterating from the specified
key by applying the operator 'op', which is just a string specifying the
comparison operator to use in order to seek the first element. The
operators available are:</p>
<ul>
<li><code>^</code>   – Seek the first (lexicographically smaller) key.</li>
<li><code>$</code>   – Seek the last  (lexicographically bigger) key.</li>
<li><code>&gt;</code>   – Seek the first element greater than the specified key.</li>
<li><code>&gt;=</code>  – Seek the first element greater or equal than the specified key.</li>
<li><code>&lt;</code>   – Seek the first element smaller than the specified key.</li>
<li><code>&lt;=</code>  – Seek the first element smaller or equal than the specified key.</li>
<li><code>==</code>  – Seek the first element matching exactly the specified key.</li>
</ul>
<p>Note that for <code>^</code> and <code>$</code> the passed key is not used, and the user may
just pass NULL with a length of 0.</p>
<p>If the element to start the iteration cannot be seeked based on the
key and operator passed, <a href="#RedisModule_DictNext"><code>RedisModule_DictNext()</code></a> / Prev() will just return
<code>REDISMODULE_ERR</code> at the first call, otherwise they'll produce elements.</p>
<p><span id="RedisModule_DictIteratorStart"></span></p>
<h3 id="redismodule_dictiteratorstart"><code>RedisModule_DictIteratorStart</code><a class="headerlink" href="#redismodule_dictiteratorstart" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleDictIter *RedisModule_DictIteratorStart(RedisModuleDict *d,
                                                   const char *op,
                                                   RedisModuleString *key);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Exactly like <a href="#RedisModule_DictIteratorStartC"><code>RedisModule_DictIteratorStartC</code></a>, but the key is passed as a
<code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictIteratorStop"></span></p>
<h3 id="redismodule_dictiteratorstop"><code>RedisModule_DictIteratorStop</code><a class="headerlink" href="#redismodule_dictiteratorstop" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_DictIteratorStop(RedisModuleDictIter *di);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Release the iterator created with <a href="#RedisModule_DictIteratorStart"><code>RedisModule_DictIteratorStart()</code></a>. This call
is mandatory otherwise a memory leak is introduced in the module.</p>
<p><span id="RedisModule_DictIteratorReseekC"></span></p>
<h3 id="redismodule_dictiteratorreseekc"><code>RedisModule_DictIteratorReseekC</code><a class="headerlink" href="#redismodule_dictiteratorreseekc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictIteratorReseekC(RedisModuleDictIter *di,
                                    const char *op,
                                    void *key,
                                    size_t keylen);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>After its creation with <a href="#RedisModule_DictIteratorStart"><code>RedisModule_DictIteratorStart()</code></a>, it is possible to
change the currently selected element of the iterator by using this
API call. The result based on the operator and key is exactly like
the function <a href="#RedisModule_DictIteratorStart"><code>RedisModule_DictIteratorStart()</code></a>, however in this case the
return value is just <code>REDISMODULE_OK</code> in case the seeked element was found,
or <code>REDISMODULE_ERR</code> in case it was not possible to seek the specified
element. It is possible to reseek an iterator as many times as you want.</p>
<p><span id="RedisModule_DictIteratorReseek"></span></p>
<h3 id="redismodule_dictiteratorreseek"><code>RedisModule_DictIteratorReseek</code><a class="headerlink" href="#redismodule_dictiteratorreseek" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictIteratorReseek(RedisModuleDictIter *di,
                                   const char *op,
                                   RedisModuleString *key);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictIteratorReseekC"><code>RedisModule_DictIteratorReseekC()</code></a> but takes the key as a
<code>RedisModuleString</code>.</p>
<p><span id="RedisModule_DictNextC"></span></p>
<h3 id="redismodule_dictnextc"><code>RedisModule_DictNextC</code><a class="headerlink" href="#redismodule_dictnextc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_DictNextC(RedisModuleDictIter *di,
                            size_t *keylen,
                            void **dataptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return the current item of the dictionary iterator <code>di</code> and steps to the
next element. If the iterator already yield the last element and there
are no other elements to return, NULL is returned, otherwise a pointer
to a string representing the key is provided, and the <code>*keylen</code> length
is set by reference (if keylen is not NULL). The <code>*dataptr</code>, if not NULL
is set to the value of the pointer stored at the returned key as auxiliary
data (as set by the <a href="#RedisModule_DictSet"><code>RedisModule_DictSet</code></a> API).</p>
<p>Usage example:</p>
<div class="highlight"><pre><span></span><code> ... create the iterator here ...
 char *key;
 void *data;
 while((key = RedisModule_DictNextC(iter,&amp;keylen,&amp;data)) != NULL) {
     printf(&quot;%.*s %p\n&quot;, (int)keylen, key, data);
 }
</code></pre></div>
<p>The returned pointer is of type void because sometimes it makes sense
to cast it to a <code>char*</code> sometimes to an unsigned <code>char*</code> depending on the
fact it contains or not binary data, so this API ends being more
comfortable to use.</p>
<p>The validity of the returned pointer is until the next call to the
next/prev iterator step. Also the pointer is no longer valid once the
iterator is released.</p>
<p><span id="RedisModule_DictPrevC"></span></p>
<h3 id="redismodule_dictprevc"><code>RedisModule_DictPrevC</code><a class="headerlink" href="#redismodule_dictprevc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_DictPrevC(RedisModuleDictIter *di,
                            size_t *keylen,
                            void **dataptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>This function is exactly like <a href="#RedisModule_DictNext"><code>RedisModule_DictNext()</code></a> but after returning
the currently selected element in the iterator, it selects the previous
element (lexicographically smaller) instead of the next one.</p>
<p><span id="RedisModule_DictNext"></span></p>
<h3 id="redismodule_dictnext"><code>RedisModule_DictNext</code><a class="headerlink" href="#redismodule_dictnext" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_DictNext(RedisModuleCtx *ctx,
                                        RedisModuleDictIter *di,
                                        void **dataptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <code>RedisModuleNextC()</code>, but instead of returning an internally allocated
buffer and key length, it returns directly a module string object allocated
in the specified context 'ctx' (that may be NULL exactly like for the main
API <a href="#RedisModule_CreateString"><code>RedisModule_CreateString</code></a>).</p>
<p>The returned string object should be deallocated after use, either manually
or by using a context that has automatic memory management active.</p>
<p><span id="RedisModule_DictPrev"></span></p>
<h3 id="redismodule_dictprev"><code>RedisModule_DictPrev</code><a class="headerlink" href="#redismodule_dictprev" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_DictPrev(RedisModuleCtx *ctx,
                                        RedisModuleDictIter *di,
                                        void **dataptr);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictNext"><code>RedisModule_DictNext()</code></a> but after returning the currently selected
element in the iterator, it selects the previous element (lexicographically
smaller) instead of the next one.</p>
<p><span id="RedisModule_DictCompareC"></span></p>
<h3 id="redismodule_dictcomparec"><code>RedisModule_DictCompareC</code><a class="headerlink" href="#redismodule_dictcomparec" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictCompareC(RedisModuleDictIter *di,
                             const char *op,
                             void *key,
                             size_t keylen);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Compare the element currently pointed by the iterator to the specified
element given by key/keylen, according to the operator 'op' (the set of
valid operators are the same valid for <a href="#RedisModule_DictIteratorStart"><code>RedisModule_DictIteratorStart</code></a>).
If the comparison is successful the command returns <code>REDISMODULE_OK</code>
otherwise <code>REDISMODULE_ERR</code> is returned.</p>
<p>This is useful when we want to just emit a lexicographical range, so
in the loop, as we iterate elements, we can also check if we are still
on range.</p>
<p>The function return <code>REDISMODULE_ERR</code> if the iterator reached the
end of elements condition as well.</p>
<p><span id="RedisModule_DictCompare"></span></p>
<h3 id="redismodule_dictcompare"><code>RedisModule_DictCompare</code><a class="headerlink" href="#redismodule_dictcompare" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DictCompare(RedisModuleDictIter *di,
                            const char *op,
                            RedisModuleString *key);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_DictCompareC"><code>RedisModule_DictCompareC</code></a> but gets the key to compare with the current
iterator key as a <code>RedisModuleString</code>.</p>
<p><span id="section-modules-info-fields"></span></p>
<h2 id="modules-info-fields">Modules Info fields<a class="headerlink" href="#modules-info-fields" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_InfoAddSection"></span></p>
<h3 id="redismodule_infoaddsection"><code>RedisModule_InfoAddSection</code><a class="headerlink" href="#redismodule_infoaddsection" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddSection(RedisModuleInfoCtx *ctx, const char *name);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Used to start a new section, before adding any fields. the section name will
be prefixed by <code>&lt;modulename&gt;_</code> and must only include A-Z,a-z,0-9.
NULL or empty string indicates the default section (only <code>&lt;modulename&gt;</code>) is used.
When return value is <code>REDISMODULE_ERR</code>, the section should and will be skipped.</p>
<p><span id="RedisModule_InfoBeginDictField"></span></p>
<h3 id="redismodule_infobegindictfield"><code>RedisModule_InfoBeginDictField</code><a class="headerlink" href="#redismodule_infobegindictfield" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoBeginDictField(RedisModuleInfoCtx *ctx, const char *name);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Starts a dict field, similar to the ones in INFO KEYSPACE. Use normal
<code>RedisModule_InfoAddField</code>* functions to add the items to this field, and
terminate with <a href="#RedisModule_InfoEndDictField"><code>RedisModule_InfoEndDictField</code></a>.</p>
<p><span id="RedisModule_InfoEndDictField"></span></p>
<h3 id="redismodule_infoenddictfield"><code>RedisModule_InfoEndDictField</code><a class="headerlink" href="#redismodule_infoenddictfield" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoEndDictField(RedisModuleInfoCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Ends a dict field, see <a href="#RedisModule_InfoBeginDictField"><code>RedisModule_InfoBeginDictField</code></a></p>
<p><span id="RedisModule_InfoAddFieldString"></span></p>
<h3 id="redismodule_infoaddfieldstring"><code>RedisModule_InfoAddFieldString</code><a class="headerlink" href="#redismodule_infoaddfieldstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddFieldString(RedisModuleInfoCtx *ctx,
                                   const char *field,
                                   RedisModuleString *value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Used by <code>RedisModuleInfoFunc</code> to add info fields.
Each field will be automatically prefixed by <code>&lt;modulename&gt;_</code>.
Field names or values must not include <code>\r\n</code> or <code>:</code>.</p>
<p><span id="RedisModule_InfoAddFieldCString"></span></p>
<h3 id="redismodule_infoaddfieldcstring"><code>RedisModule_InfoAddFieldCString</code><a class="headerlink" href="#redismodule_infoaddfieldcstring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddFieldCString(RedisModuleInfoCtx *ctx,
                                    const char *field,
                                    const char *value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>See <a href="#RedisModule_InfoAddFieldString"><code>RedisModule_InfoAddFieldString()</code></a>.</p>
<p><span id="RedisModule_InfoAddFieldDouble"></span></p>
<h3 id="redismodule_infoaddfielddouble"><code>RedisModule_InfoAddFieldDouble</code><a class="headerlink" href="#redismodule_infoaddfielddouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddFieldDouble(RedisModuleInfoCtx *ctx,
                                   const char *field,
                                   double value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>See <a href="#RedisModule_InfoAddFieldString"><code>RedisModule_InfoAddFieldString()</code></a>.</p>
<p><span id="RedisModule_InfoAddFieldLongLong"></span></p>
<h3 id="redismodule_infoaddfieldlonglong"><code>RedisModule_InfoAddFieldLongLong</code><a class="headerlink" href="#redismodule_infoaddfieldlonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddFieldLongLong(RedisModuleInfoCtx *ctx,
                                     const char *field,
                                     long long value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>See <a href="#RedisModule_InfoAddFieldString"><code>RedisModule_InfoAddFieldString()</code></a>.</p>
<p><span id="RedisModule_InfoAddFieldULongLong"></span></p>
<h3 id="redismodule_infoaddfieldulonglong"><code>RedisModule_InfoAddFieldULongLong</code><a class="headerlink" href="#redismodule_infoaddfieldulonglong" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_InfoAddFieldULongLong(RedisModuleInfoCtx *ctx,
                                      const char *field,
                                      unsigned long long value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>See <a href="#RedisModule_InfoAddFieldString"><code>RedisModule_InfoAddFieldString()</code></a>.</p>
<p><span id="RedisModule_RegisterInfoFunc"></span></p>
<h3 id="redismodule_registerinfofunc"><code>RedisModule_RegisterInfoFunc</code><a class="headerlink" href="#redismodule_registerinfofunc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterInfoFunc(RedisModuleCtx *ctx, RedisModuleInfoFunc cb);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Registers callback for the INFO command. The callback should add INFO fields
by calling the <code>RedisModule_InfoAddField*()</code> functions.</p>
<p><span id="RedisModule_GetServerInfo"></span></p>
<h3 id="redismodule_getserverinfo"><code>RedisModule_GetServerInfo</code><a class="headerlink" href="#redismodule_getserverinfo" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleServerInfoData *RedisModule_GetServerInfo(RedisModuleCtx *ctx,
                                                     const char *section);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get information about the server similar to the one that returns from the
INFO command. This function takes an optional 'section' argument that may
be NULL. The return value holds the output and can be used with
<a href="#RedisModule_ServerInfoGetField"><code>RedisModule_ServerInfoGetField</code></a> and alike to get the individual fields.
When done, it needs to be freed with <a href="#RedisModule_FreeServerInfo"><code>RedisModule_FreeServerInfo</code></a> or with the
automatic memory management mechanism if enabled.</p>
<p><span id="RedisModule_FreeServerInfo"></span></p>
<h3 id="redismodule_freeserverinfo"><code>RedisModule_FreeServerInfo</code><a class="headerlink" href="#redismodule_freeserverinfo" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_FreeServerInfo(RedisModuleCtx *ctx,
                                RedisModuleServerInfoData *data);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Free data created with <a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo()</code></a>. You need to pass the
context pointer 'ctx' only if the dictionary was created using the
context instead of passing NULL.</p>
<p><span id="RedisModule_ServerInfoGetField"></span></p>
<h3 id="redismodule_serverinfogetfield"><code>RedisModule_ServerInfoGetField</code><a class="headerlink" href="#redismodule_serverinfogetfield" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_ServerInfoGetField(RedisModuleCtx *ctx,
                                                  RedisModuleServerInfoData *data,
                                                  const char* field);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the value of a field from data collected with <a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo()</code></a>. You
need to pass the context pointer 'ctx' only if you want to use auto memory
mechanism to release the returned string. Return value will be NULL if the
field was not found.</p>
<p><span id="RedisModule_ServerInfoGetFieldC"></span></p>
<h3 id="redismodule_serverinfogetfieldc"><code>RedisModule_ServerInfoGetFieldC</code><a class="headerlink" href="#redismodule_serverinfogetfieldc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_ServerInfoGetFieldC(RedisModuleServerInfoData *data,
                                            const char* field);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Similar to <a href="#RedisModule_ServerInfoGetField"><code>RedisModule_ServerInfoGetField</code></a>, but returns a char* which should not be freed but the caller.</p>
<p><span id="RedisModule_ServerInfoGetFieldSigned"></span></p>
<h3 id="redismodule_serverinfogetfieldsigned"><code>RedisModule_ServerInfoGetFieldSigned</code><a class="headerlink" href="#redismodule_serverinfogetfieldsigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>long long RedisModule_ServerInfoGetFieldSigned(RedisModuleServerInfoData *data,
                                               const char* field,
                                               int *out_err);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the value of a field from data collected with <a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo()</code></a>. If the
field is not found, or is not numerical or out of range, return value will be
0, and the optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<p><span id="RedisModule_ServerInfoGetFieldUnsigned"></span></p>
<h3 id="redismodule_serverinfogetfieldunsigned"><code>RedisModule_ServerInfoGetFieldUnsigned</code><a class="headerlink" href="#redismodule_serverinfogetfieldunsigned" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>unsigned long long RedisModule_ServerInfoGetFieldUnsigned(RedisModuleServerInfoData *data,
                                                          const char* field,
                                                          int *out_err);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the value of a field from data collected with <a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo()</code></a>. If the
field is not found, or is not numerical or out of range, return value will be
0, and the optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<p><span id="RedisModule_ServerInfoGetFieldDouble"></span></p>
<h3 id="redismodule_serverinfogetfielddouble"><code>RedisModule_ServerInfoGetFieldDouble</code><a class="headerlink" href="#redismodule_serverinfogetfielddouble" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>double RedisModule_ServerInfoGetFieldDouble(RedisModuleServerInfoData *data,
                                            const char* field,
                                            int *out_err);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Get the value of a field from data collected with <a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo()</code></a>. If the
field is not found, or is not a double, return value will be 0, and the
optional <code>out_err</code> argument will be set to <code>REDISMODULE_ERR</code>.</p>
<p><span id="section-modules-utility-apis"></span></p>
<h2 id="modules-utility-apis">Modules utility APIs<a class="headerlink" href="#modules-utility-apis" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_GetRandomBytes"></span></p>
<h3 id="redismodule_getrandombytes"><code>RedisModule_GetRandomBytes</code><a class="headerlink" href="#redismodule_getrandombytes" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_GetRandomBytes(unsigned char *dst, size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Return random bytes using SHA1 in counter mode with a /dev/urandom
initialized seed. This function is fast so can be used to generate
many bytes without any effect on the operating system entropy pool.
Currently this function is not thread safe.</p>
<p><span id="RedisModule_GetRandomHexChars"></span></p>
<h3 id="redismodule_getrandomhexchars"><code>RedisModule_GetRandomHexChars</code><a class="headerlink" href="#redismodule_getrandomhexchars" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_GetRandomHexChars(char *dst, size_t len);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.0</p>
<p>Like <a href="#RedisModule_GetRandomBytes"><code>RedisModule_GetRandomBytes()</code></a> but instead of setting the string to
random bytes the string is set to random characters in the in the
hex charset [0-9a-f].</p>
<p><span id="section-modules-api-exporting-importing"></span></p>
<h2 id="modules-api-exporting-importing">Modules API exporting / importing<a class="headerlink" href="#modules-api-exporting-importing" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_ExportSharedAPI"></span></p>
<h3 id="redismodule_exportsharedapi"><code>RedisModule_ExportSharedAPI</code><a class="headerlink" href="#redismodule_exportsharedapi" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ExportSharedAPI(RedisModuleCtx *ctx,
                                const char *apiname,
                                void *func);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.4</p>
<p>This function is called by a module in order to export some API with a
given name. Other modules will be able to use this API by calling the
symmetrical function <a href="#RedisModule_GetSharedAPI"><code>RedisModule_GetSharedAPI()</code></a> and casting the return value to
the right function pointer.</p>
<p>The function will return <code>REDISMODULE_OK</code> if the name is not already taken,
otherwise <code>REDISMODULE_ERR</code> will be returned and no operation will be
performed.</p>
<p>IMPORTANT: the apiname argument should be a string literal with static
lifetime. The API relies on the fact that it will always be valid in
the future.</p>
<p><span id="RedisModule_GetSharedAPI"></span></p>
<h3 id="redismodule_getsharedapi"><code>RedisModule_GetSharedAPI</code><a class="headerlink" href="#redismodule_getsharedapi" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_GetSharedAPI(RedisModuleCtx *ctx, const char *apiname);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.4</p>
<p>Request an exported API pointer. The return value is just a void pointer
that the caller of this function will be required to cast to the right
function pointer, so this is a private contract between modules.</p>
<p>If the requested API is not available then NULL is returned. Because
modules can be loaded at different times with different order, this
function calls should be put inside some module generic API registering
step, that is called every time a module attempts to execute a
command that requires external APIs: if some API cannot be resolved, the
command should return an error.</p>
<p>Here is an example:</p>
<div class="highlight"><pre><span></span><code>int ... myCommandImplementation(void) {
   if (getExternalAPIs() == 0) {
        reply with an error here if we cannot have the APIs
   }
   // Use the API:
   myFunctionPointer(foo);
}
</code></pre></div>
<p>And the function registerAPI() is:</p>
<div class="highlight"><pre><span></span><code>int getExternalAPIs(void) {
    static int api_loaded = 0;
    if (api_loaded != 0) return 1; // APIs already resolved.

    myFunctionPointer = RedisModule_GetSharedAPI(&quot;...&quot;);
    if (myFunctionPointer == NULL) return 0;

    return 1;
}
</code></pre></div>
<p><span id="section-module-command-filter-api"></span></p>
<h2 id="module-command-filter-api">Module Command Filter API<a class="headerlink" href="#module-command-filter-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_RegisterCommandFilter"></span></p>
<h3 id="redismodule_registercommandfilter"><code>RedisModule_RegisterCommandFilter</code><a class="headerlink" href="#redismodule_registercommandfilter" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleCommandFilter *RedisModule_RegisterCommandFilter(RedisModuleCtx *ctx,
                                                            RedisModuleCommandFilterFunc callback,
                                                            int flags);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Register a new command filter function.</p>
<p>Command filtering makes it possible for modules to extend Redis by plugging
into the execution flow of all commands.</p>
<p>A registered filter gets called before Redis executes <em>any</em> command.  This
includes both core Redis commands and commands registered by any module.  The
filter applies in all execution paths including:</p>
<ol>
<li>Invocation by a client.</li>
<li>Invocation through <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> by any module.</li>
<li>Invocation through Lua <code>redis.call()</code>.</li>
<li>Replication of a command from a master.</li>
</ol>
<p>The filter executes in a special filter context, which is different and more
limited than a <code>RedisModuleCtx</code>.  Because the filter affects any command, it
must be implemented in a very efficient way to reduce the performance impact
on Redis.  All Redis Module API calls that require a valid context (such as
<a href="#RedisModule_Call"><code>RedisModule_Call()</code></a>, <a href="#RedisModule_OpenKey"><code>RedisModule_OpenKey()</code></a>, etc.) are not supported in a
filter context.</p>
<p>The <code>RedisModuleCommandFilterCtx</code> can be used to inspect or modify the
executed command and its arguments.  As the filter executes before Redis
begins processing the command, any change will affect the way the command is
processed.  For example, a module can override Redis commands this way:</p>
<ol>
<li>Register a <code>MODULE.SET</code> command which implements an extended version of
   the Redis <code>SET</code> command.</li>
<li>Register a command filter which detects invocation of <code>SET</code> on a specific
   pattern of keys.  Once detected, the filter will replace the first
   argument from <code>SET</code> to <code>MODULE.SET</code>.</li>
<li>When filter execution is complete, Redis considers the new command name
   and therefore executes the module's own command.</li>
</ol>
<p>Note that in the above use case, if <code>MODULE.SET</code> itself uses
<a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> the filter will be applied on that call as well.  If
that is not desired, the <code>REDISMODULE_CMDFILTER_NOSELF</code> flag can be set when
registering the filter.</p>
<p>The <code>REDISMODULE_CMDFILTER_NOSELF</code> flag prevents execution flows that
originate from the module's own <a href="#RedisModule_Call"><code>RedisModule_Call()</code></a> from reaching the filter.  This
flag is effective for all execution flows, including nested ones, as long as
the execution begins from the module's command context or a thread-safe
context that is associated with a blocking command.</p>
<p>Detached thread-safe contexts are <em>not</em> associated with the module and cannot
be protected by this flag.</p>
<p>If multiple filters are registered (by the same or different modules), they
are executed in the order of registration.</p>
<p><span id="RedisModule_UnregisterCommandFilter"></span></p>
<h3 id="redismodule_unregistercommandfilter"><code>RedisModule_UnregisterCommandFilter</code><a class="headerlink" href="#redismodule_unregistercommandfilter" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_UnregisterCommandFilter(RedisModuleCtx *ctx,
                                        RedisModuleCommandFilter *filter);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Unregister a command filter.</p>
<p><span id="RedisModule_CommandFilterArgsCount"></span></p>
<h3 id="redismodule_commandfilterargscount"><code>RedisModule_CommandFilterArgsCount</code><a class="headerlink" href="#redismodule_commandfilterargscount" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CommandFilterArgsCount(RedisModuleCommandFilterCtx *fctx);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Return the number of arguments a filtered command has.  The number of
arguments include the command itself.</p>
<p><span id="RedisModule_CommandFilterArgGet"></span></p>
<h3 id="redismodule_commandfilterargget"><code>RedisModule_CommandFilterArgGet</code><a class="headerlink" href="#redismodule_commandfilterargget" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_CommandFilterArgGet(RedisModuleCommandFilterCtx *fctx,
                                                   int pos);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Return the specified command argument.  The first argument (position 0) is
the command itself, and the rest are user-provided args.</p>
<p><span id="RedisModule_CommandFilterArgInsert"></span></p>
<h3 id="redismodule_commandfilterarginsert"><code>RedisModule_CommandFilterArgInsert</code><a class="headerlink" href="#redismodule_commandfilterarginsert" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CommandFilterArgInsert(RedisModuleCommandFilterCtx *fctx,
                                       int pos,
                                       RedisModuleString *arg);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Modify the filtered command by inserting a new argument at the specified
position.  The specified <code>RedisModuleString</code> argument may be used by Redis
after the filter context is destroyed, so it must not be auto-memory
allocated, freed or used elsewhere.</p>
<p><span id="RedisModule_CommandFilterArgReplace"></span></p>
<h3 id="redismodule_commandfilterargreplace"><code>RedisModule_CommandFilterArgReplace</code><a class="headerlink" href="#redismodule_commandfilterargreplace" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CommandFilterArgReplace(RedisModuleCommandFilterCtx *fctx,
                                        int pos,
                                        RedisModuleString *arg);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Modify the filtered command by replacing an existing argument with a new one.
The specified <code>RedisModuleString</code> argument may be used by Redis after the
filter context is destroyed, so it must not be auto-memory allocated, freed
or used elsewhere.</p>
<p><span id="RedisModule_CommandFilterArgDelete"></span></p>
<h3 id="redismodule_commandfilterargdelete"><code>RedisModule_CommandFilterArgDelete</code><a class="headerlink" href="#redismodule_commandfilterargdelete" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_CommandFilterArgDelete(RedisModuleCommandFilterCtx *fctx,
                                       int pos);
</code></pre></div>
<p><strong>Available since:</strong> 5.0.5</p>
<p>Modify the filtered command by deleting an argument at the specified
position.</p>
<p><span id="RedisModule_CommandFilterGetClientId"></span></p>
<h3 id="redismodule_commandfiltergetclientid"><code>RedisModule_CommandFilterGetClientId</code><a class="headerlink" href="#redismodule_commandfiltergetclientid" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>unsigned long long RedisModule_CommandFilterGetClientId(RedisModuleCommandFilterCtx *fctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Get Client ID for client that issued the command we are filtering</p>
<p><span id="RedisModule_MallocSize"></span></p>
<h3 id="redismodule_mallocsize"><code>RedisModule_MallocSize</code><a class="headerlink" href="#redismodule_mallocsize" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_MallocSize(void* ptr);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>For a given pointer allocated via <a href="#RedisModule_Alloc"><code>RedisModule_Alloc()</code></a> or
<a href="#RedisModule_Realloc"><code>RedisModule_Realloc()</code></a>, return the amount of memory allocated for it.
Note that this may be different (larger) than the memory we allocated
with the allocation calls, since sometimes the underlying allocator
will allocate more memory.</p>
<p><span id="RedisModule_MallocUsableSize"></span></p>
<h3 id="redismodule_mallocusablesize"><code>RedisModule_MallocUsableSize</code><a class="headerlink" href="#redismodule_mallocusablesize" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_MallocUsableSize(void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.1</p>
<p>Similar to <a href="#RedisModule_MallocSize"><code>RedisModule_MallocSize</code></a>, the difference is that <a href="#RedisModule_MallocUsableSize"><code>RedisModule_MallocUsableSize</code></a>
returns the usable size of memory by the module.</p>
<p><span id="RedisModule_MallocSizeString"></span></p>
<h3 id="redismodule_mallocsizestring"><code>RedisModule_MallocSizeString</code><a class="headerlink" href="#redismodule_mallocsizestring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_MallocSizeString(RedisModuleString* str);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Same as <a href="#RedisModule_MallocSize"><code>RedisModule_MallocSize</code></a>, except it works on <code>RedisModuleString</code> pointers.</p>
<p><span id="RedisModule_MallocSizeDict"></span></p>
<h3 id="redismodule_mallocsizedict"><code>RedisModule_MallocSizeDict</code><a class="headerlink" href="#redismodule_mallocsizedict" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>size_t RedisModule_MallocSizeDict(RedisModuleDict* dict);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Same as <a href="#RedisModule_MallocSize"><code>RedisModule_MallocSize</code></a>, except it works on <code>RedisModuleDict</code> pointers.
Note that the returned value is only the overhead of the underlying structures,
it does not include the allocation size of the keys and values.</p>
<p><span id="RedisModule_GetUsedMemoryRatio"></span></p>
<h3 id="redismodule_getusedmemoryratio"><code>RedisModule_GetUsedMemoryRatio</code><a class="headerlink" href="#redismodule_getusedmemoryratio" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>float RedisModule_GetUsedMemoryRatio(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Return the a number between 0 to 1 indicating the amount of memory
currently used, relative to the Redis "maxmemory" configuration.</p>
<ul>
<li>0 - No memory limit configured.</li>
<li>Between 0 and 1 - The percentage of the memory used normalized in 0-1 range.</li>
<li>Exactly 1 - Memory limit reached.</li>
<li>Greater 1 - More memory used than the configured limit.</li>
</ul>
<p><span id="section-scanning-keyspace-and-hashes"></span></p>
<h2 id="scanning-keyspace-and-hashes">Scanning keyspace and hashes<a class="headerlink" href="#scanning-keyspace-and-hashes" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_ScanCursorCreate"></span></p>
<h3 id="redismodule_scancursorcreate"><code>RedisModule_ScanCursorCreate</code><a class="headerlink" href="#redismodule_scancursorcreate" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleScanCursor *RedisModule_ScanCursorCreate(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Create a new cursor to be used with <a href="#RedisModule_Scan"><code>RedisModule_Scan</code></a></p>
<p><span id="RedisModule_ScanCursorRestart"></span></p>
<h3 id="redismodule_scancursorrestart"><code>RedisModule_ScanCursorRestart</code><a class="headerlink" href="#redismodule_scancursorrestart" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ScanCursorRestart(RedisModuleScanCursor *cursor);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Restart an existing cursor. The keys will be rescanned.</p>
<p><span id="RedisModule_ScanCursorDestroy"></span></p>
<h3 id="redismodule_scancursordestroy"><code>RedisModule_ScanCursorDestroy</code><a class="headerlink" href="#redismodule_scancursordestroy" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_ScanCursorDestroy(RedisModuleScanCursor *cursor);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Destroy the cursor struct.</p>
<p><span id="RedisModule_Scan"></span></p>
<h3 id="redismodule_scan"><code>RedisModule_Scan</code><a class="headerlink" href="#redismodule_scan" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_Scan(RedisModuleCtx *ctx,
                     RedisModuleScanCursor *cursor,
                     RedisModuleScanCB fn,
                     void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Scan API that allows a module to scan all the keys and value in
the selected db.</p>
<p>Callback for scan implementation.</p>
<div class="highlight"><pre><span></span><code>void scan_callback(RedisModuleCtx *ctx, RedisModuleString *keyname,
                   RedisModuleKey *key, void *privdata);
</code></pre></div>
<ul>
<li><code>ctx</code>: the redis module context provided to for the scan.</li>
<li><code>keyname</code>: owned by the caller and need to be retained if used after this
  function.</li>
<li><code>key</code>: holds info on the key and value, it is provided as best effort, in
  some cases it might be NULL, in which case the user should (can) use
  <a href="#RedisModule_OpenKey"><code>RedisModule_OpenKey()</code></a> (and CloseKey too).
  when it is provided, it is owned by the caller and will be free when the
  callback returns.</li>
<li><code>privdata</code>: the user data provided to <a href="#RedisModule_Scan"><code>RedisModule_Scan()</code></a>.</li>
</ul>
<p>The way it should be used:</p>
<div class="highlight"><pre><span></span><code> RedisModuleScanCursor *c = RedisModule_ScanCursorCreate();
 while(RedisModule_Scan(ctx, c, callback, privateData));
 RedisModule_ScanCursorDestroy(c);
</code></pre></div>
<p>It is also possible to use this API from another thread while the lock
is acquired during the actual call to <a href="#RedisModule_Scan"><code>RedisModule_Scan</code></a>:</p>
<div class="highlight"><pre><span></span><code> RedisModuleScanCursor *c = RedisModule_ScanCursorCreate();
 RedisModule_ThreadSafeContextLock(ctx);
 while(RedisModule_Scan(ctx, c, callback, privateData)){
     RedisModule_ThreadSafeContextUnlock(ctx);
     // do some background job
     RedisModule_ThreadSafeContextLock(ctx);
 }
 RedisModule_ScanCursorDestroy(c);
</code></pre></div>
<p>The function will return 1 if there are more elements to scan and
0 otherwise, possibly setting errno if the call failed.</p>
<p>It is also possible to restart an existing cursor using <a href="#RedisModule_ScanCursorRestart"><code>RedisModule_ScanCursorRestart</code></a>.</p>
<p>IMPORTANT: This API is very similar to the Redis SCAN command from the
point of view of the guarantees it provides. This means that the API
may report duplicated keys, but guarantees to report at least one time
every key that was there from the start to the end of the scanning process.</p>
<p>NOTE: If you do database changes within the callback, you should be aware
that the internal state of the database may change. For instance it is safe
to delete or modify the current key, but may not be safe to delete any
other key.
Moreover playing with the Redis keyspace while iterating may have the
effect of returning more duplicates. A safe pattern is to store the keys
names you want to modify elsewhere, and perform the actions on the keys
later when the iteration is complete. However this can cost a lot of
memory, so it may make sense to just operate on the current key when
possible during the iteration, given that this is safe.</p>
<p><span id="RedisModule_ScanKey"></span></p>
<h3 id="redismodule_scankey"><code>RedisModule_ScanKey</code><a class="headerlink" href="#redismodule_scankey" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ScanKey(RedisModuleKey *key,
                        RedisModuleScanCursor *cursor,
                        RedisModuleScanKeyCB fn,
                        void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Scan api that allows a module to scan the elements in a hash, set or sorted set key</p>
<p>Callback for scan implementation.</p>
<div class="highlight"><pre><span></span><code>void scan_callback(RedisModuleKey *key, RedisModuleString* field, RedisModuleString* value, void *privdata);
</code></pre></div>
<ul>
<li>key - the redis key context provided to for the scan.</li>
<li>field - field name, owned by the caller and need to be retained if used
  after this function.</li>
<li>value - value string or NULL for set type, owned by the caller and need to
  be retained if used after this function.</li>
<li>privdata - the user data provided to <a href="#RedisModule_ScanKey"><code>RedisModule_ScanKey</code></a>.</li>
</ul>
<p>The way it should be used:</p>
<div class="highlight"><pre><span></span><code> RedisModuleScanCursor *c = RedisModule_ScanCursorCreate();
 RedisModuleKey *key = RedisModule_OpenKey(...)
 while(RedisModule_ScanKey(key, c, callback, privateData));
 RedisModule_CloseKey(key);
 RedisModule_ScanCursorDestroy(c);
</code></pre></div>
<p>It is also possible to use this API from another thread while the lock is acquired during
the actual call to <a href="#RedisModule_ScanKey"><code>RedisModule_ScanKey</code></a>, and re-opening the key each time:</p>
<div class="highlight"><pre><span></span><code> RedisModuleScanCursor *c = RedisModule_ScanCursorCreate();
 RedisModule_ThreadSafeContextLock(ctx);
 RedisModuleKey *key = RedisModule_OpenKey(...)
 while(RedisModule_ScanKey(ctx, c, callback, privateData)){
     RedisModule_CloseKey(key);
     RedisModule_ThreadSafeContextUnlock(ctx);
     // do some background job
     RedisModule_ThreadSafeContextLock(ctx);
     RedisModuleKey *key = RedisModule_OpenKey(...)
 }
 RedisModule_CloseKey(key);
 RedisModule_ScanCursorDestroy(c);
</code></pre></div>
<p>The function will return 1 if there are more elements to scan and 0 otherwise,
possibly setting errno if the call failed.
It is also possible to restart an existing cursor using <a href="#RedisModule_ScanCursorRestart"><code>RedisModule_ScanCursorRestart</code></a>.</p>
<p>NOTE: Certain operations are unsafe while iterating the object. For instance
while the API guarantees to return at least one time all the elements that
are present in the data structure consistently from the start to the end
of the iteration (see HSCAN and similar commands documentation), the more
you play with the elements, the more duplicates you may get. In general
deleting the current element of the data structure is safe, while removing
the key you are iterating is not safe.</p>
<p><span id="section-module-fork-api"></span></p>
<h2 id="module-fork-api">Module fork API<a class="headerlink" href="#module-fork-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_Fork"></span></p>
<h3 id="redismodule_fork"><code>RedisModule_Fork</code><a class="headerlink" href="#redismodule_fork" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_Fork(RedisModuleForkDoneHandler cb, void *user_data);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Create a background child process with the current frozen snapshot of the
main process where you can do some processing in the background without
affecting / freezing the traffic and no need for threads and GIL locking.
Note that Redis allows for only one concurrent fork.
When the child wants to exit, it should call <a href="#RedisModule_ExitFromChild"><code>RedisModule_ExitFromChild</code></a>.
If the parent wants to kill the child it should call <a href="#RedisModule_KillForkChild"><code>RedisModule_KillForkChild</code></a>
The done handler callback will be executed on the parent process when the
child existed (but not when killed)
Return: -1 on failure, on success the parent process will get a positive PID
of the child, and the child process will get 0.</p>
<p><span id="RedisModule_SendChildHeartbeat"></span></p>
<h3 id="redismodule_sendchildheartbeat"><code>RedisModule_SendChildHeartbeat</code><a class="headerlink" href="#redismodule_sendchildheartbeat" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_SendChildHeartbeat(double progress);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>The module is advised to call this function from the fork child once in a while,
so that it can report progress and COW memory to the parent which will be
reported in INFO.
The <code>progress</code> argument should between 0 and 1, or -1 when not available.</p>
<p><span id="RedisModule_ExitFromChild"></span></p>
<h3 id="redismodule_exitfromchild"><code>RedisModule_ExitFromChild</code><a class="headerlink" href="#redismodule_exitfromchild" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ExitFromChild(int retcode);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Call from the child process when you want to terminate it.
retcode will be provided to the done handler executed on the parent process.</p>
<p><span id="RedisModule_KillForkChild"></span></p>
<h3 id="redismodule_killforkchild"><code>RedisModule_KillForkChild</code><a class="headerlink" href="#redismodule_killforkchild" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_KillForkChild(int child_pid);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Can be used to kill the forked child process from the parent process.
<code>child_pid</code> would be the return value of <a href="#RedisModule_Fork"><code>RedisModule_Fork</code></a>.</p>
<p><span id="section-server-hooks-implementation"></span></p>
<h2 id="server-hooks-implementation">Server hooks implementation<a class="headerlink" href="#server-hooks-implementation" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_SubscribeToServerEvent"></span></p>
<h3 id="redismodule_subscribetoserverevent"><code>RedisModule_SubscribeToServerEvent</code><a class="headerlink" href="#redismodule_subscribetoserverevent" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SubscribeToServerEvent(RedisModuleCtx *ctx,
                                       RedisModuleEvent event,
                                       RedisModuleEventCallback callback);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Register to be notified, via a callback, when the specified server event
happens. The callback is called with the event as argument, and an additional
argument which is a void pointer and should be cased to a specific type
that is event-specific (but many events will just use NULL since they do not
have additional information to pass to the callback).</p>
<p>If the callback is NULL and there was a previous subscription, the module
will be unsubscribed. If there was a previous subscription and the callback
is not null, the old callback will be replaced with the new one.</p>
<p>The callback must be of this type:</p>
<div class="highlight"><pre><span></span><code>int (*RedisModuleEventCallback)(RedisModuleCtx *ctx,
                                RedisModuleEvent eid,
                                uint64_t subevent,
                                void *data);
</code></pre></div>
<p>The 'ctx' is a normal Redis module context that the callback can use in
order to call other modules APIs. The 'eid' is the event itself, this
is only useful in the case the module subscribed to multiple events: using
the 'id' field of this structure it is possible to check if the event
is one of the events we registered with this callback. The 'subevent' field
depends on the event that fired.</p>
<p>Finally the 'data' pointer may be populated, only for certain events, with
more relevant data.</p>
<p>Here is a list of events you can use as 'eid' and related sub events:</p>
<ul>
<li>
<p><code>RedisModuleEvent_ReplicationRoleChanged</code>:</p>
<p>This event is called when the instance switches from master
to replica or the other way around, however the event is
also called when the replica remains a replica but starts to
replicate with a different master.</p>
<p>The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPLROLECHANGED_NOW_MASTER</code></li>
<li><code>REDISMODULE_SUBEVENT_REPLROLECHANGED_NOW_REPLICA</code></li>
</ul>
<p>The 'data' field can be casted by the callback to a
<code>RedisModuleReplicationInfo</code> structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>int master; // true if master, false if replica
char *masterhost; // master instance hostname for NOW_REPLICA
int masterport; // master instance port for NOW_REPLICA
char *replid1; // Main replication ID
char *replid2; // Secondary replication ID
uint64_t repl1_offset; // Main replication offset
uint64_t repl2_offset; // Offset of replid2 validity
</code></pre></div>
</li>
<li>
<p><code>RedisModuleEvent_Persistence</code></p>
<p>This event is called when RDB saving or AOF rewriting starts
and ends. The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_AOF_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_SYNC_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_SYNC_AOF_START</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_ENDED</code></li>
<li><code>REDISMODULE_SUBEVENT_PERSISTENCE_FAILED</code></li>
</ul>
<p>The above events are triggered not just when the user calls the
relevant commands like BGSAVE, but also when a saving operation
or AOF rewriting occurs because of internal server triggers.
The SYNC_RDB_START sub events are happening in the foreground due to
SAVE command, FLUSHALL, or server shutdown, and the other RDB and
AOF sub events are executed in a background fork child, so any
action the module takes can only affect the generated AOF or RDB,
but will not be reflected in the parent process and affect connected
clients and commands. Also note that the AOF_START sub event may end
up saving RDB content in case of an AOF with rdb-preamble.</p>
</li>
<li>
<p><code>RedisModuleEvent_FlushDB</code></p>
<p>The FLUSHALL, FLUSHDB or an internal flush (for instance
because of replication, after the replica synchronization)
happened. The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_FLUSHDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_FLUSHDB_END</code></li>
</ul>
<p>The data pointer can be casted to a RedisModuleFlushInfo
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>int32_t async;  // True if the flush is done in a thread.
                // See for instance FLUSHALL ASYNC.
                // In this case the END callback is invoked
                // immediately after the database is put
                // in the free list of the thread.
int32_t dbnum;  // Flushed database number, -1 for all the DBs
                // in the case of the FLUSHALL operation.
</code></pre></div>
<p>The start event is called <em>before</em> the operation is initiated, thus
allowing the callback to call DBSIZE or other operation on the
yet-to-free keyspace.</p>
</li>
<li>
<p><code>RedisModuleEvent_Loading</code></p>
<p>Called on loading operations: at startup when the server is
started, but also after a first synchronization when the
replica is loading the RDB file from the master.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_LOADING_RDB_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_AOF_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_REPL_START</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_ENDED</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_FAILED</code></li>
</ul>
<p>Note that AOF loading may start with an RDB data in case of
rdb-preamble, in which case you'll only receive an AOF_START event.</p>
</li>
<li>
<p><code>RedisModuleEvent_ClientChange</code></p>
<p>Called when a client connects or disconnects.
The data pointer can be casted to a RedisModuleClientInfo
structure, documented in RedisModule_GetClientInfoById().
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_CLIENT_CHANGE_CONNECTED</code></li>
<li><code>REDISMODULE_SUBEVENT_CLIENT_CHANGE_DISCONNECTED</code></li>
</ul>
</li>
<li>
<p><code>RedisModuleEvent_Shutdown</code></p>
<p>The server is shutting down. No subevents are available.</p>
</li>
<li>
<p><code>RedisModuleEvent_ReplicaChange</code></p>
<p>This event is called when the instance (that can be both a
master or a replica) get a new online replica, or lose a
replica since it gets disconnected.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPLICA_CHANGE_ONLINE</code></li>
<li><code>REDISMODULE_SUBEVENT_REPLICA_CHANGE_OFFLINE</code></li>
</ul>
<p>No additional information is available so far: future versions
of Redis will have an API in order to enumerate the replicas
connected and their state.</p>
</li>
<li>
<p><code>RedisModuleEvent_CronLoop</code></p>
<p>This event is called every time Redis calls the serverCron()
function in order to do certain bookkeeping. Modules that are
required to do operations from time to time may use this callback.
Normally Redis calls this function 10 times per second, but
this changes depending on the "hz" configuration.
No sub events are available.</p>
<p>The data pointer can be casted to a RedisModuleCronLoop
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>int32_t hz;  // Approximate number of events per second.
</code></pre></div>
</li>
<li>
<p><code>RedisModuleEvent_MasterLinkChange</code></p>
<p>This is called for replicas in order to notify when the
replication link becomes functional (up) with our master,
or when it goes down. Note that the link is not considered
up when we just connected to the master, but only if the
replication is happening correctly.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_MASTER_LINK_UP</code></li>
<li><code>REDISMODULE_SUBEVENT_MASTER_LINK_DOWN</code></li>
</ul>
</li>
<li>
<p><code>RedisModuleEvent_ModuleChange</code></p>
<p>This event is called when a new module is loaded or one is unloaded.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_MODULE_LOADED</code></li>
<li><code>REDISMODULE_SUBEVENT_MODULE_UNLOADED</code></li>
</ul>
<p>The data pointer can be casted to a RedisModuleModuleChange
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>const char* module_name;  // Name of module loaded or unloaded.
int32_t module_version;  // Module version.
</code></pre></div>
</li>
<li>
<p><code>RedisModuleEvent_LoadingProgress</code></p>
<p>This event is called repeatedly called while an RDB or AOF file
is being loaded.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_LOADING_PROGRESS_RDB</code></li>
<li><code>REDISMODULE_SUBEVENT_LOADING_PROGRESS_AOF</code></li>
</ul>
<p>The data pointer can be casted to a RedisModuleLoadingProgress
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>int32_t hz;  // Approximate number of events per second.
int32_t progress;  // Approximate progress between 0 and 1024,
                   // or -1 if unknown.
</code></pre></div>
</li>
<li>
<p><code>RedisModuleEvent_SwapDB</code></p>
<p>This event is called when a SWAPDB command has been successfully
Executed.
For this event call currently there is no subevents available.</p>
<p>The data pointer can be casted to a RedisModuleSwapDbInfo
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>int32_t dbnum_first;    // Swap Db first dbnum
int32_t dbnum_second;   // Swap Db second dbnum
</code></pre></div>
</li>
<li>
<p><code>RedisModuleEvent_ReplBackup</code></p>
<p>WARNING: Replication Backup events are deprecated since Redis 7.0 and are never fired.
See RedisModuleEvent_ReplAsyncLoad for understanding how Async Replication Loading events
are now triggered when repl-diskless-load is set to swapdb.</p>
<p>Called when repl-diskless-load config is set to swapdb,
And redis needs to backup the current database for the
possibility to be restored later. A module with global data and
maybe with aux_load and aux_save callbacks may need to use this
notification to backup / restore / discard its globals.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_CREATE</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_RESTORE</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_BACKUP_DISCARD</code></li>
</ul>
</li>
<li>
<p><code>RedisModuleEvent_ReplAsyncLoad</code></p>
<p>Called when repl-diskless-load config is set to swapdb and a replication with a master of same
data set history (matching replication ID) occurs.
In which case redis serves current data set while loading new database in memory from socket.
Modules must have declared they support this mechanism in order to activate it, through
REDISMODULE_OPTIONS_HANDLE_REPL_ASYNC_LOAD flag.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_REPL_ASYNC_LOAD_STARTED</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_ASYNC_LOAD_ABORTED</code></li>
<li><code>REDISMODULE_SUBEVENT_REPL_ASYNC_LOAD_COMPLETED</code></li>
</ul>
</li>
<li>
<p><code>RedisModuleEvent_ForkChild</code></p>
<p>Called when a fork child (AOFRW, RDBSAVE, module fork...) is born/dies
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_FORK_CHILD_BORN</code></li>
<li><code>REDISMODULE_SUBEVENT_FORK_CHILD_DIED</code></li>
</ul>
</li>
<li>
<p><code>RedisModuleEvent_EventLoop</code></p>
<p>Called on each event loop iteration, once just before the event loop goes
to sleep or just after it wakes up.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_EVENTLOOP_BEFORE_SLEEP</code></li>
<li><code>REDISMODULE_SUBEVENT_EVENTLOOP_AFTER_SLEEP</code></li>
</ul>
</li>
<li>
<p><code>RedisModule_Event_Config</code></p>
<p>Called when a configuration event happens
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_CONFIG_CHANGE</code></li>
</ul>
<p>The data pointer can be casted to a RedisModuleConfigChange
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>const char **config_names; // An array of C string pointers containing the
                           // name of each modified configuration item 
uint32_t num_changes;      // The number of elements in the config_names array
</code></pre></div>
</li>
<li>
<p><code>RedisModule_Event_Key</code></p>
<p>Called when a key is removed from the keyspace. We can't modify any key in
the event.
The following sub events are available:</p>
<ul>
<li><code>REDISMODULE_SUBEVENT_KEY_DELETED</code></li>
<li><code>REDISMODULE_SUBEVENT_KEY_EXPIRED</code></li>
<li><code>REDISMODULE_SUBEVENT_KEY_EVICTED</code></li>
<li><code>REDISMODULE_SUBEVENT_KEY_OVERWRITTEN</code></li>
</ul>
<p>The data pointer can be casted to a RedisModuleKeyInfo
structure with the following fields:</p>
<div class="highlight"><pre><span></span><code>RedisModuleKey *key;    // Key name
</code></pre></div>
</li>
</ul>
<p>The function returns <code>REDISMODULE_OK</code> if the module was successfully subscribed
for the specified event. If the API is called from a wrong context or unsupported event
is given then <code>REDISMODULE_ERR</code> is returned.</p>
<p><span id="RedisModule_IsSubEventSupported"></span></p>
<h3 id="redismodule_issubeventsupported"><code>RedisModule_IsSubEventSupported</code><a class="headerlink" href="#redismodule_issubeventsupported" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_IsSubEventSupported(RedisModuleEvent event, int64_t subevent);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>For a given server event and subevent, return zero if the
subevent is not supported and non-zero otherwise.</p>
<p><span id="section-module-configurations-api"></span></p>
<h2 id="module-configurations-api">Module Configurations API<a class="headerlink" href="#module-configurations-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_RegisterStringConfig"></span></p>
<h3 id="redismodule_registerstringconfig"><code>RedisModule_RegisterStringConfig</code><a class="headerlink" href="#redismodule_registerstringconfig" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterStringConfig(RedisModuleCtx *ctx,
                                     const char *name,
                                     const char *default_val,
                                     unsigned int flags,
                                     RedisModuleConfigGetStringFunc getfn,
                                     RedisModuleConfigSetStringFunc setfn,
                                     RedisModuleConfigApplyFunc applyfn,
                                     void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Create a string config that Redis users can interact with via the Redis config file,
<code>CONFIG SET</code>, <code>CONFIG GET</code>, and <code>CONFIG REWRITE</code> commands.</p>
<p>The actual config value is owned by the module, and the <code>getfn</code>, <code>setfn</code> and optional
<code>applyfn</code> callbacks that are provided to Redis in order to access or manipulate the
value. The <code>getfn</code> callback retrieves the value from the module, while the <code>setfn</code>
callback provides a value to be stored into the module config.
The optional <code>applyfn</code> callback is called after a <code>CONFIG SET</code> command modified one or
more configs using the <code>setfn</code> callback and can be used to atomically apply a config
after several configs were changed together.
If there are multiple configs with <code>applyfn</code> callbacks set by a single <code>CONFIG SET</code>
command, they will be deduplicated if their <code>applyfn</code> function and <code>privdata</code> pointers
are identical, and the callback will only be run once.
Both the <code>setfn</code> and <code>applyfn</code> can return an error if the provided value is invalid or
cannot be used.
The config also declares a type for the value that is validated by Redis and
provided to the module. The config system provides the following types:</p>
<ul>
<li>Redis String: Binary safe string data.</li>
<li>Enum: One of a finite number of string tokens, provided during registration.</li>
<li>Numeric: 64 bit signed integer, which also supports min and max values.</li>
<li>Bool: Yes or no value.</li>
</ul>
<p>The <code>setfn</code> callback is expected to return <code>REDISMODULE_OK</code> when the value is successfully
applied. It can also return <code>REDISMODULE_ERR</code> if the value can't be applied, and the
*err pointer can be set with a <code>RedisModuleString</code> error message to provide to the client.
This <code>RedisModuleString</code> will be freed by redis after returning from the set callback.</p>
<p>All configs are registered with a name, a type, a default value, private data that is made
available in the callbacks, as well as several flags that modify the behavior of the config.
The name must only contain alphanumeric characters or dashes. The supported flags are:</p>
<ul>
<li><code>REDISMODULE_CONFIG_DEFAULT</code>: The default flags for a config. This creates a config that can be modified after startup.</li>
<li><code>REDISMODULE_CONFIG_IMMUTABLE</code>: This config can only be provided loading time.</li>
<li><code>REDISMODULE_CONFIG_SENSITIVE</code>: The value stored in this config is redacted from all logging.</li>
<li><code>REDISMODULE_CONFIG_HIDDEN</code>: The name is hidden from <code>CONFIG GET</code> with pattern matching.</li>
<li><code>REDISMODULE_CONFIG_PROTECTED</code>: This config will be only be modifiable based off the value of enable-protected-configs.</li>
<li><code>REDISMODULE_CONFIG_DENY_LOADING</code>: This config is not modifiable while the server is loading data.</li>
<li><code>REDISMODULE_CONFIG_MEMORY</code>: For numeric configs, this config will convert data unit notations into their byte equivalent.</li>
<li><code>REDISMODULE_CONFIG_BITFLAGS</code>: For enum configs, this config will allow multiple entries to be combined as bit flags.</li>
</ul>
<p>Default values are used on startup to set the value if it is not provided via the config file
or command line. Default values are also used to compare to on a config rewrite.</p>
<p>Notes:</p>
<ol>
<li>On string config sets that the string passed to the set callback will be freed after execution and the module must retain it.</li>
<li>On string config gets the string will not be consumed and will be valid after execution.</li>
</ol>
<p>Example implementation:</p>
<div class="highlight"><pre><span></span><code>RedisModuleString *strval;
int adjustable = 1;
RedisModuleString *getStringConfigCommand(const char *name, void *privdata) {
    return strval;
}

int setStringConfigCommand(const char *name, RedisModuleString *new, void *privdata, RedisModuleString **err) {
   if (adjustable) {
       RedisModule_Free(strval);
       RedisModule_RetainString(NULL, new);
       strval = new;
       return REDISMODULE_OK;
   }
   *err = RedisModule_CreateString(NULL, &quot;Not adjustable.&quot;, 15);
   return REDISMODULE_ERR;
}
...
RedisModule_RegisterStringConfig(ctx, &quot;string&quot;, NULL, REDISMODULE_CONFIG_DEFAULT, getStringConfigCommand, setStringConfigCommand, NULL, NULL);
</code></pre></div>
<p>If the registration fails, <code>REDISMODULE_ERR</code> is returned and one of the following
errno is set:
* EBUSY: Registering the Config outside of <code>RedisModule_OnLoad</code>.
* EINVAL: The provided flags are invalid for the registration or the name of the config contains invalid characters.
* EALREADY: The provided configuration name is already used.</p>
<p><span id="RedisModule_RegisterBoolConfig"></span></p>
<h3 id="redismodule_registerboolconfig"><code>RedisModule_RegisterBoolConfig</code><a class="headerlink" href="#redismodule_registerboolconfig" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterBoolConfig(RedisModuleCtx *ctx,
                                   const char *name,
                                   int default_val,
                                   unsigned int flags,
                                   RedisModuleConfigGetBoolFunc getfn,
                                   RedisModuleConfigSetBoolFunc setfn,
                                   RedisModuleConfigApplyFunc applyfn,
                                   void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Create a bool config that server clients can interact with via the 
<code>CONFIG SET</code>, <code>CONFIG GET</code>, and <code>CONFIG REWRITE</code> commands. See 
<a href="#RedisModule_RegisterStringConfig"><code>RedisModule_RegisterStringConfig</code></a> for detailed information about configs.</p>
<p><span id="RedisModule_RegisterEnumConfig"></span></p>
<h3 id="redismodule_registerenumconfig"><code>RedisModule_RegisterEnumConfig</code><a class="headerlink" href="#redismodule_registerenumconfig" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterEnumConfig(RedisModuleCtx *ctx,
                                   const char *name,
                                   int default_val,
                                   unsigned int flags,
                                   const char **enum_values,
                                   const int *int_values,
                                   int num_enum_vals,
                                   RedisModuleConfigGetEnumFunc getfn,
                                   RedisModuleConfigSetEnumFunc setfn,
                                   RedisModuleConfigApplyFunc applyfn,
                                   void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Create an enum config that server clients can interact with via the 
<code>CONFIG SET</code>, <code>CONFIG GET</code>, and <code>CONFIG REWRITE</code> commands. 
Enum configs are a set of string tokens to corresponding integer values, where 
the string value is exposed to Redis clients but the value passed Redis and the
module is the integer value. These values are defined in <code>enum_values</code>, an array
of null-terminated c strings, and <code>int_vals</code>, an array of enum values who has an
index partner in <code>enum_values</code>.
Example Implementation:
     const char *enum_vals[3] = {"first", "second", "third"};
     const int int_vals[3] = {0, 2, 4};
     int enum_val = 0;</p>
<div class="highlight"><pre><span></span><code> int getEnumConfigCommand(const char *name, void *privdata) {
     return enum_val;
 }

 int setEnumConfigCommand(const char *name, int val, void *privdata, const char **err) {
     enum_val = val;
     return REDISMODULE_OK;
 }
 ...
 RedisModule_RegisterEnumConfig(ctx, &quot;enum&quot;, 0, REDISMODULE_CONFIG_DEFAULT, enum_vals, int_vals, 3, getEnumConfigCommand, setEnumConfigCommand, NULL, NULL);
</code></pre></div>
<p>Note that you can use <code>REDISMODULE_CONFIG_BITFLAGS</code> so that multiple enum string
can be combined into one integer as bit flags, in which case you may want to
sort your enums so that the preferred combinations are present first.</p>
<p>See <a href="#RedisModule_RegisterStringConfig"><code>RedisModule_RegisterStringConfig</code></a> for detailed general information about configs.</p>
<p><span id="RedisModule_RegisterNumericConfig"></span></p>
<h3 id="redismodule_registernumericconfig"><code>RedisModule_RegisterNumericConfig</code><a class="headerlink" href="#redismodule_registernumericconfig" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterNumericConfig(RedisModuleCtx *ctx,
                                      const char *name,
                                      long long default_val,
                                      unsigned int flags,
                                      long long min,
                                      long long max,
                                      RedisModuleConfigGetNumericFunc getfn,
                                      RedisModuleConfigSetNumericFunc setfn,
                                      RedisModuleConfigApplyFunc applyfn,
                                      void *privdata);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Create an integer config that server clients can interact with via the 
<code>CONFIG SET</code>, <code>CONFIG GET</code>, and <code>CONFIG REWRITE</code> commands. See 
<a href="#RedisModule_RegisterStringConfig"><code>RedisModule_RegisterStringConfig</code></a> for detailed information about configs.</p>
<p><span id="RedisModule_LoadConfigs"></span></p>
<h3 id="redismodule_loadconfigs"><code>RedisModule_LoadConfigs</code><a class="headerlink" href="#redismodule_loadconfigs" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_LoadConfigs(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Applies all pending configurations on the module load. This should be called
after all of the configurations have been registered for the module inside of <code>RedisModule_OnLoad</code>.
This will return <code>REDISMODULE_ERR</code> if it is called outside <code>RedisModule_OnLoad</code>.
This API needs to be called when configurations are provided in either <code>MODULE LOADEX</code>
or provided as startup arguments.</p>
<p><span id="section-rdb-load-save-api"></span></p>
<h2 id="rdb-loadsave-api">RDB load/save API<a class="headerlink" href="#rdb-loadsave-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_RdbStreamCreateFromFile"></span></p>
<h3 id="redismodule_rdbstreamcreatefromfile"><code>RedisModule_RdbStreamCreateFromFile</code><a class="headerlink" href="#redismodule_rdbstreamcreatefromfile" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleRdbStream *RedisModule_RdbStreamCreateFromFile(const char *filename);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Create a stream object to save/load RDB to/from a file.</p>
<p>This function returns a pointer to <code>RedisModuleRdbStream</code> which is owned
by the caller. It requires a call to <a href="#RedisModule_RdbStreamFree"><code>RedisModule_RdbStreamFree()</code></a> to free
the object.</p>
<p><span id="RedisModule_RdbStreamFree"></span></p>
<h3 id="redismodule_rdbstreamfree"><code>RedisModule_RdbStreamFree</code><a class="headerlink" href="#redismodule_rdbstreamfree" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void RedisModule_RdbStreamFree(RedisModuleRdbStream *stream);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Release an RDB stream object.</p>
<p><span id="RedisModule_RdbLoad"></span></p>
<h3 id="redismodule_rdbload"><code>RedisModule_RdbLoad</code><a class="headerlink" href="#redismodule_rdbload" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RdbLoad(RedisModuleCtx *ctx,
                        RedisModuleRdbStream *stream,
                        int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Load RDB file from the <code>stream</code>. Dataset will be cleared first and then RDB
file will be loaded.</p>
<p><code>flags</code> must be zero. This parameter is for future use.</p>
<p>On success <code>REDISMODULE_OK</code> is returned, otherwise <code>REDISMODULE_ERR</code> is returned
and errno is set accordingly.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>RedisModuleRdbStream *s = RedisModule_RdbStreamCreateFromFile(&quot;exp.rdb&quot;);
RedisModule_RdbLoad(ctx, s, 0);
RedisModule_RdbStreamFree(s);
</code></pre></div>
<p><span id="RedisModule_RdbSave"></span></p>
<h3 id="redismodule_rdbsave"><code>RedisModule_RdbSave</code><a class="headerlink" href="#redismodule_rdbsave" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RdbSave(RedisModuleCtx *ctx,
                        RedisModuleRdbStream *stream,
                        int flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Save dataset to the RDB stream.</p>
<p><code>flags</code> must be zero. This parameter is for future use.</p>
<p>On success <code>REDISMODULE_OK</code> is returned, otherwise <code>REDISMODULE_ERR</code> is returned
and errno is set accordingly.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>RedisModuleRdbStream *s = RedisModule_RdbStreamCreateFromFile(&quot;exp.rdb&quot;);
RedisModule_RdbSave(ctx, s, 0);
RedisModule_RdbStreamFree(s);
</code></pre></div>
<p><span id="section-key-eviction-api"></span></p>
<h2 id="key-eviction-api">Key eviction API<a class="headerlink" href="#key-eviction-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_SetLRU"></span></p>
<h3 id="redismodule_setlru"><code>RedisModule_SetLRU</code><a class="headerlink" href="#redismodule_setlru" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetLRU(RedisModuleKey *key, mstime_t lru_idle);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Set the key last access time for LRU based eviction. not relevant if the
servers's maxmemory policy is LFU based. Value is idle time in milliseconds.
returns <code>REDISMODULE_OK</code> if the LRU was updated, <code>REDISMODULE_ERR</code> otherwise.</p>
<p><span id="RedisModule_GetLRU"></span></p>
<h3 id="redismodule_getlru"><code>RedisModule_GetLRU</code><a class="headerlink" href="#redismodule_getlru" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetLRU(RedisModuleKey *key, mstime_t *lru_idle);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Gets the key last access time.
Value is idletime in milliseconds or -1 if the server's eviction policy is
LFU based.
returns <code>REDISMODULE_OK</code> if when key is valid.</p>
<p><span id="RedisModule_SetLFU"></span></p>
<h3 id="redismodule_setlfu"><code>RedisModule_SetLFU</code><a class="headerlink" href="#redismodule_setlfu" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_SetLFU(RedisModuleKey *key, long long lfu_freq);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Set the key access frequency. only relevant if the server's maxmemory policy
is LFU based.
The frequency is a logarithmic counter that provides an indication of
the access frequencyonly (must be &lt;= 255).
returns <code>REDISMODULE_OK</code> if the LFU was updated, <code>REDISMODULE_ERR</code> otherwise.</p>
<p><span id="RedisModule_GetLFU"></span></p>
<h3 id="redismodule_getlfu"><code>RedisModule_GetLFU</code><a class="headerlink" href="#redismodule_getlfu" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetLFU(RedisModuleKey *key, long long *lfu_freq);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Gets the key access frequency or -1 if the server's eviction policy is not
LFU based.
returns <code>REDISMODULE_OK</code> if when key is valid.</p>
<p><span id="section-miscellaneous-apis"></span></p>
<h2 id="miscellaneous-apis">Miscellaneous APIs<a class="headerlink" href="#miscellaneous-apis" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_GetModuleOptionsAll"></span></p>
<h3 id="redismodule_getmoduleoptionsall"><code>RedisModule_GetModuleOptionsAll</code><a class="headerlink" href="#redismodule_getmoduleoptionsall" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetModuleOptionsAll(void);
</code></pre></div>
<p><strong>Available since:</strong> 7.2.0</p>
<p>Returns the full module options flags mask, using the return value
the module can check if a certain set of module options are supported
by the redis server version in use.
Example:</p>
<div class="highlight"><pre><span></span><code>   int supportedFlags = RedisModule_GetModuleOptionsAll();
   if (supportedFlags &amp; REDISMODULE_OPTIONS_ALLOW_NESTED_KEYSPACE_NOTIFICATIONS) {
         // REDISMODULE_OPTIONS_ALLOW_NESTED_KEYSPACE_NOTIFICATIONS is supported
   } else{
         // REDISMODULE_OPTIONS_ALLOW_NESTED_KEYSPACE_NOTIFICATIONS is not supported
   }
</code></pre></div>
<p><span id="RedisModule_GetContextFlagsAll"></span></p>
<h3 id="redismodule_getcontextflagsall"><code>RedisModule_GetContextFlagsAll</code><a class="headerlink" href="#redismodule_getcontextflagsall" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetContextFlagsAll(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Returns the full ContextFlags mask, using the return value
the module can check if a certain set of flags are supported
by the redis server version in use.
Example:</p>
<div class="highlight"><pre><span></span><code>   int supportedFlags = RedisModule_GetContextFlagsAll();
   if (supportedFlags &amp; REDISMODULE_CTX_FLAGS_MULTI) {
         // REDISMODULE_CTX_FLAGS_MULTI is supported
   } else{
         // REDISMODULE_CTX_FLAGS_MULTI is not supported
   }
</code></pre></div>
<p><span id="RedisModule_GetKeyspaceNotificationFlagsAll"></span></p>
<h3 id="redismodule_getkeyspacenotificationflagsall"><code>RedisModule_GetKeyspaceNotificationFlagsAll</code><a class="headerlink" href="#redismodule_getkeyspacenotificationflagsall" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetKeyspaceNotificationFlagsAll(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Returns the full KeyspaceNotification mask, using the return value
the module can check if a certain set of flags are supported
by the redis server version in use.
Example:</p>
<div class="highlight"><pre><span></span><code>   int supportedFlags = RedisModule_GetKeyspaceNotificationFlagsAll();
   if (supportedFlags &amp; REDISMODULE_NOTIFY_LOADED) {
         // REDISMODULE_NOTIFY_LOADED is supported
   } else{
         // REDISMODULE_NOTIFY_LOADED is not supported
   }
</code></pre></div>
<p><span id="RedisModule_GetServerVersion"></span></p>
<h3 id="redismodule_getserverversion"><code>RedisModule_GetServerVersion</code><a class="headerlink" href="#redismodule_getserverversion" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetServerVersion(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Return the redis version in format of 0x00MMmmpp.
Example for 6.0.7 the return value will be 0x00060007.</p>
<p><span id="RedisModule_GetTypeMethodVersion"></span></p>
<h3 id="redismodule_gettypemethodversion"><code>RedisModule_GetTypeMethodVersion</code><a class="headerlink" href="#redismodule_gettypemethodversion" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetTypeMethodVersion(void);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Return the current redis-server runtime value of <code>REDISMODULE_TYPE_METHOD_VERSION</code>.
You can use that when calling <a href="#RedisModule_CreateDataType"><code>RedisModule_CreateDataType</code></a> to know which fields of
<code>RedisModuleTypeMethods</code> are gonna be supported and which will be ignored.</p>
<p><span id="RedisModule_ModuleTypeReplaceValue"></span></p>
<h3 id="redismodule_moduletypereplacevalue"><code>RedisModule_ModuleTypeReplaceValue</code><a class="headerlink" href="#redismodule_moduletypereplacevalue" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_ModuleTypeReplaceValue(RedisModuleKey *key,
                                       moduleType *mt,
                                       void *new_value,
                                       void **old_value);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.0</p>
<p>Replace the value assigned to a module type.</p>
<p>The key must be open for writing, have an existing value, and have a moduleType
that matches the one specified by the caller.</p>
<p>Unlike <a href="#RedisModule_ModuleTypeSetValue"><code>RedisModule_ModuleTypeSetValue()</code></a> which will free the old value, this function
simply swaps the old value with the new value.</p>
<p>The function returns <code>REDISMODULE_OK</code> on success, <code>REDISMODULE_ERR</code> on errors
such as:</p>
<ol>
<li>Key is not opened for writing.</li>
<li>Key is not a module data type key.</li>
<li>Key is a module datatype other than 'mt'.</li>
</ol>
<p>If <code>old_value</code> is non-NULL, the old value is returned by reference.</p>
<p><span id="RedisModule_GetCommandKeysWithFlags"></span></p>
<h3 id="redismodule_getcommandkeyswithflags"><code>RedisModule_GetCommandKeysWithFlags</code><a class="headerlink" href="#redismodule_getcommandkeyswithflags" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int *RedisModule_GetCommandKeysWithFlags(RedisModuleCtx *ctx,
                                         RedisModuleString **argv,
                                         int argc,
                                         int *num_keys,
                                         int **out_flags);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>For a specified command, parse its arguments and return an array that
contains the indexes of all key name arguments. This function is
essentially a more efficient way to do <code>COMMAND GETKEYS</code>.</p>
<p>The <code>out_flags</code> argument is optional, and can be set to NULL.
When provided it is filled with <code>REDISMODULE_CMD_KEY_</code> flags in matching
indexes with the key indexes of the returned array.</p>
<p>A NULL return value indicates the specified command has no keys, or
an error condition. Error conditions are indicated by setting errno
as follows:</p>
<ul>
<li>ENOENT: Specified command does not exist.</li>
<li>EINVAL: Invalid command arity specified.</li>
</ul>
<p>NOTE: The returned array is not a Redis Module object so it does not
get automatically freed even when auto-memory is used. The caller
must explicitly call <a href="#RedisModule_Free"><code>RedisModule_Free()</code></a> to free it, same as the <code>out_flags</code> pointer if
used.</p>
<p><span id="RedisModule_GetCommandKeys"></span></p>
<h3 id="redismodule_getcommandkeys"><code>RedisModule_GetCommandKeys</code><a class="headerlink" href="#redismodule_getcommandkeys" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int *RedisModule_GetCommandKeys(RedisModuleCtx *ctx,
                                RedisModuleString **argv,
                                int argc,
                                int *num_keys);
</code></pre></div>
<p><strong>Available since:</strong> 6.0.9</p>
<p>Identical to <a href="#RedisModule_GetCommandKeysWithFlags"><code>RedisModule_GetCommandKeysWithFlags</code></a> when flags are not needed.</p>
<p><span id="RedisModule_GetCurrentCommandName"></span></p>
<h3 id="redismodule_getcurrentcommandname"><code>RedisModule_GetCurrentCommandName</code><a class="headerlink" href="#redismodule_getcurrentcommandname" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const char *RedisModule_GetCurrentCommandName(RedisModuleCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.5</p>
<p>Return the name of the command currently running</p>
<p><span id="section-defrag-api"></span></p>
<h2 id="defrag-api">Defrag API<a class="headerlink" href="#defrag-api" title="Permanent link">⚓︎</a></h2>
<p><span id="RedisModule_RegisterDefragFunc"></span></p>
<h3 id="redismodule_registerdefragfunc"><code>RedisModule_RegisterDefragFunc</code><a class="headerlink" href="#redismodule_registerdefragfunc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_RegisterDefragFunc(RedisModuleCtx *ctx,
                                   RedisModuleDefragFunc cb);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Register a defrag callback for global data, i.e. anything that the module
may allocate that is not tied to a specific data type.</p>
<p><span id="RedisModule_DefragShouldStop"></span></p>
<h3 id="redismodule_defragshouldstop"><code>RedisModule_DefragShouldStop</code><a class="headerlink" href="#redismodule_defragshouldstop" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DefragShouldStop(RedisModuleDefragCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>When the data type defrag callback iterates complex structures, this
function should be called periodically. A zero (false) return
indicates the callback may continue its work. A non-zero value (true)
indicates it should stop.</p>
<p>When stopped, the callback may use <a href="#RedisModule_DefragCursorSet"><code>RedisModule_DefragCursorSet()</code></a> to store its
position so it can later use <a href="#RedisModule_DefragCursorGet"><code>RedisModule_DefragCursorGet()</code></a> to resume defragging.</p>
<p>When stopped and more work is left to be done, the callback should
return 1. Otherwise, it should return 0.</p>
<p>NOTE: Modules should consider the frequency in which this function is called,
so it generally makes sense to do small batches of work in between calls.</p>
<p><span id="RedisModule_DefragCursorSet"></span></p>
<h3 id="redismodule_defragcursorset"><code>RedisModule_DefragCursorSet</code><a class="headerlink" href="#redismodule_defragcursorset" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DefragCursorSet(RedisModuleDefragCtx *ctx,
                                unsigned long cursor);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Store an arbitrary cursor value for future re-use.</p>
<p>This should only be called if <a href="#RedisModule_DefragShouldStop"><code>RedisModule_DefragShouldStop()</code></a> has returned a non-zero
value and the defrag callback is about to exit without fully iterating its
data type.</p>
<p>This behavior is reserved to cases where late defrag is performed. Late
defrag is selected for keys that implement the <code>free_effort</code> callback and
return a <code>free_effort</code> value that is larger than the defrag
'active-defrag-max-scan-fields' configuration directive.</p>
<p>Smaller keys, keys that do not implement <code>free_effort</code> or the global
defrag callback are not called in late-defrag mode. In those cases, a
call to this function will return <code>REDISMODULE_ERR</code>.</p>
<p>The cursor may be used by the module to represent some progress into the
module's data type. Modules may also store additional cursor-related
information locally and use the cursor as a flag that indicates when
traversal of a new key begins. This is possible because the API makes
a guarantee that concurrent defragmentation of multiple keys will
not be performed.</p>
<p><span id="RedisModule_DefragCursorGet"></span></p>
<h3 id="redismodule_defragcursorget"><code>RedisModule_DefragCursorGet</code><a class="headerlink" href="#redismodule_defragcursorget" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_DefragCursorGet(RedisModuleDefragCtx *ctx,
                                unsigned long *cursor);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Fetch a cursor value that has been previously stored using <a href="#RedisModule_DefragCursorSet"><code>RedisModule_DefragCursorSet()</code></a>.</p>
<p>If not called for a late defrag operation, <code>REDISMODULE_ERR</code> will be returned and
the cursor should be ignored. See <a href="#RedisModule_DefragCursorSet"><code>RedisModule_DefragCursorSet()</code></a> for more details on
defrag cursors.</p>
<p><span id="RedisModule_DefragAlloc"></span></p>
<h3 id="redismodule_defragalloc"><code>RedisModule_DefragAlloc</code><a class="headerlink" href="#redismodule_defragalloc" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>void *RedisModule_DefragAlloc(RedisModuleDefragCtx *ctx, void *ptr);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Defrag a memory allocation previously allocated by <a href="#RedisModule_Alloc"><code>RedisModule_Alloc</code></a>, <a href="#RedisModule_Calloc"><code>RedisModule_Calloc</code></a>, etc.
The defragmentation process involves allocating a new memory block and copying
the contents to it, like <code>realloc()</code>.</p>
<p>If defragmentation was not necessary, NULL is returned and the operation has
no other effect.</p>
<p>If a non-NULL value is returned, the caller should use the new pointer instead
of the old one and update any reference to the old pointer, which must not
be used again.</p>
<p><span id="RedisModule_DefragRedisModuleString"></span></p>
<h3 id="redismodule_defragredismodulestring"><code>RedisModule_DefragRedisModuleString</code><a class="headerlink" href="#redismodule_defragredismodulestring" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>RedisModuleString *RedisModule_DefragRedisModuleString(RedisModuleDefragCtx *ctx,
                                                       RedisModuleString *str);
</code></pre></div>
<p><strong>Available since:</strong> 6.2.0</p>
<p>Defrag a <code>RedisModuleString</code> previously allocated by <a href="#RedisModule_Alloc"><code>RedisModule_Alloc</code></a>, <a href="#RedisModule_Calloc"><code>RedisModule_Calloc</code></a>, etc.
See <a href="#RedisModule_DefragAlloc"><code>RedisModule_DefragAlloc()</code></a> for more information on how the defragmentation process
works.</p>
<p>NOTE: It is only possible to defrag strings that have a single reference.
Typically this means strings retained with <a href="#RedisModule_RetainString"><code>RedisModule_RetainString</code></a> or <a href="#RedisModule_HoldString"><code>RedisModule_HoldString</code></a>
may not be defragmentable. One exception is command argvs which, if retained
by the module, will end up with a single reference (because the reference
on the Redis side is dropped as soon as the command callback returns).</p>
<p><span id="RedisModule_GetKeyNameFromDefragCtx"></span></p>
<h3 id="redismodule_getkeynamefromdefragctx"><code>RedisModule_GetKeyNameFromDefragCtx</code><a class="headerlink" href="#redismodule_getkeynamefromdefragctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>const RedisModuleString *RedisModule_GetKeyNameFromDefragCtx(RedisModuleDefragCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the name of the key currently being processed.
There is no guarantee that the key name is always available, so this may return NULL.</p>
<p><span id="RedisModule_GetDbIdFromDefragCtx"></span></p>
<h3 id="redismodule_getdbidfromdefragctx"><code>RedisModule_GetDbIdFromDefragCtx</code><a class="headerlink" href="#redismodule_getdbidfromdefragctx" title="Permanent link">⚓︎</a></h3>
<div class="highlight"><pre><span></span><code>int RedisModule_GetDbIdFromDefragCtx(RedisModuleDefragCtx *ctx);
</code></pre></div>
<p><strong>Available since:</strong> 7.0.0</p>
<p>Returns the database id of the key currently being processed.
There is no guarantee that this info is always available, so this may return -1.</p>
<p><span id="section-function-index"></span></p>
<h2 id="function-index">Function index<a class="headerlink" href="#function-index" title="Permanent link">⚓︎</a></h2>
<ul>
<li><a href="#RedisModule_ACLAddLogEntry"><code>RedisModule_ACLAddLogEntry</code></a></li>
<li><a href="#RedisModule_ACLAddLogEntryByUserName"><code>RedisModule_ACLAddLogEntryByUserName</code></a></li>
<li><a href="#RedisModule_ACLCheckChannelPermissions"><code>RedisModule_ACLCheckChannelPermissions</code></a></li>
<li><a href="#RedisModule_ACLCheckCommandPermissions"><code>RedisModule_ACLCheckCommandPermissions</code></a></li>
<li><a href="#RedisModule_ACLCheckKeyPermissions"><code>RedisModule_ACLCheckKeyPermissions</code></a></li>
<li><a href="#RedisModule_AbortBlock"><code>RedisModule_AbortBlock</code></a></li>
<li><a href="#RedisModule_AddPostNotificationJob"><code>RedisModule_AddPostNotificationJob</code></a></li>
<li><a href="#RedisModule_Alloc"><code>RedisModule_Alloc</code></a></li>
<li><a href="#RedisModule_AuthenticateClientWithACLUser"><code>RedisModule_AuthenticateClientWithACLUser</code></a></li>
<li><a href="#RedisModule_AuthenticateClientWithUser"><code>RedisModule_AuthenticateClientWithUser</code></a></li>
<li><a href="#RedisModule_AutoMemory"><code>RedisModule_AutoMemory</code></a></li>
<li><a href="#RedisModule_AvoidReplicaTraffic"><code>RedisModule_AvoidReplicaTraffic</code></a></li>
<li><a href="#RedisModule_BlockClient"><code>RedisModule_BlockClient</code></a></li>
<li><a href="#RedisModule_BlockClientGetPrivateData"><code>RedisModule_BlockClientGetPrivateData</code></a></li>
<li><a href="#RedisModule_BlockClientOnAuth"><code>RedisModule_BlockClientOnAuth</code></a></li>
<li><a href="#RedisModule_BlockClientOnKeys"><code>RedisModule_BlockClientOnKeys</code></a></li>
<li><a href="#RedisModule_BlockClientOnKeysWithFlags"><code>RedisModule_BlockClientOnKeysWithFlags</code></a></li>
<li><a href="#RedisModule_BlockClientSetPrivateData"><code>RedisModule_BlockClientSetPrivateData</code></a></li>
<li><a href="#RedisModule_BlockedClientDisconnected"><code>RedisModule_BlockedClientDisconnected</code></a></li>
<li><a href="#RedisModule_BlockedClientMeasureTimeEnd"><code>RedisModule_BlockedClientMeasureTimeEnd</code></a></li>
<li><a href="#RedisModule_BlockedClientMeasureTimeStart"><code>RedisModule_BlockedClientMeasureTimeStart</code></a></li>
<li><a href="#RedisModule_CachedMicroseconds"><code>RedisModule_CachedMicroseconds</code></a></li>
<li><a href="#RedisModule_Call"><code>RedisModule_Call</code></a></li>
<li><a href="#RedisModule_CallReplyArrayElement"><code>RedisModule_CallReplyArrayElement</code></a></li>
<li><a href="#RedisModule_CallReplyAttribute"><code>RedisModule_CallReplyAttribute</code></a></li>
<li><a href="#RedisModule_CallReplyAttributeElement"><code>RedisModule_CallReplyAttributeElement</code></a></li>
<li><a href="#RedisModule_CallReplyBigNumber"><code>RedisModule_CallReplyBigNumber</code></a></li>
<li><a href="#RedisModule_CallReplyBool"><code>RedisModule_CallReplyBool</code></a></li>
<li><a href="#RedisModule_CallReplyDouble"><code>RedisModule_CallReplyDouble</code></a></li>
<li><a href="#RedisModule_CallReplyInteger"><code>RedisModule_CallReplyInteger</code></a></li>
<li><a href="#RedisModule_CallReplyLength"><code>RedisModule_CallReplyLength</code></a></li>
<li><a href="#RedisModule_CallReplyMapElement"><code>RedisModule_CallReplyMapElement</code></a></li>
<li><a href="#RedisModule_CallReplyPromiseAbort"><code>RedisModule_CallReplyPromiseAbort</code></a></li>
<li><a href="#RedisModule_CallReplyPromiseSetUnblockHandler"><code>RedisModule_CallReplyPromiseSetUnblockHandler</code></a></li>
<li><a href="#RedisModule_CallReplyProto"><code>RedisModule_CallReplyProto</code></a></li>
<li><a href="#RedisModule_CallReplySetElement"><code>RedisModule_CallReplySetElement</code></a></li>
<li><a href="#RedisModule_CallReplyStringPtr"><code>RedisModule_CallReplyStringPtr</code></a></li>
<li><a href="#RedisModule_CallReplyType"><code>RedisModule_CallReplyType</code></a></li>
<li><a href="#RedisModule_CallReplyVerbatim"><code>RedisModule_CallReplyVerbatim</code></a></li>
<li><a href="#RedisModule_Calloc"><code>RedisModule_Calloc</code></a></li>
<li><a href="#RedisModule_ChannelAtPosWithFlags"><code>RedisModule_ChannelAtPosWithFlags</code></a></li>
<li><a href="#RedisModule_CloseKey"><code>RedisModule_CloseKey</code></a></li>
<li><a href="#RedisModule_CommandFilterArgDelete"><code>RedisModule_CommandFilterArgDelete</code></a></li>
<li><a href="#RedisModule_CommandFilterArgGet"><code>RedisModule_CommandFilterArgGet</code></a></li>
<li><a href="#RedisModule_CommandFilterArgInsert"><code>RedisModule_CommandFilterArgInsert</code></a></li>
<li><a href="#RedisModule_CommandFilterArgReplace"><code>RedisModule_CommandFilterArgReplace</code></a></li>
<li><a href="#RedisModule_CommandFilterArgsCount"><code>RedisModule_CommandFilterArgsCount</code></a></li>
<li><a href="#RedisModule_CommandFilterGetClientId"><code>RedisModule_CommandFilterGetClientId</code></a></li>
<li><a href="#RedisModule_CreateCommand"><code>RedisModule_CreateCommand</code></a></li>
<li><a href="#RedisModule_CreateDataType"><code>RedisModule_CreateDataType</code></a></li>
<li><a href="#RedisModule_CreateDict"><code>RedisModule_CreateDict</code></a></li>
<li><a href="#RedisModule_CreateModuleUser"><code>RedisModule_CreateModuleUser</code></a></li>
<li><a href="#RedisModule_CreateString"><code>RedisModule_CreateString</code></a></li>
<li><a href="#RedisModule_CreateStringFromCallReply"><code>RedisModule_CreateStringFromCallReply</code></a></li>
<li><a href="#RedisModule_CreateStringFromDouble"><code>RedisModule_CreateStringFromDouble</code></a></li>
<li><a href="#RedisModule_CreateStringFromLongDouble"><code>RedisModule_CreateStringFromLongDouble</code></a></li>
<li><a href="#RedisModule_CreateStringFromLongLong"><code>RedisModule_CreateStringFromLongLong</code></a></li>
<li><a href="#RedisModule_CreateStringFromStreamID"><code>RedisModule_CreateStringFromStreamID</code></a></li>
<li><a href="#RedisModule_CreateStringFromString"><code>RedisModule_CreateStringFromString</code></a></li>
<li><a href="#RedisModule_CreateStringFromULongLong"><code>RedisModule_CreateStringFromULongLong</code></a></li>
<li><a href="#RedisModule_CreateStringPrintf"><code>RedisModule_CreateStringPrintf</code></a></li>
<li><a href="#RedisModule_CreateSubcommand"><code>RedisModule_CreateSubcommand</code></a></li>
<li><a href="#RedisModule_CreateTimer"><code>RedisModule_CreateTimer</code></a></li>
<li><a href="#RedisModule_DbSize"><code>RedisModule_DbSize</code></a></li>
<li><a href="#RedisModule_DeauthenticateAndCloseClient"><code>RedisModule_DeauthenticateAndCloseClient</code></a></li>
<li><a href="#RedisModule_DefragAlloc"><code>RedisModule_DefragAlloc</code></a></li>
<li><a href="#RedisModule_DefragCursorGet"><code>RedisModule_DefragCursorGet</code></a></li>
<li><a href="#RedisModule_DefragCursorSet"><code>RedisModule_DefragCursorSet</code></a></li>
<li><a href="#RedisModule_DefragRedisModuleString"><code>RedisModule_DefragRedisModuleString</code></a></li>
<li><a href="#RedisModule_DefragShouldStop"><code>RedisModule_DefragShouldStop</code></a></li>
<li><a href="#RedisModule_DeleteKey"><code>RedisModule_DeleteKey</code></a></li>
<li><a href="#RedisModule_DictCompare"><code>RedisModule_DictCompare</code></a></li>
<li><a href="#RedisModule_DictCompareC"><code>RedisModule_DictCompareC</code></a></li>
<li><a href="#RedisModule_DictDel"><code>RedisModule_DictDel</code></a></li>
<li><a href="#RedisModule_DictDelC"><code>RedisModule_DictDelC</code></a></li>
<li><a href="#RedisModule_DictGet"><code>RedisModule_DictGet</code></a></li>
<li><a href="#RedisModule_DictGetC"><code>RedisModule_DictGetC</code></a></li>
<li><a href="#RedisModule_DictIteratorReseek"><code>RedisModule_DictIteratorReseek</code></a></li>
<li><a href="#RedisModule_DictIteratorReseekC"><code>RedisModule_DictIteratorReseekC</code></a></li>
<li><a href="#RedisModule_DictIteratorStart"><code>RedisModule_DictIteratorStart</code></a></li>
<li><a href="#RedisModule_DictIteratorStartC"><code>RedisModule_DictIteratorStartC</code></a></li>
<li><a href="#RedisModule_DictIteratorStop"><code>RedisModule_DictIteratorStop</code></a></li>
<li><a href="#RedisModule_DictNext"><code>RedisModule_DictNext</code></a></li>
<li><a href="#RedisModule_DictNextC"><code>RedisModule_DictNextC</code></a></li>
<li><a href="#RedisModule_DictPrev"><code>RedisModule_DictPrev</code></a></li>
<li><a href="#RedisModule_DictPrevC"><code>RedisModule_DictPrevC</code></a></li>
<li><a href="#RedisModule_DictReplace"><code>RedisModule_DictReplace</code></a></li>
<li><a href="#RedisModule_DictReplaceC"><code>RedisModule_DictReplaceC</code></a></li>
<li><a href="#RedisModule_DictSet"><code>RedisModule_DictSet</code></a></li>
<li><a href="#RedisModule_DictSetC"><code>RedisModule_DictSetC</code></a></li>
<li><a href="#RedisModule_DictSize"><code>RedisModule_DictSize</code></a></li>
<li><a href="#RedisModule_DigestAddLongLong"><code>RedisModule_DigestAddLongLong</code></a></li>
<li><a href="#RedisModule_DigestAddStringBuffer"><code>RedisModule_DigestAddStringBuffer</code></a></li>
<li><a href="#RedisModule_DigestEndSequence"><code>RedisModule_DigestEndSequence</code></a></li>
<li><a href="#RedisModule_EmitAOF"><code>RedisModule_EmitAOF</code></a></li>
<li><a href="#RedisModule_EventLoopAdd"><code>RedisModule_EventLoopAdd</code></a></li>
<li><a href="#RedisModule_EventLoopAddOneShot"><code>RedisModule_EventLoopAddOneShot</code></a></li>
<li><a href="#RedisModule_EventLoopDel"><code>RedisModule_EventLoopDel</code></a></li>
<li><a href="#RedisModule_ExitFromChild"><code>RedisModule_ExitFromChild</code></a></li>
<li><a href="#RedisModule_ExportSharedAPI"><code>RedisModule_ExportSharedAPI</code></a></li>
<li><a href="#RedisModule_Fork"><code>RedisModule_Fork</code></a></li>
<li><a href="#RedisModule_Free"><code>RedisModule_Free</code></a></li>
<li><a href="#RedisModule_FreeCallReply"><code>RedisModule_FreeCallReply</code></a></li>
<li><a href="#RedisModule_FreeClusterNodesList"><code>RedisModule_FreeClusterNodesList</code></a></li>
<li><a href="#RedisModule_FreeDict"><code>RedisModule_FreeDict</code></a></li>
<li><a href="#RedisModule_FreeModuleUser"><code>RedisModule_FreeModuleUser</code></a></li>
<li><a href="#RedisModule_FreeServerInfo"><code>RedisModule_FreeServerInfo</code></a></li>
<li><a href="#RedisModule_FreeString"><code>RedisModule_FreeString</code></a></li>
<li><a href="#RedisModule_FreeThreadSafeContext"><code>RedisModule_FreeThreadSafeContext</code></a></li>
<li><a href="#RedisModule_GetAbsExpire"><code>RedisModule_GetAbsExpire</code></a></li>
<li><a href="#RedisModule_GetBlockedClientHandle"><code>RedisModule_GetBlockedClientHandle</code></a></li>
<li><a href="#RedisModule_GetBlockedClientPrivateData"><code>RedisModule_GetBlockedClientPrivateData</code></a></li>
<li><a href="#RedisModule_GetBlockedClientReadyKey"><code>RedisModule_GetBlockedClientReadyKey</code></a></li>
<li><a href="#RedisModule_GetClientCertificate"><code>RedisModule_GetClientCertificate</code></a></li>
<li><a href="#RedisModule_GetClientId"><code>RedisModule_GetClientId</code></a></li>
<li><a href="#RedisModule_GetClientInfoById"><code>RedisModule_GetClientInfoById</code></a></li>
<li><a href="#RedisModule_GetClientNameById"><code>RedisModule_GetClientNameById</code></a></li>
<li><a href="#RedisModule_GetClientUserNameById"><code>RedisModule_GetClientUserNameById</code></a></li>
<li><a href="#RedisModule_GetClusterNodeInfo"><code>RedisModule_GetClusterNodeInfo</code></a></li>
<li><a href="#RedisModule_GetClusterNodesList"><code>RedisModule_GetClusterNodesList</code></a></li>
<li><a href="#RedisModule_GetClusterSize"><code>RedisModule_GetClusterSize</code></a></li>
<li><a href="#RedisModule_GetCommand"><code>RedisModule_GetCommand</code></a></li>
<li><a href="#RedisModule_GetCommandKeys"><code>RedisModule_GetCommandKeys</code></a></li>
<li><a href="#RedisModule_GetCommandKeysWithFlags"><code>RedisModule_GetCommandKeysWithFlags</code></a></li>
<li><a href="#RedisModule_GetContextFlags"><code>RedisModule_GetContextFlags</code></a></li>
<li><a href="#RedisModule_GetContextFlagsAll"><code>RedisModule_GetContextFlagsAll</code></a></li>
<li><a href="#RedisModule_GetCurrentCommandName"><code>RedisModule_GetCurrentCommandName</code></a></li>
<li><a href="#RedisModule_GetCurrentUserName"><code>RedisModule_GetCurrentUserName</code></a></li>
<li><a href="#RedisModule_GetDbIdFromDefragCtx"><code>RedisModule_GetDbIdFromDefragCtx</code></a></li>
<li><a href="#RedisModule_GetDbIdFromDigest"><code>RedisModule_GetDbIdFromDigest</code></a></li>
<li><a href="#RedisModule_GetDbIdFromIO"><code>RedisModule_GetDbIdFromIO</code></a></li>
<li><a href="#RedisModule_GetDbIdFromModuleKey"><code>RedisModule_GetDbIdFromModuleKey</code></a></li>
<li><a href="#RedisModule_GetDbIdFromOptCtx"><code>RedisModule_GetDbIdFromOptCtx</code></a></li>
<li><a href="#RedisModule_GetDetachedThreadSafeContext"><code>RedisModule_GetDetachedThreadSafeContext</code></a></li>
<li><a href="#RedisModule_GetExpire"><code>RedisModule_GetExpire</code></a></li>
<li><a href="#RedisModule_GetKeyNameFromDefragCtx"><code>RedisModule_GetKeyNameFromDefragCtx</code></a></li>
<li><a href="#RedisModule_GetKeyNameFromDigest"><code>RedisModule_GetKeyNameFromDigest</code></a></li>
<li><a href="#RedisModule_GetKeyNameFromIO"><code>RedisModule_GetKeyNameFromIO</code></a></li>
<li><a href="#RedisModule_GetKeyNameFromModuleKey"><code>RedisModule_GetKeyNameFromModuleKey</code></a></li>
<li><a href="#RedisModule_GetKeyNameFromOptCtx"><code>RedisModule_GetKeyNameFromOptCtx</code></a></li>
<li><a href="#RedisModule_GetKeyspaceNotificationFlagsAll"><code>RedisModule_GetKeyspaceNotificationFlagsAll</code></a></li>
<li><a href="#RedisModule_GetLFU"><code>RedisModule_GetLFU</code></a></li>
<li><a href="#RedisModule_GetLRU"><code>RedisModule_GetLRU</code></a></li>
<li><a href="#RedisModule_GetModuleOptionsAll"><code>RedisModule_GetModuleOptionsAll</code></a></li>
<li><a href="#RedisModule_GetModuleUserACLString"><code>RedisModule_GetModuleUserACLString</code></a></li>
<li><a href="#RedisModule_GetModuleUserFromUserName"><code>RedisModule_GetModuleUserFromUserName</code></a></li>
<li><a href="#RedisModule_GetMyClusterID"><code>RedisModule_GetMyClusterID</code></a></li>
<li><a href="#RedisModule_GetNotifyKeyspaceEvents"><code>RedisModule_GetNotifyKeyspaceEvents</code></a></li>
<li><a href="#RedisModule_GetOpenKeyModesAll"><code>RedisModule_GetOpenKeyModesAll</code></a></li>
<li><a href="#RedisModule_GetRandomBytes"><code>RedisModule_GetRandomBytes</code></a></li>
<li><a href="#RedisModule_GetRandomHexChars"><code>RedisModule_GetRandomHexChars</code></a></li>
<li><a href="#RedisModule_GetSelectedDb"><code>RedisModule_GetSelectedDb</code></a></li>
<li><a href="#RedisModule_GetServerInfo"><code>RedisModule_GetServerInfo</code></a></li>
<li><a href="#RedisModule_GetServerVersion"><code>RedisModule_GetServerVersion</code></a></li>
<li><a href="#RedisModule_GetSharedAPI"><code>RedisModule_GetSharedAPI</code></a></li>
<li><a href="#RedisModule_GetThreadSafeContext"><code>RedisModule_GetThreadSafeContext</code></a></li>
<li><a href="#RedisModule_GetTimerInfo"><code>RedisModule_GetTimerInfo</code></a></li>
<li><a href="#RedisModule_GetToDbIdFromOptCtx"><code>RedisModule_GetToDbIdFromOptCtx</code></a></li>
<li><a href="#RedisModule_GetToKeyNameFromOptCtx"><code>RedisModule_GetToKeyNameFromOptCtx</code></a></li>
<li><a href="#RedisModule_GetTypeMethodVersion"><code>RedisModule_GetTypeMethodVersion</code></a></li>
<li><a href="#RedisModule_GetUsedMemoryRatio"><code>RedisModule_GetUsedMemoryRatio</code></a></li>
<li><a href="#RedisModule_HashGet"><code>RedisModule_HashGet</code></a></li>
<li><a href="#RedisModule_HashSet"><code>RedisModule_HashSet</code></a></li>
<li><a href="#RedisModule_HoldString"><code>RedisModule_HoldString</code></a></li>
<li><a href="#RedisModule_InfoAddFieldCString"><code>RedisModule_InfoAddFieldCString</code></a></li>
<li><a href="#RedisModule_InfoAddFieldDouble"><code>RedisModule_InfoAddFieldDouble</code></a></li>
<li><a href="#RedisModule_InfoAddFieldLongLong"><code>RedisModule_InfoAddFieldLongLong</code></a></li>
<li><a href="#RedisModule_InfoAddFieldString"><code>RedisModule_InfoAddFieldString</code></a></li>
<li><a href="#RedisModule_InfoAddFieldULongLong"><code>RedisModule_InfoAddFieldULongLong</code></a></li>
<li><a href="#RedisModule_InfoAddSection"><code>RedisModule_InfoAddSection</code></a></li>
<li><a href="#RedisModule_InfoBeginDictField"><code>RedisModule_InfoBeginDictField</code></a></li>
<li><a href="#RedisModule_InfoEndDictField"><code>RedisModule_InfoEndDictField</code></a></li>
<li><a href="#RedisModule_IsBlockedReplyRequest"><code>RedisModule_IsBlockedReplyRequest</code></a></li>
<li><a href="#RedisModule_IsBlockedTimeoutRequest"><code>RedisModule_IsBlockedTimeoutRequest</code></a></li>
<li><a href="#RedisModule_IsChannelsPositionRequest"><code>RedisModule_IsChannelsPositionRequest</code></a></li>
<li><a href="#RedisModule_IsIOError"><code>RedisModule_IsIOError</code></a></li>
<li><a href="#RedisModule_IsKeysPositionRequest"><code>RedisModule_IsKeysPositionRequest</code></a></li>
<li><a href="#RedisModule_IsModuleNameBusy"><code>RedisModule_IsModuleNameBusy</code></a></li>
<li><a href="#RedisModule_IsSubEventSupported"><code>RedisModule_IsSubEventSupported</code></a></li>
<li><a href="#RedisModule_KeyAtPos"><code>RedisModule_KeyAtPos</code></a></li>
<li><a href="#RedisModule_KeyAtPosWithFlags"><code>RedisModule_KeyAtPosWithFlags</code></a></li>
<li><a href="#RedisModule_KeyExists"><code>RedisModule_KeyExists</code></a></li>
<li><a href="#RedisModule_KeyType"><code>RedisModule_KeyType</code></a></li>
<li><a href="#RedisModule_KillForkChild"><code>RedisModule_KillForkChild</code></a></li>
<li><a href="#RedisModule_LatencyAddSample"><code>RedisModule_LatencyAddSample</code></a></li>
<li><a href="#RedisModule_ListDelete"><code>RedisModule_ListDelete</code></a></li>
<li><a href="#RedisModule_ListGet"><code>RedisModule_ListGet</code></a></li>
<li><a href="#RedisModule_ListInsert"><code>RedisModule_ListInsert</code></a></li>
<li><a href="#RedisModule_ListPop"><code>RedisModule_ListPop</code></a></li>
<li><a href="#RedisModule_ListPush"><code>RedisModule_ListPush</code></a></li>
<li><a href="#RedisModule_ListSet"><code>RedisModule_ListSet</code></a></li>
<li><a href="#RedisModule_LoadConfigs"><code>RedisModule_LoadConfigs</code></a></li>
<li><a href="#RedisModule_LoadDataTypeFromString"><code>RedisModule_LoadDataTypeFromString</code></a></li>
<li><a href="#RedisModule_LoadDataTypeFromStringEncver"><code>RedisModule_LoadDataTypeFromStringEncver</code></a></li>
<li><a href="#RedisModule_LoadDouble"><code>RedisModule_LoadDouble</code></a></li>
<li><a href="#RedisModule_LoadFloat"><code>RedisModule_LoadFloat</code></a></li>
<li><a href="#RedisModule_LoadLongDouble"><code>RedisModule_LoadLongDouble</code></a></li>
<li><a href="#RedisModule_LoadSigned"><code>RedisModule_LoadSigned</code></a></li>
<li><a href="#RedisModule_LoadString"><code>RedisModule_LoadString</code></a></li>
<li><a href="#RedisModule_LoadStringBuffer"><code>RedisModule_LoadStringBuffer</code></a></li>
<li><a href="#RedisModule_LoadUnsigned"><code>RedisModule_LoadUnsigned</code></a></li>
<li><a href="#RedisModule_Log"><code>RedisModule_Log</code></a></li>
<li><a href="#RedisModule_LogIOError"><code>RedisModule_LogIOError</code></a></li>
<li><a href="#RedisModule_MallocSize"><code>RedisModule_MallocSize</code></a></li>
<li><a href="#RedisModule_MallocSizeDict"><code>RedisModule_MallocSizeDict</code></a></li>
<li><a href="#RedisModule_MallocSizeString"><code>RedisModule_MallocSizeString</code></a></li>
<li><a href="#RedisModule_MallocUsableSize"><code>RedisModule_MallocUsableSize</code></a></li>
<li><a href="#RedisModule_Microseconds"><code>RedisModule_Microseconds</code></a></li>
<li><a href="#RedisModule_Milliseconds"><code>RedisModule_Milliseconds</code></a></li>
<li><a href="#RedisModule_ModuleTypeGetType"><code>RedisModule_ModuleTypeGetType</code></a></li>
<li><a href="#RedisModule_ModuleTypeGetValue"><code>RedisModule_ModuleTypeGetValue</code></a></li>
<li><a href="#RedisModule_ModuleTypeReplaceValue"><code>RedisModule_ModuleTypeReplaceValue</code></a></li>
<li><a href="#RedisModule_ModuleTypeSetValue"><code>RedisModule_ModuleTypeSetValue</code></a></li>
<li><a href="#RedisModule_MonotonicMicroseconds"><code>RedisModule_MonotonicMicroseconds</code></a></li>
<li><a href="#RedisModule_NotifyKeyspaceEvent"><code>RedisModule_NotifyKeyspaceEvent</code></a></li>
<li><a href="#RedisModule_OpenKey"><code>RedisModule_OpenKey</code></a></li>
<li><a href="#RedisModule_PoolAlloc"><code>RedisModule_PoolAlloc</code></a></li>
<li><a href="#RedisModule_PublishMessage"><code>RedisModule_PublishMessage</code></a></li>
<li><a href="#RedisModule_PublishMessageShard"><code>RedisModule_PublishMessageShard</code></a></li>
<li><a href="#RedisModule_RandomKey"><code>RedisModule_RandomKey</code></a></li>
<li><a href="#RedisModule_RdbLoad"><code>RedisModule_RdbLoad</code></a></li>
<li><a href="#RedisModule_RdbSave"><code>RedisModule_RdbSave</code></a></li>
<li><a href="#RedisModule_RdbStreamCreateFromFile"><code>RedisModule_RdbStreamCreateFromFile</code></a></li>
<li><a href="#RedisModule_RdbStreamFree"><code>RedisModule_RdbStreamFree</code></a></li>
<li><a href="#RedisModule_Realloc"><code>RedisModule_Realloc</code></a></li>
<li><a href="#RedisModule_RedactClientCommandArgument"><code>RedisModule_RedactClientCommandArgument</code></a></li>
<li><a href="#RedisModule_RegisterAuthCallback"><code>RedisModule_RegisterAuthCallback</code></a></li>
<li><a href="#RedisModule_RegisterBoolConfig"><code>RedisModule_RegisterBoolConfig</code></a></li>
<li><a href="#RedisModule_RegisterClusterMessageReceiver"><code>RedisModule_RegisterClusterMessageReceiver</code></a></li>
<li><a href="#RedisModule_RegisterCommandFilter"><code>RedisModule_RegisterCommandFilter</code></a></li>
<li><a href="#RedisModule_RegisterDefragFunc"><code>RedisModule_RegisterDefragFunc</code></a></li>
<li><a href="#RedisModule_RegisterEnumConfig"><code>RedisModule_RegisterEnumConfig</code></a></li>
<li><a href="#RedisModule_RegisterInfoFunc"><code>RedisModule_RegisterInfoFunc</code></a></li>
<li><a href="#RedisModule_RegisterNumericConfig"><code>RedisModule_RegisterNumericConfig</code></a></li>
<li><a href="#RedisModule_RegisterStringConfig"><code>RedisModule_RegisterStringConfig</code></a></li>
<li><a href="#RedisModule_Replicate"><code>RedisModule_Replicate</code></a></li>
<li><a href="#RedisModule_ReplicateVerbatim"><code>RedisModule_ReplicateVerbatim</code></a></li>
<li><a href="#RedisModule_ReplySetArrayLength"><code>RedisModule_ReplySetArrayLength</code></a></li>
<li><a href="#RedisModule_ReplySetAttributeLength"><code>RedisModule_ReplySetAttributeLength</code></a></li>
<li><a href="#RedisModule_ReplySetMapLength"><code>RedisModule_ReplySetMapLength</code></a></li>
<li><a href="#RedisModule_ReplySetSetLength"><code>RedisModule_ReplySetSetLength</code></a></li>
<li><a href="#RedisModule_ReplyWithArray"><code>RedisModule_ReplyWithArray</code></a></li>
<li><a href="#RedisModule_ReplyWithAttribute"><code>RedisModule_ReplyWithAttribute</code></a></li>
<li><a href="#RedisModule_ReplyWithBigNumber"><code>RedisModule_ReplyWithBigNumber</code></a></li>
<li><a href="#RedisModule_ReplyWithBool"><code>RedisModule_ReplyWithBool</code></a></li>
<li><a href="#RedisModule_ReplyWithCString"><code>RedisModule_ReplyWithCString</code></a></li>
<li><a href="#RedisModule_ReplyWithCallReply"><code>RedisModule_ReplyWithCallReply</code></a></li>
<li><a href="#RedisModule_ReplyWithDouble"><code>RedisModule_ReplyWithDouble</code></a></li>
<li><a href="#RedisModule_ReplyWithEmptyArray"><code>RedisModule_ReplyWithEmptyArray</code></a></li>
<li><a href="#RedisModule_ReplyWithEmptyString"><code>RedisModule_ReplyWithEmptyString</code></a></li>
<li><a href="#RedisModule_ReplyWithError"><code>RedisModule_ReplyWithError</code></a></li>
<li><a href="#RedisModule_ReplyWithErrorFormat"><code>RedisModule_ReplyWithErrorFormat</code></a></li>
<li><a href="#RedisModule_ReplyWithLongDouble"><code>RedisModule_ReplyWithLongDouble</code></a></li>
<li><a href="#RedisModule_ReplyWithLongLong"><code>RedisModule_ReplyWithLongLong</code></a></li>
<li><a href="#RedisModule_ReplyWithMap"><code>RedisModule_ReplyWithMap</code></a></li>
<li><a href="#RedisModule_ReplyWithNull"><code>RedisModule_ReplyWithNull</code></a></li>
<li><a href="#RedisModule_ReplyWithNullArray"><code>RedisModule_ReplyWithNullArray</code></a></li>
<li><a href="#RedisModule_ReplyWithSet"><code>RedisModule_ReplyWithSet</code></a></li>
<li><a href="#RedisModule_ReplyWithSimpleString"><code>RedisModule_ReplyWithSimpleString</code></a></li>
<li><a href="#RedisModule_ReplyWithString"><code>RedisModule_ReplyWithString</code></a></li>
<li><a href="#RedisModule_ReplyWithStringBuffer"><code>RedisModule_ReplyWithStringBuffer</code></a></li>
<li><a href="#RedisModule_ReplyWithVerbatimString"><code>RedisModule_ReplyWithVerbatimString</code></a></li>
<li><a href="#RedisModule_ReplyWithVerbatimStringType"><code>RedisModule_ReplyWithVerbatimStringType</code></a></li>
<li><a href="#RedisModule_ResetDataset"><code>RedisModule_ResetDataset</code></a></li>
<li><a href="#RedisModule_RetainString"><code>RedisModule_RetainString</code></a></li>
<li><a href="#RedisModule_SaveDataTypeToString"><code>RedisModule_SaveDataTypeToString</code></a></li>
<li><a href="#RedisModule_SaveDouble"><code>RedisModule_SaveDouble</code></a></li>
<li><a href="#RedisModule_SaveFloat"><code>RedisModule_SaveFloat</code></a></li>
<li><a href="#RedisModule_SaveLongDouble"><code>RedisModule_SaveLongDouble</code></a></li>
<li><a href="#RedisModule_SaveSigned"><code>RedisModule_SaveSigned</code></a></li>
<li><a href="#RedisModule_SaveString"><code>RedisModule_SaveString</code></a></li>
<li><a href="#RedisModule_SaveStringBuffer"><code>RedisModule_SaveStringBuffer</code></a></li>
<li><a href="#RedisModule_SaveUnsigned"><code>RedisModule_SaveUnsigned</code></a></li>
<li><a href="#RedisModule_Scan"><code>RedisModule_Scan</code></a></li>
<li><a href="#RedisModule_ScanCursorCreate"><code>RedisModule_ScanCursorCreate</code></a></li>
<li><a href="#RedisModule_ScanCursorDestroy"><code>RedisModule_ScanCursorDestroy</code></a></li>
<li><a href="#RedisModule_ScanCursorRestart"><code>RedisModule_ScanCursorRestart</code></a></li>
<li><a href="#RedisModule_ScanKey"><code>RedisModule_ScanKey</code></a></li>
<li><a href="#RedisModule_SelectDb"><code>RedisModule_SelectDb</code></a></li>
<li><a href="#RedisModule_SendChildHeartbeat"><code>RedisModule_SendChildHeartbeat</code></a></li>
<li><a href="#RedisModule_SendClusterMessage"><code>RedisModule_SendClusterMessage</code></a></li>
<li><a href="#RedisModule_ServerInfoGetField"><code>RedisModule_ServerInfoGetField</code></a></li>
<li><a href="#RedisModule_ServerInfoGetFieldC"><code>RedisModule_ServerInfoGetFieldC</code></a></li>
<li><a href="#RedisModule_ServerInfoGetFieldDouble"><code>RedisModule_ServerInfoGetFieldDouble</code></a></li>
<li><a href="#RedisModule_ServerInfoGetFieldSigned"><code>RedisModule_ServerInfoGetFieldSigned</code></a></li>
<li><a href="#RedisModule_ServerInfoGetFieldUnsigned"><code>RedisModule_ServerInfoGetFieldUnsigned</code></a></li>
<li><a href="#RedisModule_SetAbsExpire"><code>RedisModule_SetAbsExpire</code></a></li>
<li><a href="#RedisModule_SetClientNameById"><code>RedisModule_SetClientNameById</code></a></li>
<li><a href="#RedisModule_SetClusterFlags"><code>RedisModule_SetClusterFlags</code></a></li>
<li><a href="#RedisModule_SetCommandACLCategories"><code>RedisModule_SetCommandACLCategories</code></a></li>
<li><a href="#RedisModule_SetCommandInfo"><code>RedisModule_SetCommandInfo</code></a></li>
<li><a href="#RedisModule_SetContextUser"><code>RedisModule_SetContextUser</code></a></li>
<li><a href="#RedisModule_SetDisconnectCallback"><code>RedisModule_SetDisconnectCallback</code></a></li>
<li><a href="#RedisModule_SetExpire"><code>RedisModule_SetExpire</code></a></li>
<li><a href="#RedisModule_SetLFU"><code>RedisModule_SetLFU</code></a></li>
<li><a href="#RedisModule_SetLRU"><code>RedisModule_SetLRU</code></a></li>
<li><a href="#RedisModule_SetModuleOptions"><code>RedisModule_SetModuleOptions</code></a></li>
<li><a href="#RedisModule_SetModuleUserACL"><code>RedisModule_SetModuleUserACL</code></a></li>
<li><a href="#RedisModule_SetModuleUserACLString"><code>RedisModule_SetModuleUserACLString</code></a></li>
<li><a href="#RedisModule_SignalKeyAsReady"><code>RedisModule_SignalKeyAsReady</code></a></li>
<li><a href="#RedisModule_SignalModifiedKey"><code>RedisModule_SignalModifiedKey</code></a></li>
<li><a href="#RedisModule_StopTimer"><code>RedisModule_StopTimer</code></a></li>
<li><a href="#RedisModule_Strdup"><code>RedisModule_Strdup</code></a></li>
<li><a href="#RedisModule_StreamAdd"><code>RedisModule_StreamAdd</code></a></li>
<li><a href="#RedisModule_StreamDelete"><code>RedisModule_StreamDelete</code></a></li>
<li><a href="#RedisModule_StreamIteratorDelete"><code>RedisModule_StreamIteratorDelete</code></a></li>
<li><a href="#RedisModule_StreamIteratorNextField"><code>RedisModule_StreamIteratorNextField</code></a></li>
<li><a href="#RedisModule_StreamIteratorNextID"><code>RedisModule_StreamIteratorNextID</code></a></li>
<li><a href="#RedisModule_StreamIteratorStart"><code>RedisModule_StreamIteratorStart</code></a></li>
<li><a href="#RedisModule_StreamIteratorStop"><code>RedisModule_StreamIteratorStop</code></a></li>
<li><a href="#RedisModule_StreamTrimByID"><code>RedisModule_StreamTrimByID</code></a></li>
<li><a href="#RedisModule_StreamTrimByLength"><code>RedisModule_StreamTrimByLength</code></a></li>
<li><a href="#RedisModule_StringAppendBuffer"><code>RedisModule_StringAppendBuffer</code></a></li>
<li><a href="#RedisModule_StringCompare"><code>RedisModule_StringCompare</code></a></li>
<li><a href="#RedisModule_StringDMA"><code>RedisModule_StringDMA</code></a></li>
<li><a href="#RedisModule_StringPtrLen"><code>RedisModule_StringPtrLen</code></a></li>
<li><a href="#RedisModule_StringSet"><code>RedisModule_StringSet</code></a></li>
<li><a href="#RedisModule_StringToDouble"><code>RedisModule_StringToDouble</code></a></li>
<li><a href="#RedisModule_StringToLongDouble"><code>RedisModule_StringToLongDouble</code></a></li>
<li><a href="#RedisModule_StringToLongLong"><code>RedisModule_StringToLongLong</code></a></li>
<li><a href="#RedisModule_StringToStreamID"><code>RedisModule_StringToStreamID</code></a></li>
<li><a href="#RedisModule_StringToULongLong"><code>RedisModule_StringToULongLong</code></a></li>
<li><a href="#RedisModule_StringTruncate"><code>RedisModule_StringTruncate</code></a></li>
<li><a href="#RedisModule_SubscribeToKeyspaceEvents"><code>RedisModule_SubscribeToKeyspaceEvents</code></a></li>
<li><a href="#RedisModule_SubscribeToServerEvent"><code>RedisModule_SubscribeToServerEvent</code></a></li>
<li><a href="#RedisModule_ThreadSafeContextLock"><code>RedisModule_ThreadSafeContextLock</code></a></li>
<li><a href="#RedisModule_ThreadSafeContextTryLock"><code>RedisModule_ThreadSafeContextTryLock</code></a></li>
<li><a href="#RedisModule_ThreadSafeContextUnlock"><code>RedisModule_ThreadSafeContextUnlock</code></a></li>
<li><a href="#RedisModule_TrimStringAllocation"><code>RedisModule_TrimStringAllocation</code></a></li>
<li><a href="#RedisModule_TryAlloc"><code>RedisModule_TryAlloc</code></a></li>
<li><a href="#RedisModule_UnblockClient"><code>RedisModule_UnblockClient</code></a></li>
<li><a href="#RedisModule_UnlinkKey"><code>RedisModule_UnlinkKey</code></a></li>
<li><a href="#RedisModule_UnregisterCommandFilter"><code>RedisModule_UnregisterCommandFilter</code></a></li>
<li><a href="#RedisModule_ValueLength"><code>RedisModule_ValueLength</code></a></li>
<li><a href="#RedisModule_WrongArity"><code>RedisModule_WrongArity</code></a></li>
<li><a href="#RedisModule_Yield"><code>RedisModule_Yield</code></a></li>
<li><a href="#RedisModule_ZsetAdd"><code>RedisModule_ZsetAdd</code></a></li>
<li><a href="#RedisModule_ZsetFirstInLexRange"><code>RedisModule_ZsetFirstInLexRange</code></a></li>
<li><a href="#RedisModule_ZsetFirstInScoreRange"><code>RedisModule_ZsetFirstInScoreRange</code></a></li>
<li><a href="#RedisModule_ZsetIncrby"><code>RedisModule_ZsetIncrby</code></a></li>
<li><a href="#RedisModule_ZsetLastInLexRange"><code>RedisModule_ZsetLastInLexRange</code></a></li>
<li><a href="#RedisModule_ZsetLastInScoreRange"><code>RedisModule_ZsetLastInScoreRange</code></a></li>
<li><a href="#RedisModule_ZsetRangeCurrentElement"><code>RedisModule_ZsetRangeCurrentElement</code></a></li>
<li><a href="#RedisModule_ZsetRangeEndReached"><code>RedisModule_ZsetRangeEndReached</code></a></li>
<li><a href="#RedisModule_ZsetRangeNext"><code>RedisModule_ZsetRangeNext</code></a></li>
<li><a href="#RedisModule_ZsetRangePrev"><code>RedisModule_ZsetRangePrev</code></a></li>
<li><a href="#RedisModule_ZsetRangeStop"><code>RedisModule_ZsetRangeStop</code></a></li>
<li><a href="#RedisModule_ZsetRem"><code>RedisModule_ZsetRem</code></a></li>
<li><a href="#RedisModule_ZsetScore"><code>RedisModule_ZsetScore</code></a></li>
<li><a href="#RedisModule__Assert"><code>RedisModule__Assert</code></a></li>
</ul>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 25, 2023</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 25, 2023</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../_index/" class="md-footer__link md-footer__link--prev" aria-label="上一页: Redis modules API">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Redis modules API
              </div>
            </div>
          </a>
        
        
          
          <a href="../modules-blocking-ops/" class="md-footer__link md-footer__link--next" aria-label="下一页: Redis modules and blocking commands">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                Redis modules and blocking commands
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Ean Yang
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/YQisme" target="_blank" rel="noopener" title="github主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://space.bilibili.com/244185393?spm_id_from=333.788.0.0" target="_blank" rel="noopener" title="b站主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0s16.1 2.868 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0c8.8 0 16.1 2.868 21.9 8.603 5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1zm-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8 6.3-6.5 9.7-14.3 10.1-23.5V173.8zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5-9.6 0-17.5-3.2-23.6-9.5-6.1-6.3-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2 6.3-6.3 13.2-9.6 23.3-10 9.2.4 17 3.7 23.3 10zm191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.1 6.3-14 9.5-23.6 9.5-9.6 0-17.4-3.2-23.6-9.5-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2 6.3-6.3 14.1-9.6 23.3-10 9.2.4 17 3.7 23.3 10z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://eanyang7.com" target="_blank" rel="noopener" title="个人主页" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M112 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0zm40 304v128c0 17.7-14.3 32-32 32s-32-14.3-32-32V256.9l-28.6 47.6c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6h29.7c33.7 0 64.9 17.7 82.3 46.6l58.3 97c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9L232 256.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V352h-16z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.prune", "navigation.top", "toc.follow", "header.autohide", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.action.edit", "content.action.view", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>